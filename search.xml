<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[个人博客相关]]></title>
      <url>http://yoursite.com/2017/05/16/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/</url>
      <content type="html"><![CDATA[<p>东西太多了，怕忘记。</p>
<p>想起什么就记录什么，不论简单复杂。</p>
<p>所有记录的都是亲测过的。</p>
<a id="more"></a>
<h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><p>在 MD 中 狂敲回车并没有什么软用，可以使用：<br><code>&lt;/br&gt;</code></p>
<h3 id="限制图片大小"><a href="#限制图片大小" class="headerlink" title="限制图片大小"></a>限制图片大小</h3><p>在 MD 中，图片过大的时候，可以使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"url..."</span> <span class="attr">width</span> = <span class="string">"宽度"</span> <span class="attr">height</span> = <span class="string">"高度"</span> <span class="attr">alt</span>=<span class="string">"图片描述"</span> <span class="attr">align</span>=<span class="string">"center"</span> /&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>限制宽高并限制居中。</p>
<h3 id="本地预览失败"><a href="#本地预览失败" class="headerlink" title="本地预览失败"></a>本地预览失败</h3><p>部署： <code>hexo g</code><br>提交： <code>hexo d</code><br>启动服务器： <code>hexo s</code><br>如果启动失败，可能原因是端口被占用了，可以关闭对应端口的程序，一般是 4000 ，如果发现并没有程序占用该端口，或者关闭不了占用该端口的程序，可以在 hexo 的 _config.yml 配置文件中加上：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">server:</div><div class="line">  port: 4001</div><div class="line">  compress: true</div><div class="line">  header: true</div></pre></td></tr></table></figure>
<p>来修改启动的端口。</p>
<p>然后重新部署在启动就好了。</p>
<h3 id="修改个人头像样式"><a href="#修改个人头像样式" class="headerlink" title="修改个人头像样式"></a>修改个人头像样式</h3><p>路径如下：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午11.42.21.png" alt="屏幕快照 2017-05-16 下午11.42.21"></p>
<p>在 custom.styl 文件中添加个人头像的 CSS 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">.site-author-image &#123;</div><div class="line">  border-radius: 100%;</div><div class="line">&#125;</div><div class="line">.site-author-image:hover&#123;</div><div class="line">  animation: scan 4s linear infinite;</div><div class="line">&#125;</div><div class="line">@keyframes scan</div><div class="line">&#123;</div><div class="line">  0%&#123;-webkit-transform:rotate(0)&#125; </div><div class="line">  50%&#123;-webkit-transform:rotate(180deg)&#125; </div><div class="line">  100%&#123;-webkit-transform:rotate(360deg)&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上是让图片变成圆形，并且当鼠标移动到头像上时，头像会不停的旋转。</p>
<h3 id="修改代码高亮"><a href="#修改代码高亮" class="headerlink" title="修改代码高亮"></a>修改代码高亮</h3><p>修改的只是 `` 中的样式：</p>
<p>例如 <code>code</code> 。</p>
<p>路径如下：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午11.42.21.png" alt="屏幕快照 2017-05-16 下午11.42.21"></p>
<p>在 custom.styl 文件中添加代码的 CSS 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">code &#123;</div><div class="line">  color: #fc6423;</div><div class="line">  background: #fbf7f8;</div><div class="line">  margin: 2px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="导航栏中的背景图片修改"><a href="#导航栏中的背景图片修改" class="headerlink" title="导航栏中的背景图片修改"></a>导航栏中的背景图片修改</h3><p>路径：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午11.51.29.png" alt="屏幕快照 2017-05-16 下午11.51.29"></p>
<p>修改 <code>background</code> 中的 <code>url</code> 即可：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.header &#123; background-image: url("http://7xkj6q.com1.z0.glb.clouddn.com/header_background.jpg"); &#125;</div><div class="line"></div><div class="line">.header-inner &#123; position: relative; &#125;</div></pre></td></tr></table></figure>
<h3 id="引用样式文本"><a href="#引用样式文本" class="headerlink" title="引用样式文本"></a>引用样式文本</h3><p>如下样式：</p>
<blockquote class="blockquote-center"><p>我是酷酷的引用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;% centerquote %&#125; example example &#123;% endcenterquote %&#125;</div><div class="line"></div><div class="line">或者简写为</div><div class="line"></div><div class="line">&#123;% cq %&#125; example example &#123;% endcq %&#125;</div></pre></td></tr></table></figure>
<p>详见 <a href="http://theme-next.iissnan.com/tag-plugins.html" target="_blank" rel="external">NexT 官方文档</a></p>
<h3 id="Bootstrap-Callout-样式"><a href="#Bootstrap-Callout-样式" class="headerlink" title="Bootstrap Callout 样式"></a>Bootstrap Callout 样式</h3><p>效果如下：</p>
<div class="note default"><p>class_name 是 default </p>
</div>

<div class="note primary"><p>class_name 是 primary </p>
</div>
<div class="note success"><p>class_name 是 success </p>
</div>

<div class="note info"><p>class_name 是 info </p>
</div>
<div class="note warning"><p>class_name 是 warning </p>
</div>

<div class="note danger"><p>class_name 是 danger </p>
</div>
<p>使用方式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;% note class_name %&#125; Example  &#123;% endnote %&#125;</div><div class="line"></div><div class="line">替换 class_name 为自己想要的形式，具体如上。</div></pre></td></tr></table></figure>
<p>详见 <a href="http://theme-next.iissnan.com/tag-plugins.html" target="_blank" rel="external">NexT 官方文档</a></p>
<h3 id="插入音乐"><a href="#插入音乐" class="headerlink" title="插入音乐"></a>插入音乐</h3><p>例如插入网易云音乐：</p>
<p>首先，去官网找到自己喜欢的音乐，点击生成外链播放器：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/F96A50B5-9782-462A-889C-A2E2EDC8CDF5.png" alt="F96A50B5-9782-462A-889C-A2E2EDC8CDF5"></p>
<p>可以选择外观的布局以及是否自动播放等：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-17 上午9.00.48.png" alt="屏幕快照 2017-05-17 上午9.00.48"></p>
<p>然后复制 HTML 代码到编辑器中就行了，效果如下：</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=415792881&auto=0&height=66"></iframe>

<p>但是许多时候，歌曲有版权的问题，不允许生成外链，那怎么办呢？</p>
<p>可以插入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;EMBED src=&quot;http://on9hzfn6s.bkt.clouddn.com/%E8%B5%B5%E6%B5%B4%E8%BE%B0%20-%20%E5%8F%AF%E4%B9%90.mp3&quot; autostart=&quot;true&quot; loop=&quot;true&quot; width=&quot;400&quot; height=&quot;50&quot;&gt;</div></pre></td></tr></table></figure>
<p>其中 <code>src</code> 中填入音乐的 <code>url</code> ，这里我是将音乐上传到了七牛云中获得了外链，效果如下： </p>
<embed src="http://on9hzfn6s.bkt.clouddn.com/%E8%B5%B5%E6%B5%B4%E8%BE%B0%20-%20%E5%8F%AF%E4%B9%90.mp3" autostart="true" loop="true" width="400" height="66"> 

<p>其中 <code>autostart</code> 为是否自动播放， <code>loop</code> 为是否自动循环，这些都可以自己设置，虽然外观有点丑，不过功能齐全，还能下载哦。</p>
<p>如果真的觉得丑可以选择将宽高都设置为 0 ，然后自动播放。（应该还有别的更好的方式，如果你知道，欢迎留言交流）</p>
<p>这个播放器还可以设置别的许多属性，详见<a href="http://blog.csdn.net/pengzhaoyang100/article/details/7815314" target="_blank" rel="external">这里</a>。</p>
]]></content>
      
        <categories>
            
            <category> 备忘录 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 记下来 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[仿 QQ 弱提示]]></title>
      <url>http://yoursite.com/2017/05/16/%E6%A8%A1%E4%BB%BFqq%E5%BC%B1%E6%8F%90%E7%A4%BA/</url>
      <content type="html"><![CDATA[<p>设计给的图：</p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/弱提示-2.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<a id="more"></a>
<p><br></p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/弱提示-1.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<p><br></p>
<p>这这弱提示和 QQ 的非常像：</p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/350F6CDE-ACF8-448B-AAE0-1D6ECC3C20FA.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<p><br></p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午10.37.57.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<p> <br></p>
<p>看到这个我第一想法是 <code>SnakeBar</code> ，但是会发现一个问题，<code>SnackBar</code> 需要当前的 <code>Context</code> ，而且当前界面消失的时候，显示的 <code>Snackbar</code> 也会消失。最重要的是工程中的所有 <code>Toast</code> 都要替换成这种弱提示，而之前的方法只需要接受一个 <code>String</code> 参数就能够完成了，所以为了减少工作量，我们在实现该功能的时候，最好也只是需要传入相同参数。</p>
<p>最终决定也是用 <code>Toast</code> 来完成这个效果：</p>
<p>首先设置 <code>Toast</code> 的宽度高度和动画效果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//全屏和动画的设置方法</span></div><div class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initToast</span><span class="params">(Toast toast)</span> </span>&#123;</div><div class="line">       <span class="keyword">try</span> &#123;</div><div class="line">           Field mTN = toast.getClass().getDeclaredField(<span class="string">"mTN"</span>);</div><div class="line">           mTN.setAccessible(<span class="keyword">true</span>);</div><div class="line">           Object mTNObj = mTN.get(toast);</div><div class="line">           Field mParams = mTNObj.getClass().getDeclaredField(<span class="string">"mParams"</span>);</div><div class="line">           mParams.setAccessible(<span class="keyword">true</span>);</div><div class="line">           WindowManager.LayoutParams params = (WindowManager.LayoutParams) mParams.get(mTNObj);</div><div class="line">           params.width = -<span class="number">1</span>;<span class="comment">//-1表示全屏, 你也可以设置任意宽度.</span></div><div class="line">           params.height = <span class="number">130</span>;<span class="comment">// (int) dpToPx(context, T_HEIGHT);</span></div><div class="line">           params.windowAnimations = R.style.PopupAnimation;<span class="comment">//设置动画, 需要是style类型</span></div><div class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">           e.printStackTrace();</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>上面的 <code>height</code> 只是在 Demo 中使用的高度，或者使用 -2 会自适应布局。</p>
<p>在 styles 中需要添加：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"PopupAnimation"</span> <span class="attr">parent</span>=<span class="string">"android:Animation"</span> <span class="attr">mce_bogus</span>=<span class="string">"1"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowEnterAnimation"</span>&gt;</span>@anim/popup_enter<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowExitAnimation"</span>&gt;</span>@anim/popup_exit<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>其中 anim 文件下的两个动画文件分别为：</p>
<p><strong>enter:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"500"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"-200"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>exit:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"500"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"-200"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>动画的执行时间和移动的距离可以自己适当的调整。</p>
<p>接下来，就是让 <code>Toast</code> 的位置在顶部出现，这个顶部必须是状态栏下面，而不是标题栏下面，还有很重要的一点是，如果想要达到 QQ 所显示的那种效果，这个应用必须是所有状态栏都是透明的，否则将几乎不能实现这种效果。</p>
<p>给主题加上状态栏透明的效果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"changeBar"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.NoActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">    <span class="comment">&lt;!--和  代码中效果一样--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowTranslucentNavigation"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowTranslucentStatus"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--恢复状态栏的  位置空间--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:fitsSystemWindows"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>Toast</code> 的显示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> Toast toast;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(Context context, CharSequence charSequence, <span class="keyword">int</span> type)</span> </span>&#123;</div><div class="line"></div><div class="line">    View layout;</div><div class="line">    toast = Toast.makeText(context, <span class="string">""</span>, Toast.LENGTH_SHORT);</div><div class="line">    initToast(toast);</div><div class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123;</div><div class="line">        layout = LayoutInflater.from(context).inflate(R.layout.toast, <span class="keyword">null</span>);<span class="comment">//自定义的布局</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        layout = LayoutInflater.from(context).inflate(R.layout.toaste, <span class="keyword">null</span>);<span class="comment">//自定义的布局</span></div><div class="line">    &#125;</div><div class="line">    ((TextView) layout.findViewById(R.id.base_toast_text_view)).setText(charSequence);</div><div class="line">    toast.setView(layout);</div><div class="line">    toast.setGravity(Gravity.TOP, <span class="number">0</span>, <span class="number">0</span>);<span class="comment">//从顶部开始显示</span></div><div class="line">    toast.getView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);<span class="comment">//设置Toast可以布局到系统状态栏的下面</span></div><div class="line">    toast.show();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其中两个 <code>Toast</code> 的布局都是根据需求自定义的，分别是：</p>
<p><strong>toast:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:background</span>=<span class="string">"@drawable/toasttt"</span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Space</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"20dp"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/base_toast_text_view"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span></div><div class="line">        <span class="attr">android:drawableLeft</span>=<span class="string">"@mipmap/gantanh"</span></div><div class="line">        <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">        <span class="attr">android:paddingBottom</span>=<span class="string">"10dp"</span></div><div class="line">        <span class="attr">android:paddingLeft</span>=<span class="string">"8dp"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"sdfasd"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"#000"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"16sp"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>toaste:</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:background</span>=<span class="string">"@drawable/toasttte"</span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Space</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"20dp"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/base_toast_text_view"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span></div><div class="line">        <span class="attr">android:drawableLeft</span>=<span class="string">"@mipmap/gantanh"</span></div><div class="line">        <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">        <span class="attr">android:paddingBottom</span>=<span class="string">"10dp"</span></div><div class="line">        <span class="attr">android:paddingLeft</span>=<span class="string">"8dp"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"16sp"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>仔细观察会发现，是有 <code>Toast</code> 下面是有一定阴影的，所以需要给 <code>Toast</code> 的背景加上：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Bottom 2dp Shadow --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!--阴影的渐变颜色--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">gradient</span></span></div><div class="line">                <span class="attr">android:angle</span>=<span class="string">"-90"</span></div><div class="line">                <span class="attr">android:centerColor</span>=<span class="string">"#000"</span></div><div class="line">                <span class="attr">android:endColor</span>=<span class="string">"#00000000"</span></div><div class="line">                <span class="attr">android:startColor</span>=<span class="string">"#000"</span></div><div class="line">                <span class="attr">android:type</span>=<span class="string">"linear"</span></div><div class="line">                /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--&amp;lt;!&amp;ndash; White Top color &amp;ndash;&amp;gt;--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">"4dp"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#f00"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最后根据不同的状态，显示不同的 <code>Toast</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">findViewById(R.id.button).setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        show(MainActivity.<span class="keyword">this</span>, <span class="string">"每天最多给它点10个赞"</span>, <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">findViewById(R.id.button2).setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        show(MainActivity.<span class="keyword">this</span>, <span class="string">"当前网络不可用，请检查网络设置"</span>, <span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>大致的效果图，懒的找图标了，就用一样的了：</p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午10.31.55.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<p><br></p>
<div align="center"><br> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-16 下午10.31.39.png" width="240" height="460" alt="弱提示-2" align="center"><br> </div>

<p> <br></p>
<p>最后,这只是个简单的 Demo ，实际中那样改变主题是非常不好的，因为那个只适用于 API 19 及以上的版本，如果真要改变状态栏的颜色，可以参考 <a href="https://github.com/niorgai/StatusBarCompat" target="_blank" rel="external">StatusBarCompat</a>、<a href="https://github.com/jgilfelt/SystemBarTint" target="_blank" rel="external">SystemBarTint</a> 或者 <a href="https://github.com/msdx/status-bar-compat" target="_blank" rel="external">status-bar-compat</a>，使用它们都可以轻松的动态改变状态栏的颜色，但是他们都有局限性，都需要一个参数，就是当前的 <code>Activity</code> 。</p>
<p>另外，其实 QQ 的那个 <code>Toast</code> 的顶部其实还有渐变的阴影，所以看上效果很更好看一点，新版的 QQ 标题栏的颜色也改成了渐变蓝色，也是很好看的。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[岛上书店]]></title>
      <url>http://yoursite.com/2017/05/16/%E5%B2%9B%E4%B8%8A%E4%B9%A6%E5%BA%97/</url>
      <content type="html"><![CDATA[<center><br><br><img src="https://img3.doubanio.com/lpic/s28049685.jpg" alt=""><br><br></center>

<a id="more"></a>
<p>这本书其实去年就买了，可惜当时就翻阅了前面几页，觉得有点书呆子气。因为当时还买了<em>摆渡人</em>和<em>无声告白</em>相对都比这书有吸引力就一直把它冷落了。</p>
<p>直到上次去杭州图书馆，由于那里的书架摆书都没按顺序，根本找不到自己想要看的书，就开始在茫茫书海中凭眼缘找书。</p>
<p>一般这种时候，找书不是找那种有点名气的就是找之前看过一点的，然后我就找到了它。</p>
<p>买了杯冰饮，找个临窗的位置坐下来，带上耳机。一个周末的下午就过去了~ ~</p>
<hr>
<p>本书主要说的是一个出版社的女业务员和偏僻孤岛上的一个书店老板之间的爱情故事。</p>
<p>把这个故事说成是爱情故事我觉得有点不准确，唔，可能按照我猜测的作者想要表达的意思是很不准确，毕竟书名是岛上书店，主角应该是书店吧。</p>
<p>这个书店是老板已故的妻子和老板合资开的，也是岛上唯一的书店，后来老板死了，女业务员也跑了，本来要关的书店却被书店老板的小姨子接手了。</p>
<p>铁打的书店，流水的老板。</p>
<p>别的不说，书本中出现的书籍恐怕不下 50 本。（写到这，我搜下了，发现还是有好事者去<a href="https://www.douban.com/doulist/39503745/" target="_blank" rel="external">罗列它们</a>的）</p>
<p>由于看这种类型的书，我一般大脑都是出于放空状态，不会去猜测结局或者质疑逻辑，所以故事后期居然给我高潮迭起的感觉，这种转折在意料之中，情理之外，狗血中带点惊喜。</p>
<p>其实一开始我以为是老板要和小姨子发生点什么的，是我庸俗了。</p>
<p>本书处处想要亮点的结果就是没有一个地方有亮点，看完除了记得里面提到的书籍很多之外，别的印象都不深刻。</p>
<p>人物的塑造不深刻。那个老板的性格现在我已经忘得一干二净了，除了熟练的报菜名？那个女业务员是怎么想的？就因为男主追了她喜欢的剧，妈妈的话都不听了？可怜的小姨子天天大着肚子独守空房却干出那偷东西的事？以及一个闲的发慌的警察，莫名其妙的成了书店老板。</p>
<p>不过总的来说营造出来的那种感觉却是不错的，孤岛，冰雪封路，交通不便，唯一的书店，弃婴，书信，配上一段凄美的爱情故事，本来还有要扩建的咖啡厅，这种慢慢慢慢的生活实着令人羡慕。</p>
<p>出版社的每一本书都读的书店老板现在估计是不可能存在了，小时候我去那种小的书店，里面或许并没有我想要看的书，但是我就是很喜欢那种被书包围的感觉，又或者是翻开一本比较新的书，闻它的气味。文中最后出现电子书阅读器，老板是很排斥的，那种排斥我有点能够理解。</p>
<p>电子书和纸质书在内容上并没有任何区别，在阅读的时候却能带给人完全不同的感觉，你能够想象一个好几天没洗头的人待在宿舍，蜷缩在被窝里盯着手机在看<strong>战争与和平</strong>吗？ 给我的感觉就是那样。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=2&id=31745039&auto=1&height=32"></iframe>




]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 面向对象]]></title>
      <url>http://yoursite.com/2017/05/15/Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      <content type="html"><![CDATA[<p>作为高级面向对象语言，Python 非常的灵活。</p>
<h4 id="slots-的使用"><a href="#slots-的使用" class="headerlink" title="__slots__ 的使用"></a><code>__slots__</code> 的使用</h4><p>定义一个学生对象，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>一般语言，都是在初始化对象的时候，先定义好对象的属性和方法。</p>
<a id="more"></a>
<p>而 Python 可以在程序运行的过程中，动态的添加属性和方法。</p>
<p>实例动态添加属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">stu = Student()</div><div class="line"></div><div class="line">stu.name = <span class="string">'zlf'</span></div><div class="line"></div><div class="line">print(stu.name)</div></pre></td></tr></table></figure>
<p>非常 easy 。</p>
<p>实例动态添加方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line">stu = Student()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self,name)</span>:</span></div><div class="line">    self.name = name</div><div class="line"></div><div class="line"><span class="keyword">from</span> types <span class="keyword">import</span> MethodType</div><div class="line">stu.set_name = MethodType(set_name,stu)</div><div class="line">stu.set_name(<span class="string">'zlf'</span>)</div><div class="line"></div><div class="line">print(stu.name)</div></pre></td></tr></table></figure>
<p><strong>注意两点</strong>： <code>MethodType()</code> 方法传入两个参数，第一个是方法，第二个是对象，还有实例动态添加属性，加的只是该实例的属性，不是对象的属性。</p>
<p>对象动态添加方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self,name)</span>:</span></div><div class="line">    self.name = name</div><div class="line"></div><div class="line">Student.set_name = set_name</div><div class="line"></div><div class="line">stu = Student()</div><div class="line">stu.set_name(<span class="string">'zlf'</span>)</div><div class="line"></div><div class="line">print(stu.name)</div></pre></td></tr></table></figure>
<p>对象添加的属性，所有实例都可以使用。</p>
<p>Java 使用者表示，这也太灵活了吧，难道都随便添加属性和方法吗？ 不，用 <code>__slots__</code> 这个特殊的变量就具有限制的作用。</p>
<p>slot 这个单词有硬币投币口的意思。</p>
<p>用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line">    __slots__ = (<span class="string">'name'</span>,<span class="string">'age'</span>)</div><div class="line"></div><div class="line">stu = Student()</div><div class="line">stu.name = <span class="string">'zlf'</span></div><div class="line">stu.city = <span class="string">'hangz'</span></div></pre></td></tr></table></figure>
<p>很明显，没有出现在 slots 白名单的属性是不允许被添加的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"/Users/zhanglf/Documents/Python/practice/HelloWorld.py"</span>, line <span class="number">9</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    stu.city = <span class="string">'hangz'</span></div><div class="line">AttributeError: <span class="string">'Student'</span> object has no attribute <span class="string">'city'</span></div></pre></td></tr></table></figure>
<p><strong>注意一点</strong>：这个白名单默认是不被继承的，当子类也定义白名单的时候，父类白名单才会被激活。</p>
<h4 id="property-的使用"><a href="#property-的使用" class="headerlink" title="@property 的使用"></a>@property 的使用</h4><p>正常情况下我们的 <code>get()</code> <code>set()</code> 是这样写的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_age</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_age</span><span class="params">(self,value)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value, int):</div><div class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'age must be an integer!'</span>)</div><div class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">120</span>:</div><div class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'age must be 0 ~ 100!'</span>)</div><div class="line">        self.age = value</div><div class="line"></div><div class="line">stu = Student()</div><div class="line">stu.set_age(<span class="number">50</span>)</div><div class="line"><span class="keyword">print</span> stu.get_age()</div></pre></td></tr></table></figure>
<p>运行结果当然是： 50 。</p>
<p>但是调用的过程对于 Python 来说不够优雅，于是有了神奇的 @property 。</p>
<p>它的用处就是将调用 <code>set()</code> 和 <code>get()</code> <strong>方法</strong>的形式变成直接使用<strong>属性</strong>的方式改变对应的 <code>value</code> 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line"><span class="meta">    @property</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._age</div><div class="line"></div><div class="line"><span class="meta">    @age.setter</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span><span class="params">(self,value)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value, int):</div><div class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'age must be an integer!'</span>)</div><div class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">120</span>:</div><div class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'age must be 0 ~ 100!'</span>)</div><div class="line">        self._age = value</div><div class="line"></div><div class="line">stu = Student()</div><div class="line">stu.age = <span class="number">50</span></div><div class="line"><span class="keyword">print</span> stu.age</div></pre></td></tr></table></figure>
<p>这里<strong>特别特别要注意</strong>的是，<code>age</code> 值前面加了 <code>_</code> 。 </p>
<p>如果想要该属性变成只能读，而不能写，那么不要写 <code>setter</code> 方法就行了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    _age = <span class="number">24</span></div><div class="line"></div><div class="line"><span class="meta">    @property</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._age</div><div class="line"></div><div class="line">    <span class="comment"># @age.setter</span></div><div class="line">    <span class="comment"># def age(self,value):</span></div><div class="line">    <span class="comment">#     if not isinstance(value, int):</span></div><div class="line">    <span class="comment">#         raise ValueError('age must be an integer!')</span></div><div class="line">    <span class="comment">#     if value &lt; 0 or value &gt; 120:</span></div><div class="line">    <span class="comment">#         raise ValueError('age must be 0 ~ 100!')</span></div><div class="line">    <span class="comment">#     self._age = value</span></div><div class="line"></div><div class="line">stu = Student()</div><div class="line"><span class="keyword">print</span> stu.age</div></pre></td></tr></table></figure>
<p>如果加了 <code>stu.age = 50</code> 就会报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AttributeError: can<span class="string">'t set attribute</span></div></pre></td></tr></table></figure>
<h4 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h4><p>Python 支持多继承。那么第一个想到的问题一定是，如果两个父类中拥有相同的方法，子类怎么办？</p>
<p>看一段网友提供的代码就清楚了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="string">'关于多重继承的一些小测试'</span></div><div class="line"></div><div class="line">__author__=<span class="string">'bgn-037'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put_out</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'A'</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_outa</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'a'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put_out</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'B'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A,B)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B,A)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(D)</span>:</span><span class="comment">#不能同时继承A与D--&gt;TypeError: Cannot create a consistent method resolution order (MRO) for bases A, D</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put_out</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'E'</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_out</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'e'</span></div><div class="line"></div><div class="line">X=C()</div><div class="line">print(X.put_out())</div><div class="line">Y=D()</div><div class="line">print(Y.put_out())</div><div class="line">M=E()</div><div class="line">print(M.put_out(),M.print_out(),M.print_outa())</div></pre></td></tr></table></figure>
<p>运行的结果是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A</div><div class="line">B</div><div class="line">(<span class="string">'E'</span>, <span class="string">'e'</span>, <span class="string">'a'</span>)</div></pre></td></tr></table></figure>
<p>很容易理解，哪个在父类在<strong>前面</strong>，就用哪个父类中的方法。</p>
<p>当我一番搜索关于 <code>Mixin</code> 的概念之后，我觉得， Python 其实不算真正意义上的多继承，而更像是单继承多实现。</p>
<p>继承强调的是 <em>I am</em> ， <code>Mixin</code> 强调的是 <em>I can</em> 。</p>
<p><code>Mixin</code> 的使用是为了获得多继承的优点，或者说就是一种语法糖：在编译的时候将一段代码复制到了另一个地方。同时它也避免了多重继承的时候出现的类与类之间的关系过于混乱的问题。</p>
<p>它的使用就是在后面的父类中加个后缀：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Mammal, RunnableMixin, CarnivorousMixin)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p><em>Carnivorous 是食肉的意思，Mixin 是混入的意思</em></p>
<p>参考链接：</p>
<p><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868200511568dd94e77b21d4b8597ede8bf65c36bcd000" target="_blank" rel="external">缪雪峰官网</a><br><a href="https://www.zhihu.com/question/20778853" target="_blank" rel="external">Mixin 是什么概念</a><br><a href="http://www.jianshu.com/p/933a22ac0eb7" target="_blank" rel="external">Python Mixin 模式</a><br><a href="http://blog.csdn.net/pp634077956/article/details/50838745" target="_blank" rel="external">Python 多继承</a></p>
<p><strong>未完待续…</strong></p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[天才在左 疯子在右]]></title>
      <url>http://yoursite.com/2017/05/15/%E5%A4%A9%E6%89%8D%E5%9C%A8%E5%B7%A6%E7%96%AF%E5%AD%90%E5%9C%A8%E5%8F%B3/</url>
      <content type="html"><![CDATA[<center><br><br><img src="https://img3.doubanio.com/lpic/s28350186.jpg" alt=""><br><br></center>

<a id="more"></a>
<p>这算是第一次一本正经的自主自愿的来写一本书的读后感了。</p>
<p>本书自我介绍说是国内真实的精神病人访谈手记，一开始是我是不信的。</p>
<p>看了几篇之后，我信了。</p>
<p>再看了几篇，我彻底不信了。</p>
<p>这样的心路历程一定程度上也反应了这书的真实性。</p>
<hr>
<p>就像介绍里说的，这是一本访谈手记，对象是精神病人，注意，是精神病，不是神经病。 那么精彩程度，更多的就是由采访者来决定的了。（又或者说，由作者纯粹的 YY 来决定的）</p>
<p>说几个其中让我印象比较深刻的<em>病人</em>吧。</p>
<h4 id="物理天才？"><a href="#物理天才？" class="headerlink" title="物理天才？"></a>物理天才？</h4><p>这个<em>病人</em>号称可以看到四维空间，那么四维空间是怎么样的存在呢？</p>
<p>在看这篇访谈的时候，我想到了<strong>星际穿越</strong>中，那位父亲最后在<strong>五维空间</strong>中给女儿提供线索的场景。</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1494859565473&amp;di=f555dc2dd2d0f03a2ab6bfa5012c3d55&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.rong360.com%2Fgl%2Fuploads%2Fallimg%2F141126%2F70-1411261HK9251.jpg" alt=""></p>
<p>首先有个问题，我们生活在几维空间，好吧，高深我不说，我也不懂，就暂时理解我们生活在四维空间中（虽然这样说不是<a href="http://www.bilibili.com/video/av419401/?from=search&amp;seid=4663475424673520770" target="_blank" rel="external">很准确</a>），通常理解长宽高和时间四个维度，所以我们只能看到三维的事物，这点还是比较好懂的。</p>
<p>那么这个骚年眼中我们是什么样子的呢？</p>
<p>大家都是一条虫子。因为时间这个东西是可以被观察的，所以没有先后关系，一切都是同时发生的，那么每个人都会出现一条属于自己的人生轨迹的线条。连在一块就像一条很长很长很长的虫子。</p>
<p>我又想到了<strong>降临</strong>中，女主角在最后一瞬间参透了外星人的非线性语言，感悟了自己的因果，看到那个不是未来的未来。</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1495455508&amp;di=fb65722dabad2ece5178b1626f42fe4e&amp;imgtype=jpg&amp;er=1&amp;src=http%3A%2F%2Fi-3.pp8.com%2F2017%2F1%2F24%2F6c714939-de2c-4cd9-aca3-d0a68655099d.jpg" alt=""></p>
<p>我很佩服这个可能脑子有问题的小伙子可以自己为了弄懂心中的困惑，去翻阅英文词典查看外语资料。</p>
<p>但是这个过程明显被作者加工过了。</p>
<p>说实话我很讨厌作者在每一篇的最后加一段故作升华般若有所思或是大彻大悟的结语，太卖弄了。</p>
<h4 id="能看未来的女子"><a href="#能看未来的女子" class="headerlink" title="能看未来的女子"></a>能看未来的女子</h4><p>这个设定是这样的，这女的每天醒来看窗外可以看到外面天的颜色。</p>
<p>这个颜色可不是我们说的阴天灰色，晴天蓝色，而是会根据今天将要发生的事情的好坏，出现不同的颜色。</p>
<p>比如要亲人要死去就看到血红色，自己要中彩票了就看到深绿色，没什么事情发生就是浅蓝色…</p>
<p>差不多就是这么个样子。有点类似于<em>左眼跳财右眼跳灾</em>。只不过作者笔下的这个小女孩将其更加的形象化了。</p>
<p>这个设定给我的形象比较深，不是因为她的能力很特殊，而是这个设定比较的具体，鲜明。还有这个小女孩很乖，很漂亮，啊哈哈，至少作者笔下是这样的。</p>
<p>小时候看尼古拉斯演的<strong>预见未来</strong>，我就很激动，特别是最后那个多重分身扫雷的场景。</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1495456226&amp;di=446959fd233d112d6044bfc96a7913a9&amp;imgtype=jpg&amp;er=1&amp;src=http%3A%2F%2Fs7.sinaimg.cn%2Fmiddle%2F54b0c0abta7e39a95f666%26amp%3B690" alt=""></p>
<p>在当时，中二的我把它当成是我的大招，无敌般的存在。</p>
<p>现在想想，或许知道未来也是一件很痛苦的事情吧。未知的才是精彩的，不是吗？</p>
<h4 id="何谓生命？"><a href="#何谓生命？" class="headerlink" title="何谓生命？"></a>何谓生命？</h4><p>这个患者是一名老师。</p>
<p>这我看来，老师这职业出现这种精神上问题的应该是比较少的，可能是在我心里老师，都是比较严肃正经的吧。</p>
<p>但是她的想法在我看来特别有趣。</p>
<p>她说，她发现了一种新的生命新式。例如，她说，蚂蚁是松散生命，说蚂蚁就是细胞，工蚁是细胞是嘴是手，用来找吃的，蚁后是大脑负责指挥…</p>
<p>也就是说，所谓的一群蚂蚁其实是所谓的一个生命体。</p>
<p>唔，说实话，如果这个想法是作者自个儿琢磨出来的，我觉得：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-15 下午8.47.05.png" alt="屏幕快照 2017-05-15 下午8.47.05"></p>
<p>照她这个说法，一切都要颠覆了，哦，不，其实一切都不用颠覆，就是认知换一下而已。</p>
<p>就像是有一天，有人告诉你，其实我们看到的世界是颠倒的，你眼中看到的都是大脑矫正过的，你信吗？  </p>
<p>你不信拉倒，反正都错了那么久了，又没什么关系。</p>
<hr>
<p>这本书我看了一大半，还有几篇没看完，也不打算看了。</p>
<p>特别是对于里面的多重人格的访谈，没有什么出彩的，再深刻也没<strong>搏击俱乐部</strong>深刻，在精彩也没<strong>致命 Id</strong> 精彩，人格再多也没 <strong>24 个比利</strong>多。</p>
<p>估计也是将新颖的东西放前面讲的差不多了。越看越想睡，什么穿越，重生，变态杀人狂，俗套哦。（看这本书我是在公司午间休息的时候抽空看的，陆陆续续看了一周左右）</p>
<p>什么样的人算是精神病患者呢？这个定义有点玄妙。我想到了前不久看的国产电影<strong>你好，疯子</strong>中，一群人为了证明自己不是精神病患者，做出了各种各种荒唐的事情。</p>
<p>只是想法与大部分人不同就算是精神有问题么？也难怪那么多伟人被关押或是压迫处死了。</p>
<p>总的来说，这书还是值得一读的，可以当成是脑洞小故事在无聊的时候翻翻，涨涨见识，了解一下所谓的奇葩都长什么样。不用都看，随便看几篇就好了。</p>
<p> <img src="data:image/jpeg;base64,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" alt=""></p>
<p><em>上文中提到的电影或是书籍（除国产）都灰灰灰常推荐的</em></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=25638887&auto=1&height=66"></iframe>

]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python函数对象]]></title>
      <url>http://yoursite.com/2017/05/15/python%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/</url>
      <content type="html"><![CDATA[<p>函数对象的 <code>__code__</code> 属性里存在着许多东西。</p>
<p>例如函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'i am foo'</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>中，函数的元数由 <code>foo.__code__.co_argcount</code> 获得，函数的字节码由 <code>foo.__code__.co_code</code> 获得。这些 <code>__code__</code> 对象中的属性都是只读的，但是 <code>__code__</code> 对象本身却是可读可写的。</p>
<p>所以我们可以通过这个属性来恶作剧，再定义一个函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'i am bar'</span></div></pre></td></tr></table></figure>
<p>（关于 foo bar 之类的函数名到底有什么含义，可以看<a href="http://www.cnblogs.com/awpatp/archive/2011/02/27/1966380.html" target="_blank" rel="external">这里</a>，其实就是类似于中文中的我们常说的张三，李四）</p>
<p>两个函数定义好了，就可以进行移植了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo.__code__ = bar.__code___</div></pre></td></tr></table></figure>
<p>这个时候运行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> foo()</div></pre></td></tr></table></figure>
<p>会得到的是： <code>i am bar</code></p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Pyton </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 模块]]></title>
      <url>http://yoursite.com/2017/05/12/python%E6%A8%A1%E5%9D%97/</url>
      <content type="html"><![CDATA[<p>每个 .py 文件就相当于是一个模块。</p>
<p>一切都是对象。</p>
<a id="more"></a>
<h4 id="模块的创建和使用"><a href="#模块的创建和使用" class="headerlink" title="模块的创建和使用"></a>模块的创建和使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">__author__ = <span class="string">'zhanglf'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    args = sys.argv</div><div class="line">    <span class="keyword">if</span> len(args)==<span class="number">1</span>:</div><div class="line">        print(<span class="string">'Hello, %s!'</span> % args[<span class="number">0</span>])</div><div class="line">    <span class="keyword">elif</span> len(args)==<span class="number">2</span>:</div><div class="line">        print(<span class="string">'Hello, %s!'</span> % args[<span class="number">1</span>])</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(<span class="string">'Too many arguments!'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</div><div class="line">    test()</div></pre></td></tr></table></figure>
<p>关于 Python 中的变量,默认是公开( Pulbic )的。</p>
<p>其中 <code>_xx</code> 或者 <code>__xx</code> 就相当于是加了 <code>private</code> 修饰符的变量。而 <code>__author__</code> 或者 <code>__name__</code> 这种变量是特殊变量。</p>
<p>如何使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">smilEditdeMBP:practice zhanglf$ python helloworld.py</div><div class="line">Hello, helloworld.py!</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> HelloWorld</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>HelloWorld.test()</div><div class="line">Hello, !</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>HelloWorld.__author__</div><div class="line"><span class="string">'zhanglf'</span></div></pre></td></tr></table></figure>
<p>关于 <code>args = sys.argv</code> 第一个参数默认是该文件名称，也就是 <code>helloworld.py</code> 。</p>
<p>所以当传一个参数进去的时候，默认就是两个参数，因为就输出了第一个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">smilEditdeMBP:practice zhanglf$ python helloworld.py zhanglf</div><div class="line">Hello, zhanglf!</div></pre></td></tr></table></figure>
<h4 id="三方模板的使用"><a href="#三方模板的使用" class="headerlink" title="三方模板的使用"></a>三方模板的使用</h4><p>使用一个 Python 下很强大的图像处理库 – Python Imaging Library 。</p>
<p>原图：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-12 下午5.06.59.png" alt="屏幕快照 2017-05-12 下午5.06.59"></p>
<p>安装 Plillow：</p>
<p><code>pip install Pillow</code></p>
<p>启飞：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im = Image.open(<span class="string">'desktop/img/abc.jpg'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(im.format,im.size,im.mode)</div><div class="line">(<span class="string">'JPEG'</span>, (<span class="number">2880</span>, <span class="number">1800</span>), <span class="string">'RGB'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im.thumbnial((<span class="number">200</span>,<span class="number">100</span>))</div></pre></td></tr></table></figure>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-12 下午5.06.18.png" alt="屏幕快照 2017-05-12 下午5.06.18"></p>
<p>都很好理解， 其中 thumbnial 单词的意思是极小的（做名词是拇指甲）。</p>
<p>也可以按照指定尺寸缩放：</p>
<p><code>&gt;&gt;&gt; im = im.resize((100,100))</code></p>
<p>保存：</p>
<p><code>&gt;&gt;&gt; im.save(&#39;desktop/img/thumb.jpg&#39;,&#39;jpeg&#39;)</code></p>
<p>打开：</p>
<p><code>&gt;&gt;&gt; im.show()</code></p>
<p>显示属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;print(im.format,im.size,im.mode)</div><div class="line">(<span class="string">'JPEG'</span>, (<span class="number">160</span>, <span class="number">100</span>), <span class="string">'RGB'</span>)</div></pre></td></tr></table></figure>
<p>再来两个比较有意思的：</p>
<p>图片高斯模糊：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFilter</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im = im.filter(ImageFilter.GaussianBlur)</div></pre></td></tr></table></figure>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-12 下午5.10.09.png" alt="屏幕快照 2017-05-12 下午5.10.09"></p>
<p>图像冷暖色调调整：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>r, g, b = im.split()   <span class="comment">#分离图像</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = r.point(<span class="keyword">lambda</span> i:i*<span class="number">1.3</span>)  <span class="comment">#红色分量变为原来的1.3倍</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = g.point(<span class="keyword">lambda</span> i:i*<span class="number">0.9</span>) <span class="comment">#绿色分量变为原来的0.9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = b.point(<span class="keyword">lambda</span> i:<span class="number">0</span>) <span class="comment">#把蓝色分量变为0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im = Image.merge(im.mode,(r,g,b)) <span class="comment">#合并图像</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im.show()</div></pre></td></tr></table></figure>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-12 下午5.04.19.png" alt="屏幕快照 2017-05-12 下午5.04.19"></p>
<hr>
<p>参考链接：</p>
<p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318447437605e90206e261744c08630a836851f5183000" target="_blank" rel="external">廖雪峰的官方网站</a><br><a href="http://www.php230.com/1485105002.html" target="_blank" rel="external">Python图像处理模块pillow子模块Image用法精要</a></p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 装饰器]]></title>
      <url>http://yoursite.com/2017/05/10/Python%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
      <content type="html"><![CDATA[<h3 id="不带参数的装饰器"><a href="#不带参数的装饰器" class="headerlink" title="不带参数的装饰器"></a>不带参数的装饰器</h3><p>核心思想就是设计模式中的装饰者模式。</p>
<p>按照 Java 中的写法，我们一般是这么做的：</p>
<p>定义一个专门处理日志打印的函数，接受需要处理的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_log</span><span class="params">(func)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'call '</span>+f.func_name+<span class="string">'()...'</span></div><div class="line">    func()</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>使用：<br><code>print_log(func)</code></p>
<p>其实在我（ Java 程序员眼中）看来，这已经是非常的方便了，而且也没有破坏原函数的结构。</p>
<p>但是，对于 Python 来说还远远不够，它追求的是依然运行 <code>func()</code> 并且在不改变其内部结构的基础上扩展别的功能。</p>
<p>且 Python 还用语法糖简化了其使用过程。不过首先，也是非常关键的一点是要理解<strong>闭包</strong>的概念，上一篇的 Python 高级特性中介绍有提过。</p>
<p>用代码说话，下面就是一个简单的装饰器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(x)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'call '</span> + f.__name__ + <span class="string">'()...'</span></div><div class="line">        <span class="keyword">return</span> f(x)</div><div class="line">    <span class="keyword">return</span> fn</div></pre></td></tr></table></figure>
<p>第一眼看真的是一脸懵逼，我花了大量的时间想弄清楚 <code>return f(x)</code> 到底是什么意思，有什么用，这个参数 <code>x</code> 又是什么意思。</p>
<p>于是我改造了一下，去掉了那个 <code>return</code> 和 <code>x</code> ，写成非常好理解的形式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'call '</span> + f.__name__ + <span class="string">'()...'</span></div><div class="line">        f()</div><div class="line">    <span class="keyword">return</span> fn</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcc</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'i am funcc'</span></div><div class="line"></div><div class="line">funcc = log(funcc)</div><div class="line">funcc()</div></pre></td></tr></table></figure>
<p>运行：</p>
<pre><code>call funcc()...
i am funcc
</code></pre><p>并没有问题。函数 <code>log()</code> 的用意是接收一个函数，在不改变传进来的函数的情况下，打印该函数的信息。</p>
<p><code>print &#39;call &#39; + f.__name__ + &#39;()...&#39;</code></p>
<p>这行就是打印原函数的名称，也就是装饰器的装饰物。</p>
<p>最后就是赋值给原先的函数。</p>
<p>上面那个只是没有参数的函数的装饰，对于有参数的函数，我们需要这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(*args, **kw)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'call '</span> + f.__name__ + <span class="string">'()...'</span></div><div class="line">        f(*args, **kw)</div><div class="line">    <span class="keyword">return</span> fn</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcc</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'i am funcc'</span></div><div class="line"></div><div class="line">funcc = log(funcc)</div><div class="line">funcc()</div></pre></td></tr></table></figure>
<p>这个其实就是比较标准的 Python 装饰器了，除了一个地方，就是那个 <code>return</code> 。暂且我就当成是为了规范吧，因为对于函数 <code>fn</code> 来说好像通过 <code>return</code> 来获取传进来的函数 <code>f</code> 确实是没有用的啊。</p>
<p><strong>上面那个代码，我运行之后发现，没有 return 是行不通的，所以这个 return 还是必须要加上去的，那为什么没有参数的就行的通呢</strong></p>
<p><strong>我好像突然想明白了 <a href="http://www.imooc.com/code/6065" target="_blank" rel="external">= =</a></strong></p>
<p>理解了上面的代码之后，关于装饰器的语法糖就很好理解了，每次写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">funcc = log(funcc)</div><div class="line">funcc()</div></pre></td></tr></table></figure>
<p>肯定是觉得有点烦人的，所以 Python 提供了便捷方式：</p>
<p>要被装饰的函数可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@log</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcc</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'i am funcc'</span></div></pre></td></tr></table></figure>
<p>之后使用就是直接：<code>funcc()</code> 就好了。</p>
<p>这个 @ 后面跟的就是之前自己定义的装饰器的函数名称。</p>
<h3 id="带参数的装饰器"><a href="#带参数的装饰器" class="headerlink" title="带参数的装饰器"></a>带参数的装饰器</h3><p>这里说的参数指的是装饰器上面的参数，不是装饰器接受的函数是否带参数。</p>
<p>使用带参数的装饰器就是在外面再包一层：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></div><div class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</div><div class="line">            <span class="keyword">return</span> func(*args, **kw)</div><div class="line">        <span class="keyword">return</span> wrapper</div><div class="line">    <span class="keyword">return</span> decorator</div></pre></td></tr></table></figure>
<p>那个 <code>text</code> 就是装饰器的参数，可以根据它来做增加一些业务逻辑，用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@log('参数')</span></div></pre></td></tr></table></figure>
<h3 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h3><p>相比函数装饰器，类装饰器更强大。。。</p>
<p>之后再补充吧，要炸了。</p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[路上的一小店]]></title>
      <url>http://yoursite.com/2017/05/09/%E8%BF%99%E4%B8%AA%E8%80%81%E6%9D%BF%E6%9C%89%E5%A5%97%E8%B7%AF/</url>
      <content type="html"><![CDATA[<p>这是一家开在距离地铁口200米左右的小吃店，处在算不上是一个很好的地段。对面是年代有点久远的小区，店门前有一排说不出名字，却经常见到的树，总觉得落叶很多。</p>
<a id="more"></a>
<p>说是小吃店可能大准确，吃的主要有拌面，小笼包，骨头饭之类不算小吃的东西。</p>
<p>一家人都是住在小店里面，楼上就是睡觉的地方。</p>
<p>舍友不在家吃晚饭的时候，我就在这打发晚饭。</p>
<p>去了几次之，都在换吃的，还没拿准什么好吃。不过那个有点发福，性子大大咧咧的厨子倒是有点眼熟我了。</p>
<p>“今天吃什么，拌面和小笼包吗？”</p>
<p>”恩，拌面…“，我又在看那个特别熟悉的，贴在墙正中间的大大的菜谱。</p>
<p>”我们店的小笼包都是现做的，可好吃了，里面汁很多…”</p>
<p>“恩。那就小笼包吧。”</p>
<p>我拿出手机，打开支付宝对准，桌子边缘的一个二维码。付款后打开微信，刷了朋友圈，又都是看过了，然后看了会儿知乎。</p>
<p>”你的拌面。“</p>
<p>不用两分钟，我就可以把那碗面条吃了。味道有点像是小时候河对面阿姨煮的，面条，葱花，榨菜，酱油，特简单。</p>
<p>小笼包总是上的有点晚，我就相信他是现包现蒸的了。 </p>
<p>不过有点干，对于吃饭不喝汤就不舒服的我来说，吃起来不痛快。说好的汁呢？</p>
<p>吃完了，走了。进来的时候，天还是灰色的，走的时候，已经黑了。</p>
<hr>
<p>这是一家生意不是很好的小店，可能是我来的时间问题。</p>
<p>店铺里面的摆设很寻常，刚进门是一个小厅，大门正对面就是一个大大的发着光的菜谱，两边摆放着一共 6 张桌子。</p>
<p>老板正坐在左边那排第二张餐桌前，手机 45 度斜对着自己泛着微微油光的脸。</p>
<p>他抬头看了我一眼，慢慢起身，收起了手机。</p>
<p>”今天吃什么？”，他稍稍伸展了下身体。</p>
<p>”拌面和… …小笼包吧？。“</p>
<p>他随意的往厨房望了一眼，“小笼包估计要等有点久，要不你吃煎包吧，门口那个锅里就是“，说着走向门口，拿起了锅盖，”诺，还剩几个呢。“</p>
<p>”好吧，这个还是热的吗。“我随便找个地方坐了下去，把书包放在另一个座位上。</p>
<p>”还有凉了，我给你热一下。“</p>
<p>恩，我等的就是你这句话。</p>
<p>···</p>
<p>真是日了狗了，我再也不要吃这破煎包了，皮太厚了，而且好硬，又有点焦了，最重要的是，我好渴好渴。感觉像我被坑了。</p>
<p>“老板，有汤吗？”</p>
<p>“恩，有的“，他磋了一下手，”你是要不要钱的呢，还是要钱的，不要钱的就是拿点紫菜冲一下，要钱的就是鸡蛋和紫菜汤，现煮的。“</p>
<p>”鸡蛋紫菜汤。“</p>
<p>···</p>
<p>”你的汤，诺“，他好像很骄傲，小小的笑了一下，”现做的，鸡蛋紫菜哦，只要 4 元，很便宜吧。“</p>
<p>“恩，是有点便宜。”我有点怀疑。（我不是怀疑这个是否便宜，而是怀疑他是否脑子有坑）</p>
<p>还不错，至少有的喝了。</p>
<p>走出门，天又黑了。</p>
<hr>
<p>走出地铁口，下雨了，撑起伞。有点小冷，不自主的缩了缩身体，倒吸了一小口冷气，“吸~”。</p>
<p>撑着伞，很不自在的走了几分钟，我看到了一家小店。</p>
<p><br></p>
<p><br><br><br><br><br></p>
<p><em>无聊的待续···</em></p>
]]></content>
      
        <categories>
            
            <category> 随笔 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 高级特性]]></title>
      <url>http://yoursite.com/2017/05/07/Python%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/</url>
      <content type="html"><![CDATA[<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>Python 对字符串或者是集合的操作非常的灵活且简洁。</p>
<p>集合或者字符串后面加一个 [a:b:c]</p>
<p>a 表示起始位<br>b 表示截止位<br>c 表示逢 c 个元素取一</p>
<a id="more"></a>
<p>直接看代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">listtt = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>]</div><div class="line"><span class="keyword">print</span> listtt[:<span class="number">2</span>]</div><div class="line"><span class="keyword">print</span> listtt[:]</div><div class="line"><span class="keyword">print</span> listtt[<span class="number">1</span>::]</div><div class="line"><span class="keyword">print</span> listtt[::<span class="number">2</span>]</div></pre></td></tr></table></figure>
<p>结果是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>]</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line">[<span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</div><div class="line">[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>]</div></pre></td></tr></table></figure>
<p>其中直接一个冒号就是复制原集合，别的都能好理解，很简洁。</p>
<p>对于字符串也是一个道理：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">'abcdefg'</span>[::<span class="number">2</span>]</div><div class="line"><span class="keyword">print</span> <span class="string">'abcd'</span>[:<span class="number">2</span>:]</div></pre></td></tr></table></figure>
<p>结果就不写了，和集合一样的。</p>
<p>对了，还可以倒着取值，记住倒数第一个的索引是 -1 就行，看个例子就懂了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">listtt = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>]</div><div class="line"><span class="keyword">print</span> listtt[<span class="number">-5</span>:<span class="number">-1</span>]</div></pre></td></tr></table></figure>
<p>结果是 <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</code></p>
<p><strong>注意一点</strong>，不论是正数还是倒数，起始位都要比截止位小，否则结果都是空的集合。</p>
<h3 id="列表生成"><a href="#列表生成" class="headerlink" title="列表生成"></a>列表生成</h3><p>我们知道有个 <code>rang()</code> 函数可以用来快速的生成集合。</p>
<p>现在我们需要生成一些有一定约束的集合，例如，0 到 100 的三方组成的集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>[x * x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>)]</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">27</span>, <span class="number">64</span>, <span class="number">125</span>, <span class="number">216</span>, <span class="number">343</span>, <span class="number">512</span>, <span class="number">729</span>]</div></pre></td></tr></table></figure>
<p>前面写个函数，后面加个循环就好了。</p>
<p>还可以在后面加个判断条件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>[x*x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">3</span>==<span class="number">0</span>]</div><div class="line">[<span class="number">0</span>, <span class="number">27</span>, <span class="number">216</span>, <span class="number">729</span>]</div></pre></td></tr></table></figure>
<p>还有种，多重循环，两两交互的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">python</div><div class="line">&gt;&gt;&gt; [x * y for x in [1,2,3] for y in [4,5,6]]</div><div class="line">[4, 5, 6, 8, 10, 12, 12, 15, 18]</div></pre></td></tr></table></figure>
<p>代码都非常的简洁，但是格式千万不能错！</p>
<h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><p>generator ， 这不就是 <a href="http://es6.ruanyifeng.com/#docs/generator" target="_blank" rel="external">ES 6</a> 中提供的一种异步编程解决方案么。果然语言思想都是互通的，相互学习的啊。</p>
<p>创建一个 generator 的一种简单方式就是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g</div><div class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x107c27eb0</span>&gt;</div></pre></td></tr></table></figure>
<p>和列表生成有所不同的就是，它是小括号。</p>
<p>原理结构方面和 JS 的差不多。</p>
<p>都是可以通过 <code>next()</code> 方法一个接一个的迭代，或者是通过 <code>for</code> 循环直接遍历。</p>
<p>其中 <code>yield</code> 关键字也是和 JS 中的一样（类似于 <code>return</code>，但是会记录上次的循环层数）。</p>
<p>有点神奇 = = 。</p>
<hr>
<p>慢慢的感受到了 Python 的简洁和强大。</p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[关于 Drawable（三）]]></title>
      <url>http://yoursite.com/2017/05/05/%E5%85%B3%E4%BA%8E-Drawable%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      <content type="html"><![CDATA[<h3 id="selector"><a href="#selector" class="headerlink" title="selector"></a>selector</h3><p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-05 上午8.53.41.png" alt="屏幕快照 2017-05-05 上午8.53.41"></p>
<a id="more"></a>
<p><strong>xmlns:anroid</strong><br>这种属性就不提了，定义命名空间的。</p>
<p><strong>autoMirrored</strong><br>之前说过了，镜像翻转。</p>
<p><strong>constanSize</strong><br>默认是 false ，指的是内部 item 的大小根据状态变化， true 的话就是一直都是最大尺寸。</p>
<p><strong>dither</strong><br>之前说过了，位图抖动，适应不同分辨率的。</p>
<p><strong>enterFadeDuration</strong> 和 <strong>exitFadaDuration</strong> 后面跟渐变的时间。（感觉效果不是很好，会闪一下）</p>
<p><strong>variablePadding</strong><br>默认是 false，有点像是前面的 <em>constanSize</em> ，当设置为 true 的时候需要为每一个 item 设置 layout 。</p>
<p><strong>visible</strong><br>后面跟布尔值，讲道理应该就是控制是否可见的。但是设置了 false 和 true 效果都一样。</p>
<p>一般来说，selector 自身的属性基本都是用不到的，更应该关心的是 item 的状态。</p>
<h4 id="item"><a href="#item" class="headerlink" title="item"></a>item</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-05 上午9.28.13.png" alt="屏幕快照 2017-05-05 上午9.28.13"></p>
<p>多达 17 种 state ， 默认状态下都是 false。</p>
<p>关于状态的匹配，有点像是 <code>if...else</code> 。由于一个场景中可能有多个状态与之匹配，但是所显示的 item 却是第一个匹配到的 item （不一定是最匹配的），因为当状态改变的时候，item 是从上到下遍历的，先到先得。</p>
<p>所以！我们应该将缺省状态放最后。</p>
<p><strong>state_focused</strong><br>具有输入焦点。（例如 EditView 光标闪烁，而像 Button 这种，点击也没用） </p>
<p><strong>state_press</strong><br>按下。</p>
<p><strong>state_accelerated</strong><br>关于这个我在<a href="https://developer.android.google.cn/reference/android/graphics/drawable/StateListDrawable.html" target="_blank" rel="external">官方 API</a> 里面并没有找到。有人说是硬件加速时候的效果。</p>
<p>但是我将其设置为 true 之后，发现无论什么情况下，都是处于 true 。开了虚拟机，状态也是 true。</p>
<p><strong>state_activated</strong><br>set when a view or its parent has been “activated” meaning the user has currently marked it as being of interest。<br>可以想成是地图界面中，那个当前位置的标记。（个人理解）</p>
<p><strong>state_active</strong><br> set when a view or drawable is considered “active” by its host。<br>可以想成是机顶盒或者带键盘手机上用方向键激活选项。（个人理解）</p>
<p><strong>state_checkable</strong><br>控件是否可选中。</p>
<p><strong>state_checked</strong><br>控件是否已经选中。</p>
<p><strong>state_drag_can_accept</strong><br>该控件有能力接受哟景湖拖拽其他的控件。（这个在平板端可能比较常见，拖拽上传文件之类的）</p>
<p><strong>state_drag_hovered</strong><br>拖拽的过程中，有控件正位于自身控件的上方。</p>
<p><strong>state_enabled</strong><br>正常的状态下。</p>
<p><strong>state_first</strong><br><strong>state_middle</strong><br><strong>state_last</strong><br>这三个也是从没用过。</p>
<p>它们用作范围有局限性，必须是 in an ordered set 。</p>
<p>可以参考<a href="http://stackoverflow.com/questions/14441160/support-for-androidstate-first-true-in-jake-whartons-viewpagerindicator" target="_blank" rel="external">这里</a>。</p>
<p><strong>state_hovered</strong><br>当有指针悬浮在该控件上的时候。</p>
<p><strong>state_seleted</strong><br>很常用，被选中的状态。</p>
<p><strong>state_single</strong><br>只有一个元素显示图片。</p>
<p><strong>state_window_focused</strong><br>这个比较好理解，当前应用在例如对话框或者通知栏下拉的时候会失去 focused 。</p>
<p>关于状态的使用，由于不是匹配最佳选项，更多的时候，我们应该设置多几种，更加准确。</p>
<p>贴一段 <a href="https://github.com/JakeWharton" target="_blank" rel="external">JakeWharton</a> 的 <a href="https://github.com/JakeWharton/ViewPagerIndicator" target="_blank" rel="external">ViewPagerIndicator</a> 里面的部分 xml 代码:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Non focused states --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"false"</span> <span class="attr">android:state_selected</span>=<span class="string">"false"</span> <span class="attr">android:state_pressed</span>=<span class="string">"false"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_unselected_holo"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"false"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span>  <span class="attr">android:state_pressed</span>=<span class="string">"false"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_selected_holo"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Focused states --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"true"</span> <span class="attr">android:state_selected</span>=<span class="string">"false"</span> <span class="attr">android:state_pressed</span>=<span class="string">"false"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_unselected_focused_holo"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"true"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span>  <span class="attr">android:state_pressed</span>=<span class="string">"false"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_selected_focused_holo"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Pressed --&gt;</span></div><div class="line">    <span class="comment">&lt;!--    Non focused states --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"false"</span> <span class="attr">android:state_selected</span>=<span class="string">"false"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_unselected_pressed_holo"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"false"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span>  <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_selected_pressed_holo"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--    Focused states --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"true"</span> <span class="attr">android:state_selected</span>=<span class="string">"false"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_unselected_pressed_holo"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">"true"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span>  <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/vpi__tab_selected_pressed_holo"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div></pre></td></tr></table></figure>
<p>关于 selector 的创建还有个插件 SelectorChapek ，它的使用比较简单，<a href="http://blog.csdn.net/yangshangwei/article/details/51147766" target="_blank" rel="external">网上的教程</a>也不少，不过其实这类型的插件都有点鸡肋。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 函数]]></title>
      <url>http://yoursite.com/2017/05/04/Python-%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<h3 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h3><p>Python 函数的一些用法可以直接通过 help(函数名) 查看，例如</p>
<p><code>&gt;&gt;&gt; help(abs)</code></p>
<pre><code>abs(...)
      abs(number) -&gt; number
      Return the absolute value of the argument.
</code></pre><a id="more"></a>
<p>通过 q 键退出查看</p>
<p>更多 API 可以直接上<a href="https://docs.python.org/2/library/functions.html#map" target="_blank" rel="external">官网</a>查看。</p>
<h4 id="数学相关"><a href="#数学相关" class="headerlink" title="数学相关"></a>数学相关</h4><p><code>abs()</code> 绝对值</p>
<p><code>max()</code>、<code>min()</code> 最大值和最小值 参数可以传集合，如果是 <code>dict</code> 就按 <code>key</code> 的值排序，输出的也仅是 <code>key</code> 。</p>
<p><code>pow()</code> 乘方</p>
<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><p><code>int()</code></p>
<p><code>long()</code></p>
<p><code>float()</code></p>
<p> <code>str()</code></p>
<p> <code>list()</code></p>
<p> …</p>
<h4 id="字符串相关"><a href="#字符串相关" class="headerlink" title="字符串相关"></a>字符串相关</h4><p><code>split()</code> 切割</p>
<p><code>capitalize()</code> 首字母大写</p>
<p>···  其实和别的语言都差不多</p>
<h4 id="序列处理"><a href="#序列处理" class="headerlink" title="序列处理"></a>序列处理</h4><p>这个是否常用不是很清楚，但是比较有意思，许多方法和 JavaScript 中的方法大同小异，不过感觉这个写起来更加的简洁。</p>
<p><strong>filter() 过滤序列</strong></p>
<p><code>filter(function, iterable)</code> </p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>filter(<span class="keyword">lambda</span> x:x%<span class="number">2</span>==<span class="number">0</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</div><div class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p>直接过滤出偶数。</p>
<p><strong>zip() 并行遍历</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>name = [<span class="string">'z'</span>,<span class="string">'l'</span>,<span class="string">'f'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>age = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hehe = [<span class="string">'q'</span>,<span class="string">'w'</span>,<span class="string">'r'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>zip(name,age,hehe)</div><div class="line">[(<span class="string">'z'</span>, <span class="number">1</span>, <span class="string">'q'</span>), (<span class="string">'l'</span>, <span class="number">2</span>, <span class="string">'w'</span>), (<span class="string">'f'</span>, <span class="number">3</span>, <span class="string">'r'</span>)]</div></pre></td></tr></table></figure>
<p>当集合长度不一样的时候，取最短的。如果是 <code>dict</code> 就只用 <code>key</code> 。</p>
<p><strong>map() 并行遍历</strong></p>
<p>有点像是上面两个函数的结合。</p>
<p>接收至少两个参数，第一个是函数，后面是集合。<strong>该函数是针对集合的单个元素。</strong>第一个函数可以直接是 None ，其效果就和 <code>zip()</code> 相同。</p>
<p><strong>reduce() 归并</strong></p>
<p>和上一个方法类似，但是它的<strong>函数是按顺序叠加生效</strong>的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt = range(<span class="number">101</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x,y:x+y,listtt)</div><div class="line"><span class="number">5050</span></div></pre></td></tr></table></figure>
<p>方法中必须是两个参数，否则会报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x,y,z:x+y+z,listtt)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: &lt;<span class="keyword">lambda</span>&gt;() takes exactly <span class="number">3</span> arguments (<span class="number">2</span> given)</div></pre></td></tr></table></figure>
<p>（上面的 stind 是 standard input 的缩写）</p>
<h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><p>Python 定义函数用 <code>def</code> 语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line"># -*- coding: utf-8 -*-</div><div class="line">def func(x):</div><div class="line">    if x&gt;17:</div><div class="line">        print(&apos;成年了&apos;)</div><div class="line">    else:</div><div class="line">        print(&apos;小屁孩&apos;)</div><div class="line">func(19)</div></pre></td></tr></table></figure>
<p>注意冒号和缩进就行。</p>
<h4 id="空函数"><a href="#空函数" class="headerlink" title="空函数"></a>空函数</h4><p>一个什么也不想做的空函数，可以用 <code>pass</code> 函数。</p>
<h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><p>一个或者多个都行，其实多个也是一个（元组）。</p>
<h4 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h4><p>很酷！</p>
<h5 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h5><p>Python 是不支持函数的重载的。</p>
<p>一开始没有想明白，然后我搜了这个<a href="https://www.zhihu.com/question/20053359" target="_blank" rel="external">问题</a>之后豁然开朗。</p>
<p>首先对于函数重载的重要性不用多说，支持不同类型和不同个数的参数。</p>
<p>但是 Python 函数本身就对参数类型没有限制，而对于不同个数，Pyhton 的处理很妙。</p>
<p>看段代码应该就能够理解了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcc</span><span class="params">(x,y=<span class="number">6</span>)</span>:</span></div><div class="line">    <span class="keyword">return</span> x*y;</div><div class="line"><span class="keyword">print</span> funcc(<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p>结果是 30 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcc</span><span class="params">(x,y=<span class="number">6</span>)</span>:</span></div><div class="line">    <span class="keyword">return</span> x*y;</div><div class="line"><span class="keyword">print</span> funcc(<span class="number">5</span>,<span class="number">4</span>)</div></pre></td></tr></table></figure>
<p>结果是 20 。</p>
<p>给函数的参数设置了缺省值，不同的参数个数同一个函数执行，从而也达到了类似于重载的效果</p>
<h5 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h5><p>传入的参数个数不确定，（其实 Java 也是有的）,其实就是将传入的参数封装成一个 tuple。</p>
<p>具体写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">addd</span><span class="params">(numbers)</span>:</span></div><div class="line">    sum = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</div><div class="line">        sum = sum + n * n</div><div class="line">    <span class="keyword">return</span> sum</div><div class="line"><span class="keyword">print</span> addd([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</div></pre></td></tr></table></figure>
<p>这个括号一定要加，否则会报错 <code>TypeError: addd() takes exactly 1 argument (5 given)</code>。</p>
<p>如果不想加这个括号也可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">addd</span><span class="params">(*numbers)</span>:</span></div><div class="line">    sum = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</div><div class="line">        sum = sum + n * n</div><div class="line">    <span class="keyword">return</span> sum</div><div class="line"><span class="keyword">print</span> addd(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p>在定义函数参数的时候加上一个星号，如果加了星号还加括号也会报错的 <code>TypeError: can&#39;t multiply sequence by non-int of type &#39;list&#39;</code>。</p>
<p>如果是已经存在了一个集合，想直接传入集合：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">addd</span><span class="params">(*numbers)</span>:</span></div><div class="line">    sum = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</div><div class="line">        sum = sum + n * n</div><div class="line">    <span class="keyword">return</span> sum</div><div class="line">listt = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line"><span class="keyword">print</span> addd(*listt)</div></pre></td></tr></table></figure>
<p>这里定义中的参数前的星号和，传入的参数的星号缺一不可。</p>
<h5 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h5><p>说是关键字参数好像也不是很准确。</p>
<p>像是另一种可变参数的体现。</p>
<p>它是将传入的参数封装成 dict 。</p>
<p>举个例子，当我们注册一个网站的会员时，要填写一些基本信息，通常是带星号为必须要填写的，其他的就是可选的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">infoo</span><span class="params">(name,sex,**other)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'name:'</span>,name,<span class="string">'sex:'</span>,sex,<span class="string">'other:'</span>,other</div><div class="line">infoo(<span class="string">'zlf'</span>, <span class="string">'male'</span>,city=<span class="string">'hangz'</span>)</div></pre></td></tr></table></figure>
<p>运行结果：<br><code>name: zlf sex: male other: {&#39;city&#39;: &#39;hangz&#39;}</code></p>
<p>另外，一般 Python 的习惯写法是：</p>
<p>可变参数用 *agrs 表示</p>
<p>关键字参数用 **kw 表示 </p>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>没什么特别的。</p>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p><strong>sorted()</strong>  又是和 JS 差不多。</p>
<p>除了可以正常的使用，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt = [<span class="number">32</span>,<span class="number">42</span>,<span class="number">32</span>,<span class="number">23</span>,<span class="number">21</span>,<span class="number">13</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(listtt)</div><div class="line">[<span class="number">13</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">42</span>]</div></pre></td></tr></table></figure>
<p>还可以加个条件再排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt = [<span class="number">-2</span>,<span class="number">3</span>,<span class="number">-1</span>,<span class="number">32</span>,<span class="number">-23</span>,<span class="number">-54</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(listtt,abs)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: abs() takes exactly one argument (<span class="number">2</span> given)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(listtt,key=abs)</div><div class="line">[<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">3</span>, <span class="number">-23</span>, <span class="number">32</span>, <span class="number">-54</span>]</div></pre></td></tr></table></figure>
<p>来个稍微复杂点的，给一个字典，根据 key 或者 value 来排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">L = [(<span class="string">'Bob'</span>, <span class="number">75</span>), (<span class="string">'Adam'</span>, <span class="number">92</span>), (<span class="string">'Bart'</span>, <span class="number">66</span>), (<span class="string">'Lisa'</span>, <span class="number">88</span>)]</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">by_name</span><span class="params">(t)</span>:</span></div><div class="line">    <span class="keyword">return</span> t[<span class="number">0</span>]</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">by_score</span><span class="params">(t)</span>:</span></div><div class="line">    <span class="keyword">return</span> t[<span class="number">1</span>]</div><div class="line"><span class="keyword">print</span> sorted(L,key = by_name)</div><div class="line"><span class="keyword">print</span> sorted(L,key = by_score)</div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[(&apos;Adam&apos;, 92), (&apos;Bart&apos;, 66), (&apos;Bob&apos;, 75), (&apos;Lisa&apos;, 88)]</div><div class="line">[(&apos;Bart&apos;, 66), (&apos;Bob&apos;, 75), (&apos;Lisa&apos;, 88), (&apos;Adam&apos;, 92)]</div></pre></td></tr></table></figure>
<h3 id="函数作为返回值"><a href="#函数作为返回值" class="headerlink" title="函数作为返回值"></a>函数作为返回值</h3><p>关于这种用法，在 JavaScript 中也是经常用到。</p>
<p>这个时候就需要，也必须先理解“闭包”这个概念。</p>
<p>这个概念我找了很多文章，但是都觉得非常的抽象以及概念化。因为之前接触最多的是 Java ，而 Java 中函数和变量完全是两个不同的东西，所以理解起来不是很顺利。</p>
<p>直到看到阮一峰老师的<a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="external">这篇</a>介绍，举了很多例子，觉得易于理解。</p>
<p>我简单总结了一下。</p>
<p>就是通过 return 的方式将内部函数当成是变量返回给外部函数，外部函数通过这个桥梁可以读取函数内部的变量。</p>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>举个例子：</p>
<p><code>lambda x: x*x</code></p>
<p>就相当于</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">return</span> x*x;</div></pre></td></tr></table></figure>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p><code>functools</code> 模块中的一个功能，Partial function。</p>
<p>例如函数 <code>int()</code> 可以将字符串变成整数，也可以做进制的转化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'123'</span>,base=<span class="number">8</span>)</div><div class="line"><span class="number">83</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'10101010010101'</span>,base=<span class="number">2</span>)</div><div class="line"><span class="number">10901</span></div></pre></td></tr></table></figure>
<p>是将当前的数字转成 10 进制。</p>
<p>当我们需要重复使用转化成 2 进制这个方法的时候，就需要不停的多写一个重复的参数：</p>
<p><code>int(x,base=2)</code></p>
<p>当然首先想到的就是定义一个带默认参数的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">int2</span><span class="params">(x,base =<span class="number">2</span>)</span>:</span></div><div class="line">    <span class="keyword">return</span> int(x,base)</div></pre></td></tr></table></figure>
<p>这样封装之后就变得好用了。</p>
<p>我们说到的偏函数就是用来更加方便的创建这种类型的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> functools</div><div class="line">int2 = functools.partial(int,base = <span class="number">2</span>)</div><div class="line"><span class="keyword">print</span> int2(<span class="string">'101'</span>)</div></pre></td></tr></table></figure>
<p>结果当然是输出 5 。</p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python 基础]]></title>
      <url>http://yoursite.com/2017/05/04/py%E5%9F%BA%E7%A1%80/</url>
      <content type="html"><![CDATA[<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>注释用 <code>#</code> 开头表示。</p>
<p>语法采用缩进的方式，虽然没有规定是几个空格，但是一般都是 4 个。 </p>
<p>大小写敏感。</p>
<p>通常我们在开头这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>第一行注释是为了告诉 Linux/OS X 系统，这是一个 Python 可执行程序， Windows 系统会忽略这个注释。</p>
<p>由于 Python 源文件也是文本文件，当我们的代码中含有中文的时候（包括注释），第二行注释告诉 Py 解释器，读取源码的时候用指定编码读取。</p>
<h3 id="数据类型和变量"><a href="#数据类型和变量" class="headerlink" title="数据类型和变量"></a>数据类型和变量</h3><h4 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h4><p>可以处理<strong>任意大小</strong>的整数。</p>
<p>但是，</p>
<p><code>int</code> 类型的有最大值 （在我的电脑上是）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(sys.maxint)</div><div class="line"><span class="number">9223372036854775807</span></div></pre></td></tr></table></figure>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><p>没什么特别的。</p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>以 ‘’ 或 “” 括起来的任意文本。</p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p><code>True</code> 和 <code>False</code> ，可以用 <code>or</code> 、<code>and</code> 、<code>not</code> 进行运算。 （和一般语言一样的）</p>
<h4 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h4><p><code>None</code> 代表空值，不是 0 ，因为 0 是有意义的。</p>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>没什么特别的。</p>
<h4 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h4><p>没什么特别的。</p>
<h3 id="字符串和编码"><a href="#字符串和编码" class="headerlink" title="字符串和编码"></a>字符串和编码</h3><h4 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h4><p>py 比 Unicode 标准发布还早，所以一开始，字母在 py 中是用 ASCII 编码的，提供了 <code>ord()</code> 和 <code>chr()</code> 两个转换的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'A'</span>)</div><div class="line"><span class="number">65</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">65</span>)</div><div class="line"><span class="string">'A'</span></div></pre></td></tr></table></figure>
<p>后来又增加了对 Unicode 的支持</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">u'\u4f60\u597d'</span></div><div class="line">你好</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'你好'</span></div><div class="line"><span class="string">u'\u4f60\u597d'</span></div></pre></td></tr></table></figure>
<p>当然，字母也是可以使用这个方式转换，不多说。</p>
<h4 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h4><p>与 C 一样，用 % 实现的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello %s'</span> % <span class="string">'Zhanglf'</span></div><div class="line"><span class="string">'Hello Zhanglf'</span></div></pre></td></tr></table></figure>
<p>整数 d ，浮点数 f ，字符串 s ，十六进制整数 x 。</p>
<p>多个一起格式化的时候，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello %s,%d'</span> % (<span class="string">'Zhanglf'</span>,<span class="number">886</span>)</div><div class="line"><span class="string">'Hello Zhanglf,886'</span></div></pre></td></tr></table></figure>
<p>括号起来，逗号隔开。</p>
<h3 id="循环和判断"><a href="#循环和判断" class="headerlink" title="循环和判断"></a>循环和判断</h3><h4 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h4><p>有两种循环，一种是 <code>while</code> 循环</p>
<p>很简单，<strong>注意</strong>缩进和冒号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">n = <span class="number">0</span></div><div class="line">s = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> n &lt; <span class="number">100</span>:</div><div class="line">    s += n</div><div class="line">    n += <span class="number">1</span></div><div class="line"><span class="keyword">print</span> (s)</div></pre></td></tr></table></figure>
<p>py 不支持 ++ 运算符？ 我试了不行。</p>
<p>还有一种是 <code>for in</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">listttt = [<span class="string">'lll'</span>,<span class="string">'iii'</span>,<span class="string">'sss'</span>,<span class="string">'ttt'</span>];</div><div class="line"><span class="keyword">for</span> list <span class="keyword">in</span> listttt:</div><div class="line">    <span class="keyword">print</span> list</div></pre></td></tr></table></figure>
<p>像是 Java 中的增强 <code>for</code> 循环。</p>
<p>另外有一个 <code>range()</code> 函数，可以生成一个整数序列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">6</span>)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<h4 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h4><p>逻辑和一般语言都一样。</p>
<p>条件判断，多重判断的时候，用 <code>elif</code> 而不是 <code>else if</code>，<strong>注意</strong>缩进和冒号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">age = <span class="number">20</span></div><div class="line"><span class="keyword">if</span> age &gt;= <span class="number">6</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'teenager'</span></div><div class="line"><span class="keyword">elif</span> age &gt;= <span class="number">18</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'adult'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'kid'</span></div></pre></td></tr></table></figure>
<h3 id="list-和-tuple"><a href="#list-和-tuple" class="headerlink" title="list 和 tuple"></a>list 和 tuple</h3><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>中括号表示。</p>
<p>list 和 Java 的集合没差，有序，可重复，可变。但是它可以存不同类型的元素，（其实 Java 的集合也行）甚至是别的 list。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt = [<span class="number">33</span>,<span class="number">44</span>,<span class="string">'zlf'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt</div><div class="line">[<span class="number">33</span>, <span class="number">44</span>, <span class="string">'zlf'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(listtt)</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>listtt[<span class="number">1</span>]</div><div class="line"><span class="number">44</span></div></pre></td></tr></table></figure>
<p>获取长度 <code>len()</code><br>添加元素到末尾 <code>append()</code><br>添加元素到指定位置 <code>insert(索引，元素)</code><br>删除末尾元素 <code>pop()</code><br>删除指定位置的元素 <code>pop(索引)</code><br>替换元素，直接通过索引赋值</p>
<p>最后，如果，list 里面嵌套了 list，就变成多维集合了。</p>
<h4 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h4><p>小括号表示。</p>
<p>元组: 有序，不可变。安全。</p>
<p>tuple 不可变。但是如果里面有元素是 list，那么其中的 list 是可以改变的。</p>
<p>有一个要<strong>注意的地方</strong>，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tupleee = (<span class="number">1</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tupleee</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tupleee = (<span class="number">1</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tupleee</div><div class="line">(<span class="number">1</span>,)</div></pre></td></tr></table></figure>
<p>因为（1） 中的括号就是普通的数学括号，所以 py 官方规定如果是那种情况要初始化，记得加个逗号。</p>
<h3 id="dict-和-set"><a href="#dict-和-set" class="headerlink" title="dict 和 set"></a>dict 和 set</h3><h4 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h4><p>花（大）括号表示。</p>
<p>dict 就是 iOS 中常说的字典，全称 dictionary ，Java 中的 Map，是以键值对存储的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line">dicttt = &#123;<span class="string">"zlf"</span>:<span class="number">24</span>,<span class="string">"hei"</span>:<span class="number">23</span>,<span class="string">"ha"</span>:<span class="number">24</span>&#125;</div><div class="line"><span class="comment"># 通过 key 找 value</span></div><div class="line"><span class="keyword">print</span> dicttt[<span class="string">'zlf'</span>]</div><div class="line"><span class="comment"># 或者是</span></div><div class="line"><span class="keyword">print</span> dicttt.get(<span class="string">'zlf'</span>)</div><div class="line"><span class="comment"># 最好是使用,</span></div><div class="line"><span class="keyword">print</span> dicttt.get(<span class="string">'zlf'</span>,<span class="number">-1</span>)</div></pre></td></tr></table></figure>
<p>不能通过 value 找 key，因为 dict 是无序不重复的，也就是说 key 值是唯一的，所以</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dicttt = &#123;<span class="string">"zlf"</span>:<span class="number">24</span>,<span class="string">"hei"</span>:<span class="number">23</span>,<span class="string">"ha"</span>:<span class="number">24</span>,<span class="string">"ha"</span>:<span class="number">24</span>,<span class="string">"zlf"</span>:<span class="number">24</span>,<span class="string">"hei"</span>:<span class="number">23</span>,<span class="string">"ha"</span>:<span class="number">24</span>,<span class="string">"ha"</span>:<span class="number">24</span>&#125;</div><div class="line"><span class="keyword">print</span> dicttt</div></pre></td></tr></table></figure>
<p>输出的也是</p>
<p><code>{&#39;zlf&#39;: 24, &#39;ha&#39;: 24, &#39;hei&#39;: 23}</code></p>
<p>与 Map 一样，查找 value 用的是 Hash 算法，时间复杂度是常数，典型的用空间换时间。</p>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>比较特殊的单列集合，和 Java 的 Set 一样，无序，不可重复。</p>
<p>初始化有一点特殊：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>settt = set([<span class="string">'s'</span>,<span class="string">'e'</span>,<span class="string">'t'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>settt</div><div class="line">set([<span class="string">'s'</span>, <span class="string">'e'</span>, <span class="string">'t'</span>])</div></pre></td></tr></table></figure>
<p>其中的中括号并不是代表存入的是 list ！ 添加相同的元素会被自动过滤。</p>
<p>和 dict 一样不可存入变量当做是 key，因为为了保证 key 值是唯一的，而变量可能导致多个 key 值相同。</p>
]]></content>
      
        <categories>
            
            <category> python </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[关于 Drawable（二）]]></title>
      <url>http://yoursite.com/2017/05/04/%E5%85%B3%E4%BA%8E-Drawable%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      <content type="html"><![CDATA[<h3 id="layer-list"><a href="#layer-list" class="headerlink" title="layer-list"></a>layer-list</h3><p>类似于 FrameLayout，将列表中的 item 叠加在一块，最后的 item 显示在最前面。</p>
<a id="more"></a>
<h4 id="item"><a href="#item" class="headerlink" title="item"></a>item</h4><p>layer-list 子项,之后会细说，相当于是一个自定义性很强的图层，可以接受 bitmap 。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/52eb2279jw1f2rx409pcnj2044048mx5.jpg" alt="52eb2279jw1f2rx409pcnj2044048mx5"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">bitmap</span></span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/huaji"</span>&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">bitmap</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:left</span>=<span class="string">"280dp"</span></div><div class="line">        <span class="attr">android:top</span>=<span class="string">"280dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">bitmap</span></span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/huaji"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="name">bitmap</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:right</span>=<span class="string">"280dp"</span></div><div class="line">        <span class="attr">android:top</span>=<span class="string">"280dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">bitmap</span></span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/huaji"</span>&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">bitmap</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure>
<p>item 可以通过 top 、 right 、bottom 、 left 来调整位置。</p>
<p>效果是这样的:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-04 上午11.15.20.png" alt="屏幕快照 2017-05-04 上午11.15.20"></p>
<p>底层那张怎么为什么那么大？</p>
<p>我是这样理解的，一开始的时候，有一个边框，大小就是第一个 item 的默认大小，当我们加入第二个 item 时，容器就被扩充了，所以之前的 item 跟着变大了，可以参考下图</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/huaji.jpg" alt="huaji"></p>
<p>但是当我们给第一个 item 设置一个 <em>gravity</em> 属性的时候，比如 <code>android:gravity=&quot;center&quot;</code>,<br>就会变成这样</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-04 上午11.33.28.png" alt="屏幕快照 2017-05-04 上午11.33.28"></p>
<p>根据上面的框图，这也不难理解，由于有了方向，所以 item 1 就没有再占满边框，而是变成了默认大小。</p>
<p>最后有一个比较有意思地方，当给 item 都设置 tileMode 属性的时候，结果可能和你想的不一样哦。</p>
<p>–</p>
<p>最后附上滑稽的 png 资源</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/huaji.png" alt="huaji"></p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[关于 Drawable（一）]]></title>
      <url>http://yoursite.com/2017/05/03/%E5%85%B3%E4%BA%8E-Drawable%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>这里的 Drawable 指的是 Android 项目中 res/drawable 下的资源。</p>
<p>例如: </p>
<p>.9 图、 .png 、 .jpg 等位图文件， xml 格式的可绘制对象等等。</p>
<a id="more"></a>
<h3 id="位图文件"><a href="#位图文件" class="headerlink" title="位图文件"></a>位图文件</h3><p>关于位图文件，Google 官方首先推荐使用的是 .png ，其次是 .jpg ，以及不建议使用的 .gif 文件。</p>
<pre><code>Tip: 当出现如下错误的时候，

Error:Execution failed for task &apos;:app:mergeDebugResources&apos;.
Error: java.util.concurrent.ExecutionException: com.android.ide.common.process.ProcessException: `

可能是你将 .jpg 格式图片的后缀改成了 .png 放到 drawable 目录下了。
</code></pre><p>另外，drawable 中的文件名称格式有一定的<strong>要求</strong>：</p>
<pre><code>File-based resource names must contain only lowercase a-z, 0-9, or underscore
</code></pre><p>位图文件的<strong>使用</strong>很简单:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"50dp"</span></div><div class="line">      <span class="attr">android:src</span>=<span class="string">"@drawable/bitmap_test"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"50dp"</span>/&gt;</div></pre></td></tr></table></figure>
<p>或者用 <code>background</code> 。</p>
<p>其中 <code>src</code> 和 <code>background</code> 的主要区别是，前者不会根据 <code>ImageView</code> 控件的大小拉伸原图。</p>
<p><code>src</code> 的样式可以通过 <code>scaleType</code> 设置，而 <code>alpha</code> 属性可以作用于 <code>background</code> 。两者可以同时作用，<code>src</code> 在前，<code>background</code> 在后。</p>
<p>关于 <em>scaleType</em> 的不同类型，可以用一张图来说明:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午5.28.55.png" alt="屏幕快照 2017-05-03 下午5.28.55"></p>
<p>其中 <code>centerCrop</code> 和 <code>center</code> 用的最多。</p>
<h3 id="XML-中-的位图"><a href="#XML-中-的位图" class="headerlink" title="XML 中 的位图"></a>XML 中 的位图</h3><p>有以下这些属性:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">bitmap</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/huaji"</span></div><div class="line">        <span class="attr">android:alpha</span>=<span class="string">"100"</span></div><div class="line">        <span class="attr">android:antialias</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:autoMirrored</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:dither</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:filter</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"bottom"</span></div><div class="line">        <span class="attr">android:tileMode</span>=<span class="string">"repeat"</span></div><div class="line">        <span class="attr">android:mipMap</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:tileModeX</span>=<span class="string">"mirror"</span></div><div class="line">        <span class="attr">android:tileModeY</span>=<span class="string">"mirror"</span></div><div class="line">        <span class="attr">android:tintMode</span>=<span class="string">"src_over"</span></div><div class="line">        <span class="attr">android:tint</span>=<span class="string">"null"</span></div><div class="line">    /&gt;</div></pre></td></tr></table></figure>
<ul>
<li><code>src</code> 是一定要求有的，是图片资源地址。</li>
</ul>
<ul>
<li><p><code>alpha</code> 图片的透明度。</p>
</li>
<li><p><code>antialias</code> 是否抗锯齿。</p>
</li>
<li><p><code>autoMirrored</code> 否是镜像反转，当布局是从右往左的时候才有用。</p>
</li>
<li><p><code>dither</code> 是否使用位图抖动，当图片像素高于设备配置的时候会用到，它能让图片的显示更加平滑，具体可以点<a href="https://en.wikipedia.org/wiki/Dither" target="_blank" rel="external">这里</a>。</p>
</li>
</ul>
<p>下面的几张图片中， 1 是原图，2 和 3 都是用的同一个<a href="https://en.wikipedia.org/wiki/Web_colors#Web-safe_colors" target="_blank" rel="external">调色板</a>，但是 3 用了<a href="https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering" target="_blank" rel="external">位图抖动算法</a>，看上去更加的平滑。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.06.48.png" alt="屏幕快照 2017-05-03 下午8.06.48"></p>
<ul>
<li><p><code>filter</code> 当图片进行了压缩或者拉伸时，使用该属性可以使得图片的外观更加的平滑。</p>
</li>
<li><p><code>gravity</code> 这个很理解，和普通的控件中也有，该属性对应的值有点 <code>left</code>、<code>top</code> 、<code>right</code> 之类的，用来设置图片在控件中的位置或者说是对齐方式。</p>
</li>
<li><p><code>tileMode</code> tile 是瓷砖，瓦片的意思。该属性用来设置图片的平铺方式，有四种不同的值：</p>
<ul>
<li><p><code>disable</code> 默认值，无平铺方式</p>
</li>
<li><p><code>repeat</code> 重复的铺满，如下图</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午4.37.48.png" alt="屏幕快照 2017-05-03 下午4.37.48"></p>
</li>
<li><p><code>mirror</code> 镜像的方式，如下图</p>
</li>
</ul>
</li>
</ul>
<p>   <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午4.37.57.png" alt="屏幕快照 2017-05-03 下午4.37.57"></p>
<ul>
<li><code>clamp</code> 效果如下图，其实拉伸的是图片最边缘的那个像素点上的值。</li>
</ul>
<pre><code>![屏幕快照 2017-05-03 下午4.38.09](http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午4.38.09.png)
</code></pre><ul>
<li><p><code>mipMap</code> 这个属性有点邪乎，可以参考<a href="https://developer.android.google.cn/reference/android/graphics/Bitmap.html#setHasMipMap(boolean" target="_blank" rel="external">里面</a>)，大致意思应该是，当你要绘制的 bitmap 小于 50% 原图的时候，开启该属性可以提供更高质量的画质。（但是使用该属性，需要额外的内存开销，并且是 Android 4.2 及以上才能用，而且！用了不一定真的有用哦，它只是给渲染器的一个建议）</p>
</li>
<li><p><code>tileMoteX</code> 和<code>tileMoteY</code> 都是 Android 5.0 及之后才有的属性，和 <code>tileMote</code> 的性质一样，只是多了方向上的区别。</p>
</li>
<li><p><code>tintMode</code> 也是 Android 5.0 及之后才有的，这个属性是配合 <code>tint</code> 来一起使用的。</p>
<p>  <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.37.25.png" alt="屏幕快照 2017-05-03 下午8.37.25"></p>
</li>
</ul>
<p>我们来玩一把，在 <code>android:tint=&quot;#0f0&quot;</code> 的条件下，改变 <code>tintMode</code>：</p>
<ul>
<li><p>当值为 <code>src_over</code> 或者 <code>src_in</code> 或者 <code>src_atop</code> 的时候得到的图形都一样(这里一开我也是用的滑稽的图片，但是由于滑稽图是 .jpg 格式的，于是在这三种模式下就会变成全绿，所以用了 .png 的图片演示)</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.59.59.png" alt="屏幕快照 2017-05-03 下午8.59.59"></p>
</li>
<li><p>当值为 <code>add</code> 的时候</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.46.42.png" alt="屏幕快照 2017-05-03 下午8.46.42"></p>
</li>
</ul>
<ul>
<li><p>当值为 <code>multiply</code> 的时候</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.47.03.png" alt="屏幕快照 2017-05-03 下午8.47.03"></p>
</li>
</ul>
<ul>
<li><p>当值为 <code>screen</code> 的时候</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-03 下午8.47.35.png" alt="屏幕快照 2017-05-03 下午8.47.35"></p>
</li>
</ul>
<p>–</p>
<p><a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" target="_blank" rel="external">参考链接</a></p>
<p> <a href="https://developer.android.google.cn/guide/topics/resources/drawable-resource.html" target="_blank" rel="external">Google 官方 API</a></p>
<p><a href="http://android.jobbole.com/82117/" target="_blank" rel="external">Android 样式的开发：drawable 汇总篇</a></p>
<p><a href="http://blog.csdn.net/crazymo_/article/details/48941781" target="_blank" rel="external">Android 入门 —— Drawable 与对应的资源 xml 的应用</a></p>
<p><a href="http://www.cnblogs.com/ai394495243/p/5075758.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Android 5.x 新特性之 elevation (阴影),tinting（着色）以及 clipping（剪裁）</a></p>
<p><a href="http://blog.csdn.net/zhuoxiuwu/article/details/50976337" target="_blank" rel="external">Andorid-Tint使用与原理解析</a></p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[黑客与画家]]></title>
      <url>http://yoursite.com/2017/05/01/%E9%BB%91%E5%AE%A2%E4%B8%8E%E7%94%BB%E5%AE%B6/</url>
      <content type="html"><![CDATA[<p>Lisp</p>
<p>Lisp</p>
<p>Lisp</p>
]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[5月小目标]]></title>
      <url>http://yoursite.com/2017/05/01/5%E6%9C%88%E5%B0%8F%E7%9B%AE%E6%A0%87/</url>
      <content type="html"><![CDATA[<p>好好想想四月的所作所为，给五月定几个小目标。</p>
<a id="more"></a>
<p>一不小，五一小长假就要结束了。</p>
<p>意味着，已经五月份了。</p>
<p>来杭州快两个月了，到新的公司也有40多天了，自己都不相信。</p>
<p>自己都做了什么事情呢。</p>
<p>工作上也就前一周有具体的安排任务，完成的自我感觉算还好，不过这还是要下周测试说了算，觉得自己还是存在很多不足的。</p>
<p>很多方面经验尚显不足，例如，有些实现方式，其实找后端可以比较轻松的实现，但是都是自己通过比较复杂的途径实现的，当然从另一方面来说也是有一定好处的。不过多一种解决方案总归不是错的。</p>
<p>心还是没有定下来，有点浮躁。这个说的有点玄乎，但是思想上面的玩意本身就是很难描述清楚的。或许就自己能更深切的体会到吧。</p>
<p>许多时候，虽然在看一些知识点，但是完全看不进去，就像是在装模作样似的，非常的奇葩，因为其实根本没有必要。也不知道自己是装模作样给谁看，现在想想，可能是为了假装自己不闲。？</p>
<p>欺骗自己是最恐怖的事情。对的，这个月要坚决不做那种恐怖的事情。一是一，二是二。要学一个东西，必须要深入的学，不能光学表面。这个深入，是能有多深就要有多深。一定要深到自己的极限。要坚信，付出终有回报，基础扎实，之后才能事半功倍。</p>
<p>不是说要自己给自己喂毒鸡汤，而是要在自己可能要松懈的时候，给自己打一波鸡血，持之以恒，养成习惯。</p>
<p>五一这三天确实有点玩够了，漫展回来又看了一天的动漫，一方面来说这并没有什么错。但是还是觉得有点浪费时间，好在该看的都看完了。</p>
<p>要习惯每天都做一些有一点意义但可能不是很有趣的事情，每天！   做自己应该做而不是想做事的。</p>
<p>人在没有明确目标的时候，如果陷入选择就会自然而然选择放松安逸，所以每天的目标都要非常的明确。现在是白天都会定目标，可是晚上回来要做什么却都没有写下来。而晚上的时间又是最自由，对自己最重要的。所以晚上的安排非非非常的重要。这个思考过程可以放在下班回来的地铁上，5 到 10 分钟完成。</p>
<p>这个月的小目标就是，努力的去完成这个月每天的小目标，白天和晚上的，然后记录下来，给自己打分。</p>
<p>还有安卓知识点的收集和更新，每周至少看一个新的小知识点，或者类库的使用的，最好是能深入理解分析。</p>
<p>你现在处在一个非常非常重要的阶段，要么一辈子当一个底层的打工码农，要么，天高海阔，自己来选。</p>
<p>最后，希望自己能多看书，除了技术的。 一个月至少至少看一本书。  </p>
<p>花在豆瓣和掘金的时间超过微信和 UC 。 </p>
<p>这个月就把没看完的 《希特勒传上》看完，以及《天才疯子》全部。  最好是能够写总结。</p>
<p>12 12 12 12 12 点之前睡觉，不不不不不不不不要睡前玩玩玩玩手机。</p>
]]></content>
      
        <categories>
            
            <category> 随笔 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 小目标 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 知识点 4.28]]></title>
      <url>http://yoursite.com/2017/04/28/Android-%E7%9F%A5%E8%AF%86%E7%82%B9-4-28/</url>
      <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>好记性不如破键盘</p>
</blockquote>
<a id="more"></a>
<p>设计给了张差不多是这样的一张图。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-28 下午8.56.05.png" alt="屏幕快照 2017-04-28 下午8.56.05"></p>
<p>编辑栏可以自由的添加文字或者是图片。</p>
<p>这玩意安卓原生控件肯定是不好搞。</p>
<p>（写到这我有种怪异的感觉，因为我现在的界面是这样的:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-28 下午9.00.58.png" alt="屏幕快照 2017-04-28 下午9.00.58"></p>
<p>这不就和那个设计给的图的的效果几乎一样吗？）</p>
<p>通过 HTML 标签来解决，上面的编辑框就类似于是一个低配版的 MarkDown 编辑器显示框，而我们要传给服务器的就是那些带标签的字符串。</p>
<p>这玩意有个好听的叫富文本。</p>
<p>秉着不重复造轮子的态度，我 Github 了一下。（其实根本造不动）</p>
<p>就是它 <a href="https://github.com/wasabeef/richeditor-android" target="_blank" rel="external">RichEditor</a> ，好家伙，快 3k 的星了。</p>
<p>直接下载，运行了下。除了图片死活出不来，别的都还好，（不是很清楚为什么出不来，因为我在自己项目里面跑起来了，而且我也改了 Demo 中的 url 了，还是不行，就没管了）。</p>
<p>其实这个源码很少，而且不复杂。由于我只要图文，所以来看看图片是怎么实现的。</p>
<p>使用方法很简单，只要</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mRichEdit.insertImage(mHttpUrlPathArray.get(i),<span class="string">"商品详情"</span>);</div></pre></td></tr></table></figure>
<p>前一个参数是图片的 url（注意是 url ，不是什么本地缓存之类的绝对路径），后一个是图片的 alt 。</p>
<p>点进去看看是怎么实现的:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertImage</span><span class="params">(String url, String alt)</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.prepareInsert();"</span>);</div><div class="line">  exec(<span class="string">"javascript:RE.insertImage('"</span> + url + <span class="string">"', '"</span> + alt + <span class="string">"');"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>说实话这个 RE 我还真不知道是什么东西，甚至我 Google 不到，原谅我菜。</p>
<p>但是我是这么想的，其实这并不是 js 库里面的什么对象，而只是，该类名 RichEditor 的缩写，MDZZ。</p>
<p>该类中有特别多的这种写法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">redo</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.redo();"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBold</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.setBold();"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItalic</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.setItalic();"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSubscript</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.setSubscript();"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuperscript</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.setSuperscript();"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStrikeThrough</span><span class="params">()</span> </span>&#123;</div><div class="line">  exec(<span class="string">"javascript:RE.setStrikeThrough();"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>因为图片都是属于插入的形式，所以会多了一个 <code>prepareInsert()</code> 步骤。</p>
<p>然后拼接下字符串，再进行下判断:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">exec</span><span class="params">(<span class="keyword">final</span> String trigger)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span> (isReady) &#123;</div><div class="line">    load(trigger);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    postDelayed(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">      <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        exec(trigger);</div><div class="line">      &#125;</div><div class="line">    &#125;, <span class="number">100</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个 <code>isReady</code> 是 WebViewClient 类中的生命周期中获取到的:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageFinished</span><span class="params">(WebView view, String url)</span> </span>&#123;</div><div class="line">  isReady = url.equalsIgnoreCase(SETUP_HTML);</div><div class="line">  <span class="keyword">if</span> (mLoadListener != <span class="keyword">null</span>) &#123;</div><div class="line">    mLoadListener.onAfterInitialLoad(isReady);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果没有准备好就延时 0.1 秒再执行，准备好了就真正的执行了:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">load</span><span class="params">(String trigger)</span> </span>&#123;</div><div class="line">   <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</div><div class="line">     evaluateJavascript(trigger, <span class="keyword">null</span>);</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">     loadUrl(trigger);</div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>为了兼容不同版本 Android 系统的 WebView 做了判断，然后就是底层代码调用了。</p>
<p>补充说明：Build.VERSION_CODES.KITKAT 就是 19，也就是安卓 4.4 ,它之前的版本用的是 <a href="https://webkit.org/" target="_blank" rel="external">WebKit内核</a>，之后的版本用的是 <a href="http://www.chromium.org/" target="_blank" rel="external">Chromium 内核</a>。</p>
<p>两个内核的一些区别：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-28 下午9.57.42.png" alt="屏幕快照 2017-04-28 下午9.57.42"></p>
<p>好了，主要知道使用是 <code>insertImage()</code> 方法就好了。然后就会遇到一个坑。</p>
<p>图片的大小，用安卓原生方法是控制不了的因为，那个东西是存在于类似网页中的。</p>
<p>所以在这里我纠结了挺久的，在想是不是要通过拼接 width 之类的 Img 属性上去。但是这样要修改 RE 中 <code>setImg</code> 的方法，觉得可能搞不定。于是我就想着看看别的一些类库都是怎么实现的。</p>
<p>于是看了几个也是挺受欢迎的库，像是<a href="https://github.com/xmuSistone/android-animate-RichEditor" target="_blank" rel="external">这个</a>和<a href="https://github.com/KDF5000/RichEditText" target="_blank" rel="external">这个</a>。</p>
<p>这两个库都是自动处理图片大小的。第一个在图片的右上角还有删除按钮，以及删除图片的动画，感觉特别人性化。</p>
<p>但是，两者都是通过绝对路径来确认图片以及用原生控件来展示的。（好像也行啊，无语）</p>
<p>所以··· 解决方法用 CSS 直接一点。</p>
<p>这个问题在 <a href="https://github.com/wasabeef/richeditor-android/issues/47" target="_blank" rel="external">Issues</a> 中也是有人反映过，而且知情人士也给出了简单好用的解决方案具体步骤:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-28 下午10.06.01.png" alt="屏幕快照 2017-04-28 下午10.06.01"></p>
<p>然后就好了，亲测，好用。</p>
<p>好吧，我承认。结尾很潦草。</p>
<p>明天就是五一小长假了。这一不小心十点了啊。我要出去买点吃的，就先这样。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[我是做安卓的    吗]]></title>
      <url>http://yoursite.com/2017/04/27/%E6%88%91%E6%98%AF%E5%81%9A%E5%AE%89%E5%8D%93%E7%9A%84/</url>
      <content type="html"><![CDATA[<p><strong>IOS 和 Android 的 UI 应该一模一样吗</strong></p>
<p>我想在 Banner 上加了个切换的动画，已经做好了，设计的第一反应是不行，之后觉得说的太绝对又补充说，如果想要加也可以，也要让 IOS 加上。</p>
<a id="more"></a>
<p>虽然我全家人都用 IPhone ，但是我几乎没用过，所以我没什么对比的，但是我记得微信首页就不一样，于是我就那么说了下。</p>
<p>设计的意思是，那是因为没办法，但是我们要尽可能的让 APP 保持一致，就是说，如果你们开发的技术够硬，两个端的 APP 一模一样最好了。</p>
<p>说到这，我想，大部分有 Android 开发经历的应该都可以想象到了，那设计给我的肯定是纯纯的 IOS 风格的界面了。</p>
<p>其实当时我就想问了，你看过 Google 的关于 Android 的设计规范吗，估计 Material Design 是什么都没听过。当然，我也不是很懂，我只是一个开发，控油设计心，但是对于天天对着 Android 机，给它一遍一遍的装卸 IOS 风格的 APP 真是烦躁。</p>
<p>不用多说，放两张图就够了。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-27 下午10.02.23.png" alt="屏幕快照 2017-04-27 下午10.02.23"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-27 下午10.03.16.png" alt="屏幕快照 2017-04-27 下午10.03.16"></p>
<p>首先，我真是不懂为什么那么喜欢白色白色白色，而且这纯白顶部框配上那左上角的黑色返回箭头，那满满的苹果风。还有位于最底部的提交按钮，好吧。</p>
<p>还有那个提示框，哎。</p>
<p>其实我真心知道，一般来说设计不可能给开发人员两套 UI 设计，除非他是吃饱了撑的。</p>
<p>另一个方面，肯定要说是为了 Android 端的用户切换的 IOS 不适应啊(一般 IOS 换 Android 还是比较少的)，我们要保持一致性啊啥的。可是我想说，人家两个不同系统都适应过来了，会不适应这小小的 APP 的转换吗。</p>
<p>当然，如果是大厂，比如微信，支付宝之类的，可能会尽量保持一致，因为可能有人同时用多部不同系统的手机，而且大厂极致追求稳定，统一。但是即便如此，他们的设计更多也是追求中立，至少我看的是这样，没有出现白顶配黑箭头的这种风格。 我甚至在淘宝中见到过很多 Android 风的小交互。 没有对比不是很清楚 IOS 端是否实现，但是我更愿意相信这个是某些 Android 人的主动请求添加，因为喜欢。</p>
<p>哦，像知乎，掘金这种 APP 就别说了，打死我也不信 IOS 也是这样。</p>
<p>一个小小的按钮就提现出来了。</p>
<p>怎么说呢，很多程度上和软件的性质和用户群体也密切相关。</p>
<p>能用这种 APP 的人，那种交互或者界面的调整对他们来说，学习成本几乎为 0。甚至他们会更喜欢看到那种不一样。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-27 下午10.23.01.png" alt="屏幕快照 2017-04-27 下午10.23.01"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-27 下午10.22.54.png" alt="屏幕快照 2017-04-27 下午10.22.54"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-27 下午10.23.17.png" alt="屏幕快照 2017-04-27 下午10.23.17"></p>
<p>很遗憾，我在公司做出来的东西都长右边那样。</p>
<p>领导肯定觉得做一样的东西，需要的资源更少，他们关心的是速度，快就好了。但是对于许多的 IOS 效果，Android 更多的是要去造轮子，虽然 Github 上面一搜一大堆。但真是感到莫名的想笑。Google 的程序员做好了放那给我们用，我们却只能再去自定义另一种风格的相同东西出来。</p>
<p>上次我做一个图片预览的功能，我想到了之前看到的结合 PhotoView 做出来的仿照微信朋友圈的交互效果，真的很酷，兴致冲冲的做了。</p>
<p>做好了，我给设计看，问能不能加上这个，可是设计问我，为什么要加上这个呢，拖来拖去有什么用？</p>
<p>多说无益，我直接说微信这么做的。看他反应我知道她肯定没尝试拖过，估计她也是觉得没人会在我们这 APP 上拖那预览的照片，所以选择默认了。</p>
<p>我有点失落的是，有点感慨，我更希望微信那个拖拽动作是设计提出来的，而不是程序员。</p>
<p>因为那样的设计，比程序员，少太多了。</p>
<p>不同的系统的东西，应该<strong>尽量</strong>的去不一样，毕竟他们连系统都不一样。</p>
<p>本来应该写代码的，结果写这个了破玩意，真的是 ZZ 。</p>
<p>还有一句话开发肯定都不陌生。</p>
<p>支付宝，微信都这么做了，我们也这么做。</p>
<p>理由？要吗？</p>
<p><a href="https://webdesign.tutsplus.com/articles/a-tale-of-two-platforms-designing-for-both-android-and-ios--cms-23616" target="_blank" rel="external">友情链接1</a><br><a href="https://www.zhihu.com/question/40430299" target="_blank" rel="external">友情链接2</a></p>
]]></content>
      
        <categories>
            
            <category> 随笔 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android IOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 知识点 4.25]]></title>
      <url>http://yoursite.com/2017/04/25/Android-%E7%9F%A5%E8%AF%86%E7%82%B9-4-25/</url>
      <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>好记性不如破键盘</p>
</blockquote>
<a id="more"></a>
<p>设计给了差不多是这样一张图:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-25 下午11.22.16.png" alt="屏幕快照 2017-04-25 下午11.22.16"></p>
<p>So Easy ，一个 <code>shape</code> 加个 <code>radius</code> 就好啦，像这样:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">       <span class="attr">android:shape</span>=<span class="string">"rectangle"</span> <span class="attr">android:padding</span>=<span class="string">"10dp"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#5aaae2"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">corners</span></span></div><div class="line">        <span class="attr">android:radius</span>=<span class="string">"10dp"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
<p>但是由于银行种类有十多种，颜色也不尽相同，这个时候由于我们是在 <code>background</code> 中直接设置 <code>drawable</code> 的，切换颜色的时候就会导致，圆角消失了。</p>
<p>除非你直接写十多个不同颜色的 <code>shape</code> ，那好像不大好…</p>
<p>所以我们要修改 <code>solid</code> 的中的颜色而不是 <code>background</code> 中的颜色。（ MDZZ 一开始我老是在想怎么加个圆角的外框，这样里面的颜色修改圆角就不会消失了，还是同事提醒我的）</p>
<p>Google 一下， 有人是这样解决的:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-25 下午11.29.08.png" alt="屏幕快照 2017-04-25 下午11.29.08"></p>
<p>就是说获取边框对象，创建 <code>GradientDrawable</code> 对象，用其 <code>setColor()</code> 方法动态的修改 <code>solid</code> 中的颜色。</p>
<p>好像很简单，我试了下，报错了。</p>
<p>和下面那哥们回复的差不多，类型转换错误，看来是 <code>getBackground()</code> 方法获取到的对象不一定是 <code>GradientDrawable</code> ，于是我添加了许多 ITEM，打了个 LOG ，<code>getBackground().getClass().toString()</code> ,将类型都打印了出来。</p>
<p>发现其中除了 <code>GradientDrawable</code> 还有 <code>ColorDrawable</code> ,再然后发现 <code>ColorDrawable</code> 也有动态设置 <code>solid</code> 颜色的方法。</p>
<p>那就简单了:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (holder.userinfo_layout.getBackground().getClass().toString().contains(<span class="string">"GradientDrawable"</span>)) &#123;</div><div class="line">    GradientDrawable background1 = (GradientDrawable) holder.userinfo_layout.getBackground();</div><div class="line">    background1.setColor(color);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    ColorDrawable background2 = (ColorDrawable) holder.userinfo_layout.getBackground();</div><div class="line">    background2.setColor(color);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>简单粗暴，KO。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 知识点 4.24]]></title>
      <url>http://yoursite.com/2017/04/24/Android-%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>好记性不如破键盘</p>
</blockquote>
<a id="more"></a>
<h2 id="4-24"><a href="#4-24" class="headerlink" title="4.24"></a>4.24</h2><p>设计给了差不多是这样一张图:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/54A79C8D-0DCB-4789-BA39-BAB4C2709D23.png" alt="54A79C8D-0DCB-4789-BA39-BAB4C2709D23"></p>
<p>一个简单的 Dialog。</p>
<p>直接上 xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"240dp"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"#0000"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"190dp"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"40dp"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/bg_ad"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">        <span class="attr">android:paddingTop</span>=<span class="string">"@dimen/dp70"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"提交成功"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"18sp"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tv_dialog_descript"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"补充说明巴拉巴拉巴拉"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#646464"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/bt_dialog_ok"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"?android:attr/borderlessButtonStyle"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"40dp"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"18dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@color/white"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"4dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"完成"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#1189ff"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"18sp"</span>/&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/classify523"</span>/&gt;</div><div class="line">    </div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后上代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">AlertDialog.Builder builder =</div><div class="line">                <span class="keyword">new</span> AlertDialog.Builder(context);</div><div class="line">        <span class="keyword">final</span> View dialogView = LayoutInflater.from(context)</div><div class="line">                .inflate(R.layout.yx_layout_common_dialog_new,<span class="keyword">null</span>);</div><div class="line">        TextView desc = (TextView) dialogView.findViewById(R.id.tv_dialog_descript);</div><div class="line"></div><div class="line">        desc.setText(message);</div><div class="line">        builder.setView(dialogView);</div><div class="line">        <span class="keyword">final</span> AlertDialog dialog = builder.create();</div><div class="line">        dialogView.findViewById(R.id.bt_dialog_ok).setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">                dialog.dismiss();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        dialog.show();</div></pre></td></tr></table></figure>
<p>好了？</p>
<p>运行起来，差不多是这样的:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-04-25 下午11.15.07.png" alt="屏幕快照 2017-04-25 下午11.15.07"></p>
<p>顶部不是透明的，可是明明我给顶部设置全透明了啊？</p>
<p>我在 xml 和代码中也设置过了就是不行，我怀疑是不是默认有一层纯色的背景。</p>
<p>最后是这样设置的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dialog.getWindow().setBackgroundDrawable(<span class="keyword">new</span> ColorDrawable(<span class="number">0</span>));</div></pre></td></tr></table></figure>
<p>直接在 dialog 上设置了空的背景。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[行万里路]]></title>
      <url>http://yoursite.com/2017/04/22/%E8%A1%8C%E4%B8%87%E9%87%8C%E8%B7%AF/</url>
      <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>今天的风儿好喧嚣 </p>
</blockquote>
<a id="more"></a>
<h2 id="2月"><a href="#2月" class="headerlink" title="2月"></a>2月</h2><h3 id="上海"><a href="#上海" class="headerlink" title="上海"></a>上海</h3><h4 id="海洋馆"><a href="#海洋馆" class="headerlink" title="海洋馆"></a>海洋馆</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/mmexport1492871826427.jpg" class="full-image"></p>
<h4 id="田子坊"><a href="#田子坊" class="headerlink" title="田子坊"></a>田子坊</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/mmexport1492871843218.jpg" class="full-image"></p>
<h4 id="泰晤士小镇"><a href="#泰晤士小镇" class="headerlink" title="泰晤士小镇"></a>泰晤士小镇</h4><p><em>三人游</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/mmexport1492871880623.jpg" class="full-image"></p>
<h4 id="辞职"><a href="#辞职" class="headerlink" title="辞职"></a>辞职</h4><p><em>再见上海，再见荣开，再见宅家，再见小伙伴</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20160825_184452.jpg" class="full-image"></p>
<h2 id="3月"><a href="#3月" class="headerlink" title="3月"></a>3月</h2><h3 id="杭州"><a href="#杭州" class="headerlink" title="杭州"></a>杭州</h3><h4 id="朋友家"><a href="#朋友家" class="headerlink" title="朋友家"></a>朋友家</h4><p><em>初来乍到</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20170306_170120.jpg" class="full-image"></p>
<h4 id="求职路上"><a href="#求职路上" class="headerlink" title="求职路上"></a>求职路上</h4><p><em>那座桥，看着不长，却要走很久</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20170309_141543.jpg" class="full-image"></p>
<h4 id="杭州市图书馆"><a href="#杭州市图书馆" class="headerlink" title="杭州市图书馆"></a>杭州市图书馆</h4><p><em>如果我住在它隔壁多好</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/mmexport1492871897710.jpg" class="full-image"></p>
<h2 id="4月"><a href="#4月" class="headerlink" title="4月"></a>4月</h2><h3 id="杭州-1"><a href="#杭州-1" class="headerlink" title="杭州"></a>杭州</h3><h4 id="西湖大作战"><a href="#西湖大作战" class="headerlink" title="西湖大作战"></a>西湖大作战</h4><p><em>是的，一朵都没卖出去</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20170408_130314.jpg" class="full-image"></p>
<h4 id="灵隐寺"><a href="#灵隐寺" class="headerlink" title="灵隐寺"></a>灵隐寺</h4><p><em>屡设山门为阻云</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20170416_135137.jpg" class="full-image"></p>
<h4 id="西溪"><a href="#西溪" class="headerlink" title="西溪"></a>西溪</h4><p><em>左边一个小湖，右边一个小湖</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/IMG_20170423_094614.jpg" class="full-image"></p>
<h4 id="白马湖-漫展"><a href="#白马湖-漫展" class="headerlink" title="白马湖 漫展"></a>白马湖 漫展</h4><p><em>努力工作，发奋赚钱，手办、妹纸、福袋…</em></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/屏幕快照 2017-05-01 下午5.02.44.png" alt="屏幕快照 2017-05-01 下午5.02.44"></p>
<p>–</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=209326&auto=1&height=66"></iframe>

<div class="note default"><p>未完待续…</p>
</div>
]]></content>
      
        <categories>
            
            <category> 行万里路 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 世界那么大 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 仿淘宝商品详情页]]></title>
      <url>http://yoursite.com/2017/04/17/Android_%E4%BB%BF%E6%B7%98%E5%AE%9D%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5/</url>
      <content type="html"><![CDATA[<p>其实差很多，只是简单的模仿里面的一个效果而已。稍微做个笔记。</p>
<p>效果是这个样子的。</p>
<p><img src="http://i4.buimg.com/567571/1f8ddefdf9009ce9.gif" alt=""></p>
<a id="more"></a>
<p>上面那几个 ITEM 可以点击，还有下面模块滑动的时候，对应的 ITEM 要变色，就俩需求。</p>
<p>这里我采用的都是最直接的方式，上面那个用 <code>LinearLayout</code> 包几个按钮，下面那个用 <code>ScrallView</code>，整体用 <code>FrameLayout</code> 包起来。(这种简单的叠加别用耗性能的 <code>RelativeLayout</code>)</p>
<p>上布局代码:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">"com.zhanglf.goodsdetail.MainActivity"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">com.zhanglf.goodsdetail.ScrollViewDIY</span></span></div><div class="line">        <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">        <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/scrollView"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">tools:context</span>=<span class="string">"com.zhanglf.goodsdetail.MainActivity"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/view_one"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"400dp"</span></div><div class="line">                <span class="attr">android:layout_marginTop</span>=<span class="string">"45dp"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@android:color/holo_orange_dark"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/view_two"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"700dp"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@android:color/holo_blue_bright"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/view_three"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@android:color/holo_green_dark"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/view_four"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"800dp"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@android:color/holo_red_light"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">com.zhanglf.goodsdetail.ScrollViewDIY</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@android:color/holo_purple"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/bt_item1"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">" Item 1 "</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/bt_item2"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">" Item 2 "</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/bt_item3"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">" Item 3 "</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/bt_item4"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">" Item 4 "</span>/&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>写 4 个 ITEM 按钮的点击事件，下面模块的跳转用 <code>ScrollView</code> 的 <code>smoothScrollTo()</code> 方法就好了。</p>
<p>这个方法需要传入两个参数，分别是 x 和 y 的坐标。这里 x 我们传 0 就好了。y 的话直接用 <code>getTop();</code> 获取距离顶部的距离。</p>
<p>这里有一点要<strong>注意</strong>，<code>Activity</code> 生命周期中，<code>onStart</code>, <code>onResume</code>, <code>onCreate</code> 都不是真正 <code>visible</code> 的时间点，真正的<code>visible</code> 时间点是 <code>onWindowFocusChanged()</code> 函数被执行时。</p>
<p>所以 <code>getTop()</code> 要放在 <code>onWindowFocusChanged()</code> 里面执行，否则过早调用 <code>getTop()</code>，比如在 <code>onCreate()</code> 中调用，可能会因为这个 <code>view</code> 还没有被加到 <code>rootview</code> 中获取到的值都是 0。</p>
<p>第二个需求是要根据滑动距离让上面对应的 ITEM 变色。</p>
<p>这个时候需要实现 <code>ScrollView</code> 的 <code>OnScollChangedListener</code> 接口，但是会发现 Call requires API 23 。</p>
<p>所以，最好还是自己创建一个类继承系统的 <code>ScrollView</code> 来兼容低版本。(不是很清楚为什么 Google要将 <code>onScrollChanged()</code> 定义成 <code>protected</code>)</p>
<p>上代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollViewDIY</span> <span class="keyword">extends</span> <span class="title">ScrollView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ScrollViewDIY</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ScrollViewDIY</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ScrollViewDIY</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyle);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldx, <span class="keyword">int</span> oldy)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onScrollChanged(x, y, oldx, oldy);</div><div class="line">        <span class="keyword">if</span> (onScollChangedListener != <span class="keyword">null</span>) &#123;</div><div class="line">            onScollChangedListener.onScrollChanged(<span class="keyword">this</span>, x, y, oldx, oldy);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//接口回调</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnScollChangedListener</span><span class="params">(OnScollChangedListener onScollChangedListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.onScollChangedListener = onScollChangedListener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnScollChangedListener</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(ScrollViewDIY scrollView, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldx, <span class="keyword">int</span> oldy)</span></span>;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> OnScollChangedListener onScollChangedListener;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>有个小技巧，关于自定义的 View ，每次都要写那三段构造函数是不是很烦？</p>
<p>其实 Google 早就想到了，直接打 ViewConstructors 就可以自动完成了。你也可以在这里修改该 Templates :</p>
<p><img src="http://i1.piimg.com/567571/d7a696a0226aa4ec.png" alt=""></p>
<p>然后就没有然后了，直接判断范围了好了。</p>
<p>整体代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ScrollViewDIY mScroll;</div><div class="line">    <span class="keyword">private</span> Button mBt1;</div><div class="line">    <span class="keyword">private</span> Button mBt2;</div><div class="line">    <span class="keyword">private</span> Button mBt3;</div><div class="line">    <span class="keyword">private</span> Button mBt4;</div><div class="line">    <span class="keyword">private</span> View mView1;</div><div class="line">    <span class="keyword">private</span> View mView2;</div><div class="line">    <span class="keyword">private</span> View mView3;</div><div class="line">    <span class="keyword">private</span> View mView4;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTop1;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTop2;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTop3;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTop4;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        intView();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">intView</span><span class="params">()</span> </span>&#123;</div><div class="line">        mScroll = (ScrollViewDIY) findViewById(R.id.scrollView);</div><div class="line">        mView1 =  findViewById(R.id.view_one);</div><div class="line">        mView2 =  findViewById(R.id.view_two);</div><div class="line">        mView3 =  findViewById(R.id.view_three);</div><div class="line">        mView4 =  findViewById(R.id.view_four);</div><div class="line">        mBt1 = (Button) findViewById(R.id.bt_item1);</div><div class="line">        mBt2 = (Button) findViewById(R.id.bt_item2);</div><div class="line">        mBt3 = (Button) findViewById(R.id.bt_item3);</div><div class="line">        mBt4 = (Button) findViewById(R.id.bt_item4);</div><div class="line"></div><div class="line">        mBt1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                mScroll.smoothScrollTo(<span class="number">0</span>,mTop1);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        mBt2.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                mScroll.smoothScrollTo(<span class="number">0</span>,mTop2);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        mBt3.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                mScroll.smoothScrollTo(<span class="number">0</span>,mTop3);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        mBt4.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                mScroll.smoothScrollTo(<span class="number">0</span>,mTop4);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        mScroll.setOnScollChangedListener(<span class="keyword">new</span> ScrollViewDIY.OnScollChangedListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(ScrollViewDIY scrollView, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldx, <span class="keyword">int</span> oldy)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (y&lt;mTop2) &#123;</div><div class="line">                    setColor(<span class="number">1</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y&gt;=mTop2&amp;&amp;y&lt;mTop3) &#123;</div><div class="line">                    setColor(<span class="number">2</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y&gt;=mTop3&amp;&amp;y&lt;mTop4) &#123;</div><div class="line">                    setColor(<span class="number">3</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y&gt;=mTop4) &#123;</div><div class="line">                    setColor(<span class="number">4</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">        mBt1.setTextColor(Color.BLACK);</div><div class="line">        mBt2.setTextColor(Color.BLACK);</div><div class="line">        mBt3.setTextColor(Color.BLACK);</div><div class="line">        mBt4.setTextColor(Color.BLACK);</div><div class="line">        <span class="keyword">switch</span> (index) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                mBt1.setTextColor(Color.RED);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                mBt2.setTextColor(Color.RED);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">                mBt3.setTextColor(Color.RED);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">                mBt4.setTextColor(Color.RED);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onWindowFocusChanged</span><span class="params">(<span class="keyword">boolean</span> hasFocus)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onWindowFocusChanged(hasFocus);</div><div class="line">        mTop1 = mView1.getTop();</div><div class="line">        mTop2 = mView2.getTop();</div><div class="line">        mTop3 = mView3.getTop();</div><div class="line">        mTop4 = mView4.getTop();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>就是这么简单。</p>
<p><img src="https://gss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy/zhidao/wh%3D600%2C800/sign=63bf992667380cd7e64baaeb9174810c/63d9f2d3572c11df7a2dd9b5612762d0f603c2ac.jpg" alt=""></p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 安卓 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Sketch 初体验]]></title>
      <url>http://yoursite.com/2017/04/16/sketch%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      <content type="html"><![CDATA[<p><a href="http://xclient.info/s/sketch.html#history_versions" target="_blank" rel="external"><em>下载这个软件</em></a> 的主要原因是因为这个软件的图标比较漂漂!</p>
<p>还有就是我也想体验下做设计的快感，啊哈哈。</p>
<p>趁着周末比较闲玩了半天左右(话说我…好像…平时也不忙)，期间参考了挺多的资料，稍微做点笔记。</p>
<a id="more"></a>
<h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><p>先是了解下这个工具是干嘛用的，它的 <a href="https://www.zhihu.com/question/20715139" target="_blank" rel="external"><em>优缺点什么</em></a> 的，发现还是很有必要试试看的，然后大致看点基本操作。</p>
<p>比如 <a href="http://www.sketchcn.com/" target="_blank" rel="external">Sketch 中文网</a>，可是觉得看这种网站写的教程就和回到学生时代一样，看了几分钟就想睡觉。</p>
<p>太啰嗦了。</p>
<p>我还是先去看看大神做出来的 Demo 长什么样子，刺激下。然后逛了一圈 <strong><a href="https://www.sketchappsources.com/all-free-sources.html" target="_blank" rel="external">这里</a></strong>。</p>
<p>下了几个比较 <a href="https://www.sketchappsources.com/free-source/2563-flavr-recipes-app-ios-ui-kit-sketch-freebie-resource.html" target="_blank" rel="external">喜欢</a> 的风格。<br>例如:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%889.37.52.png" alt=""></p>
<p>用 Sketch 打开之后，简单的点了点各个所谓的 <a href="http://www.jianshu.com/p/c7eb767308ed" target="_blank" rel="external">Artboard</a> ，原来就是拷贝来拷贝去的，然后图层叠加。好像比写代码轻松多了啊，我当时那么想。</p>
<p>工具总体的使用相对比较简单吧，最主要还是看设计的。</p>
<h3 id="动手"><a href="#动手" class="headerlink" title="动手"></a>动手</h3><p>然后我就想着先设计几个简单但是要有点创意的界面，先从登录开始设计吧…</p>
<p>然后几分钟过去了… </p>
<p>又几分钟过去了…</p>
<p>。。。</p>
<p>好吧，我放弃了。</p>
<p>我觉得这么出名的软件插件一定不少，搜下了。</p>
<p>找了几个比较常用的。</p>
<ul>
<li>用来批量命名的 <a href="https://github.com/rodi01/RenameIt" target="_blank" rel="external">RenameIt</a></li>
<li>用来随机加载图片的(感觉这个有点厉害) <a href="https://github.com/timuric/Content-generator-sketch-plugin" target="_blank" rel="external">Content-generator-sketch-plugin</a></li>
<li>用来标记尺寸的 <a href="https://github.com/utom/sketch-measure" target="_blank" rel="external">sketch-measure</a></li>
<li>用来做注释的 <a href="https://github.com/marcosvidal/Sketch-Notebook" target="_blank" rel="external">Sketch-Notebook</a></li>
</ul>
<p>安装方式很简单，就是从 Github 上面把文件下载下来，然后丢 Sketch 的 Plugins 的文件夹下面就行了。</p>
<p>你也可以这样找到那个文件夹:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%889.17.23.png" alt=""></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%889.17.33.png" alt=""></p>
<p>我的那几个都是放进去立马就生效了，都不用重启，很酷哦。</p>
<p>使用也很简单，比如那个加载图形的插件，你先画个图形做载体，然后像下图那样选一下要加载的内容就好(女的都没几个漂亮的啊，喂)。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%889.21.52.png" alt=""></p>
<p>我看了会儿极客上个一个简单的 <a href="http://www.jikexueyuan.com/course/704_6.html?ss=1" target="_blank" rel="external">视频教程</a>，他做了两个界面，他做的很丑。像这样:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%889.25.31.png" alt=""></p>
<p>我很鄙视，然后我也做了个差不多的。</p>
<p>。。。</p>
<p>。。。</p>
<p>可是更丑，虽然做起来很快。像这样:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-16%20%E4%B8%8B%E5%8D%888.59.23.png" alt=""></p>
<p>那堆图片的命名我就是用那个 RenameIt 插件命名的，使用很简单，选好那堆图片然后点插件，输入 Img%n 就好了。</p>
<p>原型图的制作工具操作起来应该更简单。</p>
<p>但是问题来了，无论是设计图或者原型图，本来制作的难点就和工具操作的难易程度几乎没有关系。</p>
<p>原型图的重点是需求的体现，设计的重点是总整风格的把控和更加友好的交互。(当然，这只是一名非常普通的开发者的看法)</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>还是敲代码有意思。</p>
<p><img src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=253338849,3188989570&amp;fm=21&amp;gp=0.jpg" alt=""></p>
]]></content>
      
        <categories>
            
            <category> Mac相关 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 设计 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[安卓桌面图标未读数字]]></title>
      <url>http://yoursite.com/2017/04/15/%E5%AE%89%E5%8D%93%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87%E6%9C%AA%E8%AF%BB%E6%95%B0%E5%AD%97/</url>
      <content type="html"><![CDATA[<p>再不写个安卓技术文，都要忘了自己其实是做安卓的了。</p>
<p><img src="http://imgsrc.baidu.com/forum/w%3D580/sign=b8700c65494a20a4311e3ccfa0539847/d2198e16fdfaaf5108b8d5c88a5494eef01f7a74.jpg" alt=""></p>
<p>今天要是实现的就是这种东西</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-15%20%E4%B8%8B%E5%8D%885.06.07.png" alt=""></p>
<a id="more"></a>
<p>说实话，有点恶心。每次支付宝微信什么的这种未读标志出现的时候就忍不住去点。</p>
<p>好了，我的学习流程是这样的，先在网上搜了下:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-15%20%E4%B8%8B%E5%8D%885.09.51.png" alt=""></p>
<p>看了几篇之后，发现 <a href="http://www.jianshu.com/p/0992ff9eeeb6" target="_blank" rel="external"><em>这个</em></a> 写的比较用心，除了无形狗粮。</p>
<p>然后找到了 Github 上面的 <a href="https://github.com/leolin310148/ShortcutBadger" target="_blank" rel="external"><em>这个</em></a>，应该是用的人最多的了。</p>
<p>使用起来非非常的方便:</p>
<p>新建了个工程，在布局中简单写了两个 <code>Button</code> ，一个用来添加未读的标志，一个用来消除未读的标记。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">    <span class="attr">android:text</span>=<span class="string">"addCount"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/bt_addCount"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">    <span class="attr">android:text</span>=<span class="string">"removeCount"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/bt_removeCount"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</div></pre></td></tr></table></figure>
<p>然后在代码中添加按钮的点击事件:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">mBtAddCount = (Button) findViewById(R.id.bt_addCount);</div><div class="line">        mBtAddCount.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (ShortcutBadger.isBadgeCounterSupported(getApplicationContext())) &#123;</div><div class="line">                    ShortcutBadger.applyCount(getApplicationContext(),<span class="number">1</span>);</div><div class="line">                    Toast  toast = Toast.makeText(getApplicationContext(),<span class="string">"标记已添加"</span>,Toast.LENGTH_SHORT);</div><div class="line">                    toast.show();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        mBtRemove = (Button) findViewById(R.id.bt_removeCount);</div><div class="line">        mBtRemove.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (ShortcutBadger.isBadgeCounterSupported(getApplicationContext())) &#123;</div><div class="line">                    ShortcutBadger.removeCount(getApplicationContext());</div><div class="line">                    Toast  toast = Toast.makeText(getApplicationContext(),<span class="string">"标记已清除"</span>,Toast.LENGTH_SHORT);</div><div class="line">                    toast.show();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>灰常快，然后在真机上试了下，能用。（手头只有自己使用的手机，华为荣耀 6。）</p>
<p>再然后，看源码。</p>
<p>怎么说呢，可以这样理解。桌面屏幕其实也是个 Activity 界面，是一个类，Launcher 。修改桌面图标其实就是传一些参数进去，然后调用里面的修改图标的方法。(这个方法各个厂商的实现方式可能都是不一样的，原生其实是没有的，因为有强大的通知栏了，为何要整这种逼死强迫症的东西呢)</p>
<p>需要的参数有包名，类名，和想要设置的数字。移除标志其实就是数字传 0。</p>
<p>不依赖三方库，我自己实现了下，像这样:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Intent launchIntent = getApplicationContext().getPackageManager().getLaunchIntentForPackage(getApplicationContext().getPackageName());</div><div class="line">Bundle localBundle = <span class="keyword">new</span> Bundle();</div><div class="line">localBundle.putString(<span class="string">"package"</span>, getApplicationContext().getPackageName());</div><div class="line">localBundle.putString(<span class="string">"class"</span>, launchIntent.getComponent().getClassName());</div><div class="line">localBundle.putInt(<span class="string">"badgenumber"</span>, <span class="number">1</span>);</div><div class="line">getApplicationContext().getContentResolver().call(Uri.parse(<span class="string">"content://com.huawei.android.launcher.settings/badge/"</span>), <span class="string">"change_badge"</span>, <span class="keyword">null</span>, localBundle);</div></pre></td></tr></table></figure>
<p>运行了下，妥妥的。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-15%20%E4%B8%8B%E5%8D%885.06.20.png" alt=""></p>
<p>烦在哪里呢，安卓严重的碎片化。不同牌子的实现方式就都不一样了，上面只是华为的。</p>
<p>有的手机，例如锤子之类的，只有 System App 才能改。</p>
<p>ShortcutBadger 就是对市场上的绝大多数品牌的手机做了适配。一般手机的实现方式都和上面华为那个差不多，传参数调接口就行了。具体可以看<a href="https://github.com/leolin310148/ShortcutBadger/tree/master/ShortcutBadger/src/main/java/me/leolin/shortcutbadger/impl" target="_blank" rel="external"><em>这里</em></a>。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 安卓 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[周末停水]]></title>
      <url>http://yoursite.com/2017/04/15/%E5%91%A8%E6%9C%AB%E5%81%9C%E6%B0%B4/</url>
      <content type="html"><![CDATA[<p>好不容易周末了。</p>
<p>居然停水了。</p>
<div align="center"><br> <img src="https://gss0.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/wh%3D600%2C800/sign=98a158584f10b912bf94fef8f3cdd03b/9a504fc2d5628535b06dcdc298ef76c6a6ef6347.jpg" width="200" height="200" alt="图片名称" align="center"><br> </div>


<a id="more"></a>
<p>都不能好好煮饭做菜了。</p>
<p>拉屎都要出去拉。</p>
 <div align="center"><br> <img src=" http://img2.imgtn.bdimg.com/it/u=146946539,2154009609&fm=11&gp=0.jpg" width="200" height="200" alt="图片名称" align="center"><br> </div>

<p>昨晚太累太忙了估计是，虽然看到了楼下的通知，但是忘记屯水了。</p>
<p>9 点到 5 点停水，只能是做晚饭了。</p>
<p>一般是周末的时候煮点不错的汤，好好补补的。</p>
<p>另外，早上骑车出去买菜的时候，看到</p>
<div align="center"><br> <img src=" https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=320948557,2220721548&fm=23&gp=0.jpg" width="200" height="200" alt="图片名称" align="center"><br> </div>

<p>漫天柳树精子，一不小心还吸到鼻子里面，蓝瘦。</p>
]]></content>
      
        <categories>
            
            <category> 随笔 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> 宅家 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[4月随想]]></title>
      <url>http://yoursite.com/2017/04/14/4%E6%9C%88%E9%9A%8F%E6%83%B3/</url>
      <content type="html"><![CDATA[<p>这算是第一次在网上写自己的感想吗？ </p>
<p>我想了想。</p>
<p>不算。 </p>
<p>好歹我中学的也是玩过 QQ 空间的，写过不少日志。 </p>
<div align="center"><br> <img src="http://img3.imgtn.bdimg.com/it/u=3471221132,3526623089&fm=23&gp=0.jpg" width="100" height="100" alt="图片名称" align="center"><br> </div>

<a id="more"></a>
<p>说是 4 月随想，没准我会连小学 5 年级同桌还欠我一包辣条的事情给说出来，当然，我不会。</p>
<div align="center"><br> <img src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/eac4b74543a982269501bfb98e82b9014b90eb68.jpg" width="100" height="100" alt="图片名称" align="center"><br> </div><br><!--more--><br>去年发生了太太多事情了(相比我约前 1/4 的平淡人生)，算的上是人生路上的事故多发地段了。也说的上是实现小时候的一小半梦想了吧。<br><br>通过自己的努力成为一个拿着固定工资，基本能够养活自己，做着自己喜欢的工作，周末偶尔还能出去逛逛。(本来不怎么样的心情，写着写着咋感觉自己也不算差呢，有点小激动)<br><br>是的，突然就膨胀了。<br><br><img src="https://gss0.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/wh%3D600%2C800/sign=5d8bad5a35adcbef016176009c9f02e5/a1ec08fa513d2697d4c79cc351fbb2fb4316d81c.jpg" alt=""><br><br>言归正传，从 3 月上海离职回福建老家，吃我妈妈煮的很好吃的菜吃了半个月，4 月来杭州，面试 2 家公司都运气很好的拿到了 offer ，然后顺利入职，再到和朋友一起在一小区还不错的两室一厅合租。这一切对于身心处于发育阶段的我来说<br><br><img src="http://pic.9ht.com/up/2016-1/14541223419540327.jpg" alt=""><br><br>不可思议。<br><br>此刻住在早上被太阳照醒的小区，不由想起前半年在上海，半夜被左边那个疯子般喝多了酒的邻居(整夜神经病式的激光枪般爆粗口哒哒不休)和右边那个好像男朋友很多的女邻居(偶尔半夜嗷嗷嗯嗯欲要还羞实着浪个不停)，支配的恐惧。<br><br>我的语文老师教的好，其实不用括号和逗号也并没有什么问题，但是为了方便阅读，我加了，很酷。<br><br>关键屋子地方唯一的通风口还对着下水道，从那跑进屋子的老鼠如果是母的估计已经生小宝宝了，我的米和苹果没有白喂。<br><br>这么看来我也是个有点曲折经历的男人了。<br><br><div align="center"><br> <img src="http://pics.sc.chinaz.com/Files/pic/faces/3894/5.jpg" width="200" height="200" alt="图片名称" align="center"><br> </div>

<p>虽然离开上海的时候，它并没有给我留下什么好的印象，但是现在还是挺怀念那个不算很小的团队的。</p>
<p>估计我最佩服就是那个设计了，一人担起 3 个还是 4 个应用的 PC 和移动端的设计。虽然给我的都是 IOS 的图，但是看到他手里拿着 Nexus 手机，和我说起 Material Design 头头是道，真是一把辛酸泪。虽然不是很懂设计在干嘛，但是我还是觉得这人战斗力不弱。</p>
<p>关于设计，下午琢磨了半天的 Sketch ，我想这个周末随便整个记事类型的 App 试试。</p>
<div align="center"><br> <img src="http://img0.imgtn.bdimg.com/it/u=3690421109,3821191199&fm=23&gp=0.jpg" width="200" height="200" alt="图片名称" align="center"><br> </div>

<p>其实小团队相对来说效率还是很高的，不开过多的会议，半年的时间我参加了不到 5 次。当然效率和开会关系不大，根本不差那点时间，但是这是一个体制的问题，为什么开会多，那是因为决定权往往不是在一个人手里，那是因为大家都相信通过讨论事情能有更好的解决方案。</p>
<p>几乎什么问题都要讨论，没有办法就是这样。</p>
<p><strong>黑客与画家</strong> 中的主角，刚好下午看到那章，他最开始所在的公司 Viaweb。一共就 3 个人。一个界面，一个后台，一个管理，一个用 C 和 C++，一个用 Perl，一个用 Python，一同开发一款互联网服务的产品。后来被雅虎以不低的价格收购了，之后他在感受到了大公司的做派，很不适应。</p>
<p>他还说了个 <a href="http://baike.baidu.com/link?url=SGXnIqr8q-hc7M93XB8b7yEIQ82K45H8qfxHJFrvVv6hkFoM-gVTi_WCC7ckbBe0FgQ_YAazQvMWVwKQbGCywdm9a7m2Hr2ySwkO9fnv-2XV7PqKKAVR9ZsPQ-QRWyd9" target="_blank" rel="external">人月神话</a> 中的事，10 个人一个月可以做完的事，可能 20 个人半个月可以做完，30 个人可能要两个月，100 人估计一年都完成不了。 </p>
<p>这事估计包工头是搞不拎清的，但是管技术的都懂。</p>
<p>当然我是没有这种烦恼，毕竟我现在也算是自己负责一个 App。</p>
<div align="center"><br> <img src="http://img5.imgtn.bdimg.com/it/u=1707114256,3473739083&fm=23&gp=0.jpg" width="300" height="200" alt="图片名称" align="center"><br> </div>

<p>估计我是离题了。</p>
<p>小时候，可能是智力小游戏玩多了，现在脑子有点不大好使。也有可能是大学的时候 LOL 玩多了，</p>
<p>屁嘞，皮肤抽了一堆，排位一共还没玩 20 把，</p>
<p>哦，那可能是大乱斗和无限火力玩傻了。</p>
<p>大学，在做图书馆管理员的那段日子，应该是书看多了，放下了游戏，看起了单片机。</p>
<p>也不知道脑子是瓦特了还是又进水了，那个寒假买了万能表和电烙铁等一堆装备半夜在家焊电路。看着郭天祥的 10 天学会 51 单片机想着我可能可以在那板子上跑个小游戏。</p>
<p>事实证明：</p>
<p><img src="http://img0.imgtn.bdimg.com/it/u=1191114715,1311049547&amp;fm=23&amp;gp=0.jpg" alt=""></p>
<p>现在在公司暂时我还是挺没事做的。当然我说的事仅仅指的是公司分配的任务，自己要做的事还是一大堆。</p>
<p>例如现在是周五晚上 11 点，我居然在写这个可能是没有意义的东西。像这种事，可能我可以循环几个月。</p>
<p>所以我给自己定了一个更加无聊的小目标。</p>
<p>每周不论是随笔，随想或者是电影观后感，书籍读后感。以上选一个整理出来。要发博客才算。(我会告诉你我换了新住址之后心情好的每天都自己写日记吗)</p>
<p>每天记录 5 个技术型的单词，例如，今天的单词是 <strong>eliminate</strong>，<strong>obscure</strong>，<strong>anticipate</strong>，<strong>allocation</strong>，<strong>concrete</strong>。苹果的小伙伴注意，小技巧，选择单词，然后 command + shift + y ，一般人我不告诉他。</p>
<p><img src="http://img1.imgtn.bdimg.com/it/u=2539876683,45375580&amp;fm=23&amp;gp=0.jpg" alt=""></p>
<p>每周回答两个知乎问题。抖机灵也好，一本正经也好。对于什么论坛什么社区的潜水的我来说，是该上去换换气了。先从它开始。</p>
<p>扇贝英语打卡就不说了，今天第 700 天了，断不了的。我可能又是有点膨胀。</p>
<p>关于尤克里里，一周一个新曲肯定不行，一段还是可以的。其实这个不用定目标，也会弹的。因为手机和电脑都没有游戏了，弹琴估计是我唯一的放松方式。</p>
<p>不对，还有做菜。做菜的时候也放松。</p>
<p>一周尝试一道新菜吧。哈哈。含着泪吃下去。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=2&id=28285910&auto=1&height=32"></iframe>

]]></content>
      
        <categories>
            
            <category> 随笔 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 个人随想 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Mac使用技巧]]></title>
      <url>http://yoursite.com/2017/04/14/Mac%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>新版 MacPro</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8A%E5%8D%8811.14.37.png" alt=""></p>
<p> 入手 3 月多了。 简单说说使用的心得，好用的软件和一些小技巧吧。</p>
<h2 id="外观"><a href="#外观" class="headerlink" title="外观"></a>外观</h2><h3 id="Dock"><a href="#Dock" class="headerlink" title="Dock"></a>Dock</h3><p>在没用 Mac 之前，在 Window 系统上我就用了 <a href="http://www.ouyaoxiazai.com/soft/stgj/14/19457.html" target="_blank" rel="external">RocketDock</a> ，可山寨终究是山寨啊。</p>
<p>不过相对来说原生的 Dock 自定义性不强，怎么改都不满意。</p>
<p>在个时候就需要 <a href="http://xclient.info/s/cdock.html" target="_blank" rel="external">cDock2</a>了。</p>
<a id="more"></a>
<p>先来张图预览下:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8A%E5%8D%8811.34.35.png" alt=""></p>
<p>虽然总体区别不大，但是还是有些细节差别的。</p>
<p>更有立体感了，打开的应用会有倒影。这些通过 <a href="http://w0lfschild.github.io/app_cDock.html" target="_blank" rel="external">cDock2</a> 都是可以调整的，具体的自己调整一下就知道了。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8A%E5%8D%8811.38.21.png" alt=""></p>
<p>使用该软件之前，有几个步骤要走(软件上本来就有指导)</p>
<ol>
<li>重启 MAC。</li>
<li>按住 command + R 不动，直到 OS X 实用工具页面出现。</li>
<li>菜单上选择实用工具 -&gt; 终端</li>
<li><p>在出现的控制台窗口中输入如下命令并敲回车: </p>
<p>   csrutil disable</p>
</li>
<li>重启 MAC</li>
<li>正常进入 OS X 系统，使用 cDock2 设置 dock 样式</li>
<li>设置好后，继续重启 MAC ，按住 command + R 不动，直到 OS X 实用工具页面出现。</li>
<li><p>这次输入如下命令并敲回车：</p>
<p>   csrutil enable</p>
</li>
</ol>
<p>要是还不行，自行 <strong><a href="https://www.baidu.com/baidu?tn=64075107_1_dg&amp;ie=utf-8&amp;wd=cdock2" target="_blank" rel="external">百度</a></strong> 或 <strong><a href="https://www.google.co.jp/search?q=cdock2&amp;oq=cdock2&amp;gs_l=serp.3...51948.51948.0.52153.1.1.0.0.0.0.0.0..0.0....0...1.1.64.serp..1.0.0.3W9PtJ0bW7Q" target="_blank" rel="external">Google</a></strong> 。</p>
<p>另外还有图标的修改，也挺有意思的，之前的图片中也可以看出，我改了 Finder 和 Sublime 的图标。</p>
<p>图标的来源可以参考 <a href="https://dribbble.com/search?q=mac+icon" target="_blank" rel="external">这里</a> 。</p>
<p>修改的过程很简单，自己 <strong><a href="http://jingyan.baidu.com/article/e5c39bf5baa1e639d6603355.html" target="_blank" rel="external">搜下</a></strong> 就有了。</p>
<p>有一点要注意下，修改了图标之后，可能并不会马上生效，不要慌，重启下软件可能就好了。</p>
<h3 id="壁纸"><a href="#壁纸" class="headerlink" title="壁纸"></a>壁纸</h3><p>推荐个软件 <a href="http://arkanath.com/FreshBackMac/" target="_blank" rel="external">FreshBackMac</a> 。 很小，3M 左右，不用安装，点击就可以用了。</p>
<p>可以设置更新频率，图片内容，来源等等。。。</p>
<p>一个字，好用。</p>
<p>当然，如果刚好看到特别喜欢的桌面，也可以下载保存下来。</p>
<p>分享几张个人比较喜欢的图片。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/macbook_pro_3-wallpaper-2560x1600.jpg" alt="图1"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/bg-1.jpg" alt="图2"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/Unsplash%20Source.jpg" alt="图3"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/macbook_triangles-wallpaper-1680x1050.jpg" alt="图4"></p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/apple_leather_2-wallpaper-1680x1050.jpg" alt="图5"></p>
<h3 id="终端配色"><a href="#终端配色" class="headerlink" title="终端配色"></a>终端配色</h3><p>我用的是 <a href="http://iterm2.com/" target="_blank" rel="external">iTerm2</a>  </p>
<p>它有什么用就不<strong><a href="https://www.zhihu.com/question/27447370" target="_blank" rel="external">多说</a></strong>了。</p>
<p>配色方案很多，可以参考 <a href="https://github.com/mbadolato/iTerm2-Color-Schemes" target="_blank" rel="external">这里</a>。</p>
<p>为了方便使用，可以设置全局 <em>热键</em> ，瞬间呼出。</p>
<p>iTerm2 -&gt; Preferences -&gt; Appearance -&gt; Hotkey -&gt; Check “Show/hide iTerm2 with a system-wide hotkey”</p>
<p>然后设置新窗口的布局，让它半透明之类的(看你喜欢),占据你的半个屏幕之类的(看你喜欢),出现在顶端。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8B%E5%8D%881.32.01.png" alt=""></p>
<p>最后为了使用更酷，使用它的时候不让它出现在 Dock 上面:</p>
<p>执行:</p>
<p> <code>/usr/libexec/PlistBuddy -c &quot;Add :LSUIElement bool true&quot; /Applications/iTerm.app/Contents/Info.plist</code></p>
<p>然后重启 iTerm2 就行了。</p>
<p>想要恢复的话，执行:</p>
<p><code>/usr/libexec/PlistBuddy -c &quot;Delete :LSUIElement&quot; /Applications/iTerm.app/Contents/Info.plist</code></p>
<p>说几个常用的快捷键:</p>
<ul>
<li>command + d / command + shift + d 横竖分屏</li>
<li>command + option + 方向键 在分屏中切屏</li>
<li>command + ; 自动补全 </li>
<li><p>command + shift + h 历史记录</p>
<p>…</p>
</li>
</ul>
<h2 id="高效软件"><a href="#高效软件" class="headerlink" title="高效软件"></a>高效软件</h2><h3 id="Contexts"><a href="#Contexts" class="headerlink" title="Contexts"></a><a href="http://xclient.info/s/contexts.html" target="_blank" rel="external">Contexts</a></h3><p>第一个必须是它。</p>
<p>我 13 寸的 MacPro 肯定是没有地盘一直显示 Dock 了，所以都是自动隐藏的。</p>
<p>每次 command + m 一个软件之后，就想着有什么方法可以不用鼠标点 Dock 的情况下唤起缩小过后的程序。(用 command + tab 一个个切换太笨拙了 )</p>
<p>答案就是 <strong>Contexts</strong> ，两个字，非常棒。</p>
<p>当然，可能会有按键冲突，那么就在 设置 → Panel → Switch by window number 中，可以更改根据编号切换窗口的快捷键。</p>
<p>具体可以看这里的 <em><a href="https://sspai.com/post/32468?utm_medium=referral&amp;utm_source=tuicool" target="_blank" rel="external">详细攻略</a></em>。</p>
<h3 id="MacDown"><a href="#MacDown" class="headerlink" title="MacDown"></a><a href="https://github.com/MacDownApp/macdown" target="_blank" rel="external">MacDown</a></h3><p> 用了几个 MarkDown 的编辑器或者插件之后觉得这个最为简洁直观。</p>
<p> 常用快捷键在 Format 里，command + 一些首字母，比较少，基本都是很常用的。</p>
<p> 代码的话除了 double `。</p>
<p> 还可以使用 6 个 ` 中间加语言类型。 </p>
<p> 不管他是不是盗版还是啥的，还是支持下开源。</p>
<h3 id="BetterTouchTool"><a href="#BetterTouchTool" class="headerlink" title="BetterTouchTool"></a>BetterTouchTool</h3><p>这玩意就是将触摸板与功能更更好的体现出来。</p>
<p>它的 DIY 性令人发指。</p>
<p>手势特别的多</p>
<p><img src="http://i2.muimg.com/567571/a8a92a1ee3a8adea.png" alt=""></p>
<p>单指双指三指···</p>
<p>每种下面又细分:</p>
<p><img src="http://i1.piimg.com/567571/f8d296dfa79d84a0.png" alt=""></p>
<p>拍左边拍右边滑左边滑右边。。。</p>
<p>作用域可以是单个指定的应用或者全局:</p>
<p><img src="http://i1.piimg.com/567571/91acc1c0bd186724.png" alt=""></p>
<p>我高兴开始了我的设置，比如 Chrome 窗口下，单指轻拍右上角全屏，右下角关闭。因为觉得可以摸一下解决的事何必要用键盘呢。</p>
<p>…</p>
<p>半个小时之后，我觉得我要疯了，一不小心摸一下哪儿就触发了什么机关，定义没几个我就开始记不住了(真是太蠢了)，反正很烦。然后我就放弃了，其实键盘挺好用的，何必折腾自己。 </p>
<h3 id="Alfred-3"><a href="#Alfred-3" class="headerlink" title="Alfred 3"></a>Alfred 3</h3><p><em>待更新…</em></p>
<h2 id="翻墙"><a href="#翻墙" class="headerlink" title="翻墙"></a>翻墙</h2><h3 id="XX-net"><a href="#XX-net" class="headerlink" title="XX-net"></a><a href="https://github.com/XX-net/XX-Net" target="_blank" rel="external">XX-net</a></h3><p>开源没有流量限制，搭配 Chrome 使用更好。</p>
<p>整体速度较快，但是不稳定。</p>
<p>具体配置 <a href="https://github.com/XX-net/XX-Net/wiki/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3" target="_blank" rel="external">文档</a> 里已经说的非常清楚了。</p>
<h3 id="影梭"><a href="#影梭" class="headerlink" title="影梭"></a><a href="https://www.shadowshocks.com/" target="_blank" rel="external">影梭</a></h3><p>我用的是 99/年的，用了半年多了，前几个月一般般，后几个月根本上不了网。</p>
<p>太坑了，价格低质量差？</p>
<p>配置不算难，但是有点蠢，下个客户端，一个一个的加代理服务器地址。</p>
<p>用的时候最好是看看哪个延时低用哪个，很无语。</p>
<h3 id="lantern"><a href="#lantern" class="headerlink" title="lantern"></a><a href="https://github.com/getlantern/lantern" target="_blank" rel="external">lantern</a></h3><p>基础版免费有限制，不过流量不是很少，整体速度一般，但是相对稳定。</p>
<p>使用特特别简单，双击。</p>
<h2 id="一些插件"><a href="#一些插件" class="headerlink" title="一些插件"></a>一些插件</h2><h3 id="关于翻译"><a href="#关于翻译" class="headerlink" title="关于翻译"></a>关于翻译</h3><p>英语不好真是够呛的</p>
<h4 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h4><p>三指轻触取词:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8B%E5%8D%883.55.07.png" alt=""></p>
<p>设置也挺方便的:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8B%E5%8D%883.50.37.png" alt=""></p>
<p>讲道理整个系统通用的，但是相对有时候取的范围不大准，所以一些软件还是有必要在搞些别的。</p>
<h4 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h4><p><a href="https://chrome.google.com/webstore/detail/halo-word-dictionary/bhkcehpnnlgncpnefpanachijmhikocj" target="_blank" rel="external">Halo Word Dictionary</a></p>
<p>按住 command 键取词就行了。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8B%E5%8D%883.56.54.png" alt=""></p>
<h4 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h4><p>command + shift + a 输入 plug ,</p>
<p>下载 ECTranslation 翻译插件，可能要重启生效。</p>
<p>command + , (在 Mac 上基本所有的软件的设置快捷都是这个)输入 keymap 搜索 translate ,找到后自己选个不冲突的全局快捷键就好了。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-14%20%E4%B8%8B%E5%8D%884.22.32.png" alt=""><br><br></p>
<h2 id="4-20-更新"><a href="#4-20-更新" class="headerlink" title="4.20 更新"></a>4.20 更新</h2><h3 id="Chrome-1"><a href="#Chrome-1" class="headerlink" title="Chrome"></a>Chrome</h3><p>关于 Chrome 的最大化，直接双击顶部只能是竖向占满屏幕，如果想要横线也占满，在双击的同时按住 Shift 键。 </p>
<p>按住 control 不放 ，再按 tab 可以切换 Chrome 的子窗口，和长按 command + tab 的组合差不多。</p>
<p>以及在 Chrome 中非常非常常用的两个快捷键，command + w 关闭当前子窗口(这个在几乎所有的软件中都适用)，command + t 打开新的子窗口。哦，还有个可能会用到的，如果一不小心关了个子窗口想重新打开可能会跑历史记录里面查找恢复，直接按 command + shift + t 就好了。 </p>
<h2 id="4-22-更新"><a href="#4-22-更新" class="headerlink" title="4.22 更新"></a>4.22 更新</h2><h3 id="Chrome-2"><a href="#Chrome-2" class="headerlink" title="Chrome"></a>Chrome</h3><p>切换子窗口用 option + command + 左右方向键 更好用</p>
<h2 id="4-24-更新"><a href="#4-24-更新" class="headerlink" title="4.24 更新"></a>4.24 更新</h2><h3 id="MWeb"><a href="#MWeb" class="headerlink" title="MWeb"></a>MWeb</h3><p>现在使用的 MarkDown 工具。集成了许多插件，功能齐全，十分强大大大，还支持绑定许多图床，包括七牛，图片直接拖进去就可以使用了，之前虽然下了但是感觉不够简洁，习惯了就好了。等用一段时间再总结。</p>
<h2 id="4-27-更新"><a href="#4-27-更新" class="headerlink" title="4.27 更新"></a>4.27 更新</h2><h3 id="iterm"><a href="#iterm" class="headerlink" title="iterm"></a>iterm</h3><p>有个坑。</p>
<p>感觉今天 Mac 中毒了一样，我的 Android Studio 鼠标箭头老是变成等待的彩色圆圈，气的我敲代码的效率降低了有 36.25%，然后我就重启了我的 MBP。</p>
<p>然后发现他丫的 iTerm 老是启动失败，由于我马上弄好了，忘了截图，反正就是提示配置错误一堆的玩意，下次有机会补上截图。</p>
<p>原因就是自己作的，把 iTerm 在 Dock 中去除了，恢复了就好了。相应指令之前说过了。</p>
<p>   <strong>未完待续…</strong></p>
<p><br><br><br></p>
<p>友情链接：</p>
<p><a href="https://aaaaaashu.gitbooks.io/mac-dev-setup/content/index.html" target="_blank" rel="external">Mac 开发配置手册。</a></p>
<p><a href="https://sspai.com/tag/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7#home" target="_blank" rel="external">很多效率工具的推荐以及详细介绍。</a></p>
<p><a href="http://xclient.info/" target="_blank" rel="external">许多免费优质的 Mac 软件。</a></p>
<p><a href="http://blog.csdn.net/shulianghan/article/details/47321177" target="_blank" rel="external">Mac 版 Android Studio 超详细快捷键。 </a></p>
<p><a href="http://blog.csdn.net/duanyipeng/article/details/8637391" target="_blank" rel="external">Mac 版 Chrome 快捷键。</a></p>
<p><a href="https://segmentfault.com/a/1190000000505218" target="_blank" rel="external">Mac 版 Sublime 小技巧和快捷键。</a></p>
]]></content>
      
        <categories>
            
            <category> Mac相关 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 技巧 </tag>
            
            <tag> Mac </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[网络传输基础]]></title>
      <url>http://yoursite.com/2017/04/10/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93/</url>
      <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="五层模型"><a href="#五层模型" class="headerlink" title="五层模型"></a>五层模型</h3><p>相比 OSI 的 7 层参考模型，为了更加高效的开发，TCP/IP 使用了 4 层参考模型。</p>
<p>但是一般为了介绍方便，一般采用 5 层协议。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/1-150526093225401.png" alt=""></p>
<p>为何协议，协议就是大家都遵守的规则，所有的这些协议统称为<strong>互联网协议</strong>。<br><a id="more"></a><br>每层模型都有属于自己的协议，协议各式各样，有的是为了数据能找到目的地址，有的是为了保证源数据的完整性，有的是当发送失败的重发使用等等。</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/231055580455666.jpg" alt=""></p>
<p>发送数据的时候至上而下经过层层模型，经过每层模型的时候都会在数据中加点本层模型的内容，层层封装之后发送到另一个主机上。</p>
<p>就像是买了个小礼品，包装了一层一层，最后写上收件人交给邮递员，历经万水千山，收件人拿到了快递，再一层一层的拆包装，最后才能看到里面的小礼品。</p>
<p>对的，就算你在 QQ 上发了一个句号给你的朋友，这个句号也要这样经过层层封装，在网络中不断辗转。</p>
<p>下面就主要介绍一下每层之中重要的协议和一些基本概念。</p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><p>是体系中的最高层，也是用户最能直观感受到的一层。</p>
<p>该层的任务是<strong>通过应用进程间的交互来完成特定网络应用</strong>。这里进程就是指那些正在运行的程序。</p>
<p>例如 QQ、Chrome、Foxmail 等。不同的程序有各自的协议，比如 Chrome 就应该遵守 <a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEhtt" target="_blank" rel="external">HTTP</a> 或者是 <a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">HTTPS</a> 协议，Foxmail 要遵守 <a href="https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">SMTP</a> 协议，QQ 之间传递文件就要遵守 <a href="https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">FTP</a> 协议。</p>
<p>我们常说的报文，就是该层交互的数据单元。</p>
<p>HTTP 协议:</p>
]]></content>
      
        <categories>
            
            <category> 计算机基础 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 协议 </tag>
            
            <tag> 网络 </tag>
            
            <tag> 传输 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[深入理解 Java 虚拟机(结构篇)]]></title>
      <url>http://yoursite.com/2017/04/10/JVM%20%E7%BB%93%E6%9E%84%E7%AF%87/</url>
      <content type="html"><![CDATA[<h2 id="Class-类文件的结构"><a href="#Class-类文件的结构" class="headerlink" title="Class 类文件的结构"></a>Class 类文件的结构</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>是一组以 8 位字节为基础单位的二进制流。</p>
<p>其格式是一种类似于 C 语言结构体的伪结构，由两种数据类型组成。</p>
<ol>
<li>无符号数: 基本数据类型，数字、索引引用、数量值等等。</li>
<li>表: 由多个无符号数或者其他表组成，以 _info 结尾。</li>
</ol>
<p>整个 Class 文件本质上就是一张表。</p>
<p>Class 结构的了解对进一步理解虚拟机执行引擎很重要。<br><a id="more"></a></p>
<h3 id="魔数与-Class-文件版本"><a href="#魔数与-Class-文件版本" class="headerlink" title="魔数与 Class 文件版本"></a>魔数与 Class 文件版本</h3><p>每个 Class 文件的头 4 个字节被称为魔数( Magic Number )。</p>
<p>作用是确定这个文件是否能被虚拟机接受，例如 Gif，jpeg 之类的文件也存在魔数。因为通过后缀来判断不够安全。</p>
<p>Class 文件的魔数值为: OxCAFEBABE (其魔数值某种程度上也是决定了 Java 未来的图标是咖啡 ^ v ^ )</p>
<p>第 5、6、7、8 个字节分别是次版本号和主版本号。</p>
<h3 id="常量池"><a href="#常量池" class="headerlink" title="常量池"></a>常量池</h3><p>Class 文件的资源仓库。</p>
<p>常量池入口放置一个 u2 类型的数据，用于统计池中数量。</p>
<p>( u1，u2，u4，u8 分别代表 1、2、4、8 个字节的无符号数)</p>
<p>池中主要存放两种类型的常量：</p>
<ol>
<li>字面量: 像 Java 中的 String，final 修饰的常量。</li>
<li>符号引用: 类、接口、字段、方法、名称描述。JVM</li>
</ol>
<p>JDK 1.7 中有 14 中常量类型，每一项都是一个表。</p>
<h3 id="访问标志"><a href="#访问标志" class="headerlink" title="访问标志"></a>访问标志</h3><p>是否为 <code>public</code> ，<code>final</code> 是类还是接口，是否抽象，是不是枚举等等。</p>
<h3 id="类索引、父类索引、接口索引集合"><a href="#类索引、父类索引、接口索引集合" class="headerlink" title="类索引、父类索引、接口索引集合"></a>类索引、父类索引、接口索引集合</h3><h3 id="字段表集合"><a href="#字段表集合" class="headerlink" title="字段表集合"></a>字段表集合</h3><p>用来描述类或接口中声明的变量，不包括局部变量。</p>
<p>字段作用域、是实例变量还是类变量、是否被 <code>final</code> 修饰等等。</p>
<h3 id="方法表集合"><a href="#方法表集合" class="headerlink" title="方法表集合"></a>方法表集合</h3><p>描述方法，类似于字段的形式。</p>
<h3 id="属性表集合"><a href="#属性表集合" class="headerlink" title="属性表集合"></a>属性表集合</h3><p>在字段表集合和属性表集合中都存在，用来描述某些场景的专有信息。</p>
<h2 id="字节码指令"><a href="#字节码指令" class="headerlink" title="字节码指令"></a>字节码指令</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>JVM 的指令由一个字节长度的特定数字( Opcode )和数字后面带的参数（ Operands )构成。</p>
<h3 id="字节码与数据类型"><a href="#字节码与数据类型" class="headerlink" title="字节码与数据类型"></a>字节码与数据类型</h3><p>在 Class 文件中对于不同的数据类型，采用不同的 Opcode 。</p>
<p>例如:</p>
<ul>
<li><code>iload</code> 用来操作 int 类型</li>
<li><code>fload</code> 用来操作 float 类型</li>
</ul>
<p>但是由于 JVM 中 Opcode 的长度是有限制的，只有 1 个字节，所以为每个数据类型都设计相应的 Opcode 是不现实的。</p>
<p>于是使用一些单独的指令，将不支持类型操作的，转换成支持的。</p>
<h3 id="加载和存储指令"><a href="#加载和存储指令" class="headerlink" title="加载和存储指令"></a>加载和存储指令</h3><p>栈帧中的局部变量表和操作数栈之间数据的相互传输。</p>
<h3 id="运算指令"><a href="#运算指令" class="headerlink" title="运算指令"></a>运算指令</h3><p>也是针对不同的类型，有着不同的 Opcode，例如:</p>
<ul>
<li>加法: <code>iadd</code>、<code>ladd</code>、<code>fadd</code>、<code>dadd</code></li>
<li>减法: <code>isub</code>、<code>lsub</code>、<code>fsub</code>、<code>dsub</code></li>
<li>按位与指令: <code>ior</code>、<code>lor</code></li>
</ul>
<p>可以看出首字母就是数据类型。</p>
<h3 id="类型转换指令"><a href="#类型转换指令" class="headerlink" title="类型转换指令"></a>类型转换指令</h3><p>例如: <code>i2b</code> <code>i2c</code> <code>i2s</code> 等等</p>
<h3 id="对象创建与访问指令"><a href="#对象创建与访问指令" class="headerlink" title="对象创建与访问指令"></a>对象创建与访问指令</h3><p>实例和数组采用不同的字节码指令。</p>
<h3 id="操作数栈管理指令"><a href="#操作数栈管理指令" class="headerlink" title="操作数栈管理指令"></a>操作数栈管理指令</h3><p>例如:</p>
<ul>
<li>将操作数栈的栈顶一个或两个元素出栈: <code>pop</code>、<code>pop2</code>。</li>
<li>将栈最顶端的两个数值互换: <code>swap</code>。</li>
</ul>
<h3 id="控制转移指令"><a href="#控制转移指令" class="headerlink" title="控制转移指令"></a>控制转移指令</h3><p>可以让指令不按顺序执行程序，本质上来说就是修改 PC Register 的值。</p>
<p>Java 中的保留字 <code>goto</code> 就是无条件分支中的控制转移指令。</p>
<h3 id="方法调用和返回指令"><a href="#方法调用和返回指令" class="headerlink" title="方法调用和返回指令"></a>方法调用和返回指令</h3><p>例如:</p>
<ul>
<li><code>invokestatic</code> 用于调用类方法</li>
<li><code>invokeinterface</code> 用于调用接口方法</li>
</ul>
<h3 id="异常处理指令"><a href="#异常处理指令" class="headerlink" title="异常处理指令"></a>异常处理指令</h3><p>JVM 中，处理 <code>catch</code> 语句不是由字节码指令来实现，是采用异常表来实现的。</p>
<h3 id="同步指令"><a href="#同步指令" class="headerlink" title="同步指令"></a>同步指令</h3><p>方法级的同步和方法内部的同步都是使用 Monitor 来支持的。</p>
<p>方法中调用过的每条 <code>monitorenter</code> 指令都必须执行对应的 <code>monitorexit</code> 指令。</p>
]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java 虚拟机 </tag>
            
            <tag> Class 结构 </tag>
            
            <tag> JVM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Effectice Java(一)]]></title>
      <url>http://yoursite.com/2017/04/04/Effective%20Java/</url>
      <content type="html"><![CDATA[<h2 id="创建和销毁对象"><a href="#创建和销毁对象" class="headerlink" title="创建和销毁对象"></a>创建和销毁对象</h2><h3 id="考虑用静态工厂方法代替构造器"><a href="#考虑用静态工厂方法代替构造器" class="headerlink" title="考虑用静态工厂方法代替构造器"></a>考虑用静态工厂方法代替构造器</h3><p>主要有 4 点优势:</p>
<ol>
<li>它们有名字</li>
<li>不需要再每次调用的时候都创建一个新的对象</li>
<li><p>可以返回原返回类型的任何子类型的对象</p>
<p>有点绕，但是不难理解。</p>
<p>例如，Java Collections Framework 的集合接口有 32 个实现，几乎所有的实现都是通过静态工厂方法在一个不可实例化的类中导出的。</p>
</li>
<li><p>在创建参数化类型实例的时候，代码更简洁。</p>
<p>举个栗子:</p>
<p>传统写法</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map&lt;String,List&lt;String&gt;&gt; map = <span class="keyword">new</span> Hash&lt;String,List&lt;String&gt;&gt;();</div></pre></td></tr></table></figure>
<p>每次都要写两次泛型，一点都不优雅。</p>
<p>如果 HaspMap 提供了这样的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;K,V&gt; <span class="function">HashMap&lt;K,V&gt; <span class="title">newInstance</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Hash&lt;K,V&gt;();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p> 那么创建就简洁了:</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map&lt;String,List&lt;String&gt;&gt; map = HashMap.newInstance();</div></pre></td></tr></table></figure>
<p>有 2 个缺点</p>
<ol>
<li>类如果不含公有的或者受保护的构造器，就不能被子类化</li>
<li><p>它们与其他的静态方法实际上没有什么区别</p>
<p>因为在 API 文档中，静态工厂并没有明确的标记出来，所以你不能清楚的知道该类是否用了静态工厂或者是知道该类使用了静态工厂，却又不知道该如何去实例化。</p>
</li>
</ol>
<h3 id="多个参数参与构造，考虑用构造器"><a href="#多个参数参与构造，考虑用构造器" class="headerlink" title="多个参数参与构造，考虑用构造器"></a>多个参数参与构造，考虑用构造器</h3><p>对于需要多参数来初始化的对象，一般有三种方式。</p>
<p>绝大多数程序员都使用重叠构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> a; <span class="comment">//required</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> b; <span class="comment">//required</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> c; <span class="comment">//optional</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> d; <span class="comment">//optional</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> e; <span class="comment">//optional</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>(a,b,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>(a,b,c,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c,<span class="keyword">int</span> d)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>(a,b,c,d,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c,<span class="keyword">int</span> d,<span class="keyword">int</span> e)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.a = a;</div><div class="line">		<span class="keyword">this</span>.b = b;</div><div class="line">		<span class="keyword">this</span>.c = c;</div><div class="line">		<span class="keyword">this</span>.d = d;</div><div class="line">		<span class="keyword">this</span>.e = e;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当参数多的时候，创建实例化很乱，参数不直观,顺序颠倒之类的很难发现:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Example example = <span class="keyword">new</span> Example(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div></pre></td></tr></table></figure>
<p>第二种模式， JavaBeans 模式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> a = -<span class="number">1</span>; <span class="comment">// Required</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> b = -<span class="number">1</span>; <span class="comment">// Required</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> c = <span class="number">0</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> d = <span class="number">0</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> e = <span class="number">0</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">public</span> Example&#123;&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.a = a;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setB</span><span class="params">(<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.b = b;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实例化的时候</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Example example = <span class="keyword">new</span> Example();</div><div class="line"></div><div class="line">example.setA(<span class="number">1</span>);</div><div class="line">example.setB(<span class="number">2</span>);</div><div class="line">example.setC(<span class="number">3</span>);</div><div class="line">example.setD(<span class="number">4</span>);</div><div class="line">example.setE(<span class="number">5</span>);</div></pre></td></tr></table></figure>
<p>但是由于构造过程被分到了几个调用中，可能会导致不一致性，会有一定的安全问题。</p>
<p>第三种方式，即安全又具有良好的可读性:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> a;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> b;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> c;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> d;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> e;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span></span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> a;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> b;</div><div class="line"></div><div class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> c = <span class="number">0</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> d = <span class="number">0</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> e = <span class="number">0</span>;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">			<span class="keyword">this</span>.a = a;</div><div class="line">			<span class="keyword">this</span>.b = b;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">c</span><span class="params">(<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">			<span class="keyword">this</span>.c = c;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">d</span><span class="params">(<span class="keyword">int</span> d)</span></span>&#123;</div><div class="line">			<span class="keyword">this</span>.d = d;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">e</span><span class="params">(<span class="keyword">int</span> e)</span></span>&#123;</div><div class="line">			<span class="keyword">this</span>.e = e;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> Example <span class="title">builder</span><span class="params">()</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Example(<span class="keyword">this</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Example</span><span class="params">(Builder builder)</span></span>&#123;</div><div class="line">		a = builder.a;</div><div class="line">		b = builder.b;</div><div class="line">		c = builder.c;</div><div class="line">		d = builder.d;</div><div class="line">		e = builder.e;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实例化:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Example example = <span class="keyword">new</span> Example.Builder(<span class="number">1</span>,<span class="number">2</span>).c(<span class="number">3</span>).d(<span class="number">4</span>).e(<span class="number">5</span>);</div></pre></td></tr></table></figure>
<p>当然，Builder 模式也有不足的地方，为了创建对象要多创建一个构建器，但是如果你的对象初始化需要多个参数或者以后可能需要多个参数，建议还是使用构建器。</p>
<h3 id="用私有构造器或者枚举强化-Singleton-属性"><a href="#用私有构造器或者枚举强化-Singleton-属性" class="headerlink" title="用私有构造器或者枚举强化 Singleton 属性"></a>用私有构造器或者枚举强化 Singleton 属性</h3><p>一般都这通过两种方式创建单例对象:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Singleton&#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>由于构造器是私有的，并且 INSTANCE 是被 final 修饰的，所以 <code>Singleton.INSTANCE</code> 对象是全局唯一的。</p>
<p>第二种方式:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Singleton&#123;...&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Singleton getInstance&#123;</div><div class="line">		<span class="keyword">return</span> INSTANE;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>工厂方法的优势在于，它更加灵活，在不改变其他 API 的前提下 ，改变其中的内容。</p>
<p>从 JDK 1.5 开始，还有第三种方式:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton&#123;</div><div class="line">	INSTANE;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>枚举的方式，更加简洁，同时无偿提供了序列化机制。 是实现 Singleton 的最佳方式。</p>
<p>但是在 Android 中，由于枚举的开销比较大，占用内存是普通单例的 10 多倍，不建议使用枚举。</p>
<h3 id="通过私有构造器强化不可实例化的能力"><a href="#通过私有构造器强化不可实例化的能力" class="headerlink" title="通过私有构造器强化不可实例化的能力"></a>通过私有构造器强化不可实例化的能力</h3><p>例如一些工具类，不希望被实例化，那就需要:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Utils</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Utils</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> AssertionError();<span class="comment">//为了避免在内部调用</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>防止被滥用，因为对于一些工具类，被实例化是没有意义的。</p>
<h3 id="避免创建不必要的对象"><a href="#避免创建不必要的对象" class="headerlink" title="避免创建不必要的对象"></a>避免创建不必要的对象</h3><p>举一个极端的例子:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String s = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</div></pre></td></tr></table></figure>
<p>好吧，有点常识的都知道，这种做法特别的蠢。</p>
<p>因为相同的 String 是会被重用的，所以:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String s = <span class="string">"abc"</span>;</div></pre></td></tr></table></figure>
<p>对于同时提供了静态工厂方法和构造器的不可变类，通常可以使用静态工厂方法来避免对象的重复创建。</p>
<p>···</p>
<h3 id="消除过期的对象引用"><a href="#消除过期的对象引用" class="headerlink" title="消除过期的对象引用"></a>消除过期的对象引用</h3><h3 id="避免使用终结方法"><a href="#避免使用终结方法" class="headerlink" title="避免使用终结方法"></a>避免使用终结方法</h3>]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 高效 </tag>
            
            <tag> Java </tag>
            
            <tag> Effectice </tag>
            
            <tag> 思想 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[深入理解 Java 虚拟机(内存篇)]]></title>
      <url>http://yoursite.com/2017/04/03/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B9%8B%20%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20Java%20%E8%99%9A%E6%8B%9F%E6%9C%BA%E2%80%94%E2%80%94%E5%86%85%E5%AD%98%E7%AF%87/</url>
      <content type="html"><![CDATA[<h2 id="Java-内存区域"><a href="#Java-内存区域" class="headerlink" title="Java 内存区域"></a>Java 内存区域</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>对于 C 和 C++ 程序员来说，他们即拥有每一个对象的“所有权”，同时也担负每一个对象生命周期的维护责任。</p>
<p>而 Java 程序员则是在虚拟机自动内存管理机制的帮助下，不用操心对象内存的释放。但是也正由于这个帮助，一旦程序出现内存泄漏和溢出问题的时候，由于不够了解虚拟机运行机制，而对问题无从下手。<br><a id="more"></a></p>
<h3 id="运行时数据区域"><a href="#运行时数据区域" class="headerlink" title="运行时数据区域"></a>运行时数据区域</h3><p><img src="http://on9hzfn6s.bkt.clouddn.com/Runtime.jpg" alt=""></p>
<p>上图是 Java 虚拟机运行时数据区的结构图</p>
<h4 id="PC-Register"><a href="#PC-Register" class="headerlink" title="PC Register"></a>PC Register</h4><p>当一个 Java 线程启动的时候，就会产生一个程序计数器( Program Counter Register ),它是一块较小的内存空间。</p>
<p>当线程正在执行的是一个 Java方法的时候，它记录的是正在执行的虚拟机字节码指令的地址，如果执行的是 Native 方法，就为空。</p>
<p>该区域是唯一个在 Java 虚拟机中不存在 OOM 的区域。</p>
<h4 id="JVM-Stack"><a href="#JVM-Stack" class="headerlink" title="JVM Stack"></a>JVM Stack</h4><p>与 PC Register 一样，JVM Stack 也是线程私有的。</p>
<p>其描述的是 Java 方法的内存模型。</p>
<p>在方法执行的同时会创建一个栈帧( Stack Frame ) ,用于存储局部变量表，操作数栈等信息。（之后会详说）</p>
<h4 id="Native-Stack"><a href="#Native-Stack" class="headerlink" title="Native Stack"></a>Native Stack</h4><p>与 JVM Stack 非常相似，只不过一个是关于 Java 方法的，一个是关于 Native 方法的。</p>
<h4 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h4><p>对许多应用来说， Java Heap 是 JVM 所管理的内存中最大的一块。其资源也是被所有线程所共享的。</p>
<p>该区域的唯一目的就是存放内存对象实例。它也是垃圾收集器主要管理的区域。(也有称其为“ GC 堆”)</p>
<h4 id="Method-Area"><a href="#Method-Area" class="headerlink" title="Method Area"></a>Method Area</h4><p>也是被线程共享的区域，主要用来存储已被虚拟机加载过的类的信息，常量，静态变量等。</p>
<p>JVM 规范中称它为 Heap 的一个逻辑部分。但它还有一个别名叫做 Non-Heap。</p>
<p>也有部分 HotSpot 虚拟机开发者称其为 Permanent Generation（永久代），因为 HotSpot 虚拟机的设计团队将 GC 分代收集机制应用于方法区，将它看做是永久代处理。</p>
<h4 id="Runtime-Constant-Pool"><a href="#Runtime-Constant-Pool" class="headerlink" title="Runtime Constant Pool"></a>Runtime Constant Pool</h4><p>运行时常量池是方法区的一部分，用于存放编译期生成的各种字面量和符号用引用。</p>
<h4 id="Direct-Memory"><a href="#Direct-Memory" class="headerlink" title="Direct Memory"></a>Direct Memory</h4><p>直接内存虽然不是 JVM 运行时数据区的一部分，但是却被频繁使用。</p>
<p>在 JDK 1.4 中新加入了 NIO（New Input/Output）类，引入了一种基于 Channel 与 Buffer 的 I/O 方式，它可以使用 Native 直接分配堆外内存，然后用 Java Heap 中的 DirectByteBuffer 对象作为内存引用进行操作。避免在 Java Heap 和 Native Heap 来回复制数据，提高了不少性能。</p>
<h3 id="HotSpot-虚拟机对象"><a href="#HotSpot-虚拟机对象" class="headerlink" title="HotSpot 虚拟机对象"></a><a href="https://zh.wikipedia.org/wiki/HotSpot" target="_blank" rel="external">HotSpot</a> 虚拟机对象</h3><h4 id="对象的创建"><a href="#对象的创建" class="headerlink" title="对象的创建"></a>对象的创建</h4><p>当遇到一条 New 指令的时候，检查该类是否已经被加载解析，初始化。如果没有先执行类的加载过程，关于类的加载之后再详说。</p>
<p>加载检查之后就是分配内存空间。</p>
<p>关于内存的分配根据收集器算法的不同而采用不同的分配方式：</p>
<ul>
<li>例如 Serial 和 ParNew 等带 Compact 过程的的收集器使用的分配算法是指针碰撞。（因为采用压缩算法，内存相对是平整的）</li>
<li>使用 CMS 这种基于 Mark-Sweep 算法的收集器采用的是空间列表。（因为标记清除容易产生内存碎片化，需要用列表来记录可用内存指针的位置）</li>
</ul>
<p>考虑到并发情况下操作内存指针的安全性问题，对分配内存又进行了同步处理：</p>
<ul>
<li>采用 <a href="http://www.searchsoa.com.cn/showcontent_69238.htm" target="_blank" rel="external">CAS</a> 配上失败重试的方式保证更新操作的原子性。</li>
<li>一开始就给不同线程分配一块叫做<em>本地线程分配缓冲</em>（Thread Local Allocatiuon Buffer,TLAB）的区域当做缓存，只有当它用完了，重新分配的时候才需要同步锁定。</li>
</ul>
<h4 id="对象的内存布局"><a href="#对象的内存布局" class="headerlink" title="对象的内存布局"></a>对象的内存布局</h4><p>对象布局主要由三个部分组成：</p>
<h5 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h5><p>对象头主要由两个部分组成：</p>
<ol>
<li><p>第一部分 官方称之为 Mack Word ，主要存储哈希码，GC 分代年龄，锁状态的标志等信息。<br><img src="http://on9hzfn6s.bkt.clouddn.com/ObejctHeader.jpg" alt=""></p>
</li>
<li><p>第二分就是存储类型指针了。也就是指向对象的类元数据指针。</p>
</li>
</ol>
<h5 id="Insatance-Data"><a href="#Insatance-Data" class="headerlink" title="Insatance Data"></a>Insatance Data</h5><p>该部分存储的是对象真正的有效信息，存储的是代码中定义的各种类型的字段。不论是父类继承，还是子类定义的信息都会被记录。</p>
<h5 id="Padding"><a href="#Padding" class="headerlink" title="Padding"></a>Padding</h5><p>由于虚拟机的管理机制要求，对象的起始地址必须是 8 个字节的整数倍，所以该部分就是用来填补空缺的。</p>
<h4 id="对象的访问定位"><a href="#对象的访问定位" class="headerlink" title="对象的访问定位"></a>对象的访问定位</h4><p>关于对象的访问，许多人都知道，是通过在 Stack 上的一个 reference 数据来操作 Heap 上的具体对象，但是是通过什么方式访问却没有指定。</p>
<p>目前主流的有两种方式，<strong>句柄</strong> 和 <strong>直接指针</strong>。</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E5%8F%A5%E6%9F%84" target="_blank" rel="external"><em>句柄</em></a><br><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%885.01.54.png" alt=""></li>
</ul>
<p>上图已经表示的非常清楚了，使用该方式的访问，Java Heap 中会划分出一个句柄池，优点很明显，当对象改变时，Java Stack 中的 reference 是不改变的。移动的是句柄中的实例数据指针。</p>
<ul>
<li><em>直接指针</em><br><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%885.02.07.png" alt=""></li>
</ul>
<p>很明显 reference 直接指向对象实例数据，优势就是速度更快。（ HotSpot 使用这种方式）</p>
<h2 id="Java-垃圾收集器"><a href="#Java-垃圾收集器" class="headerlink" title="Java 垃圾收集器"></a>Java 垃圾收集器</h2><h3 id="关于对象存活的判断"><a href="#关于对象存活的判断" class="headerlink" title="关于对象存活的判断"></a>关于对象存活的判断</h3><h4 id="引用计数算法"><a href="#引用计数算法" class="headerlink" title="引用计数算法"></a>引用计数算法</h4><p>给对象添加一个引用计数器，被引用加 1 ，引用失效减 1 。为 0 就说明不再被使用。</p>
<p>该算法的优势很明显：实现简单，判定效率也很高。</p>
<p>但是缺点也明显：很难解决对象之间相互循环引用的问题。这也是 JVM 没有选用该算法的最主要原因。</p>
<h4 id="可达性分析算法"><a href="#可达性分析算法" class="headerlink" title="可达性分析算法"></a>可达性分析算法</h4><p>通过一系列被称为 GC Root 的对象作为起点，从这些节点向下搜索，没有被搜索到的对象都被当做垃圾。</p>
<p>可以被当成是 GC Root 对象的，在 Java 中有：</p>
<ul>
<li>JVM Stack 中引用的对象。</li>
<li>方法区中常量引用的对象。</li>
<li>本地方法栈中 Native 方法引用的对象。</li>
</ul>
<h3 id="垃圾收集算法"><a href="#垃圾收集算法" class="headerlink" title="垃圾收集算法"></a>垃圾收集算法</h3><h4 id="标记-清除算法"><a href="#标记-清除算法" class="headerlink" title="标记-清除算法"></a>标记-清除算法</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%885.31.55.png" alt=""></p>
<p>先标记无用对象，在清除。是最基础算法，之后的算法都是根据它来改进。</p>
<p>不足有两点：</p>
<ol>
<li>标记和清除的效率都不高。</li>
<li>清除之后会导致内存的碎片化。</li>
</ol>
<h4 id="复制算法"><a href="#复制算法" class="headerlink" title="复制算法"></a>复制算法</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%885.32.09.png" alt=""></p>
<p>将内存一分为二，每次用其中一块。当一块内存用完的时候，就将存活的对象复制到另一块新的空的内存中，然后这边一次性全部清空就好了。简单高效。</p>
<p>缺点很明显，就是只有一半的内存能用。</p>
<h4 id="标记-整理算法"><a href="#标记-整理算法" class="headerlink" title="标记-整理算法"></a>标记-整理算法</h4><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%885.32.25.png" alt=""></p>
<p>可以说是前两种算法的综合，标记阶段和“<em>标记-清除</em>”算法一样，清除阶段先是将存活对象移到一边，然后直接清除没被引用对象。</p>
<p>解决了碎片化和清除效率低的问题。</p>
<h4 id="分代收集算法"><a href="#分代收集算法" class="headerlink" title="分代收集算法"></a>分代收集算法</h4><p>当前主流算法，是前面几种算法的综合。</p>
<p>根据对象存活的周期(每 GC 一次算一个周期)，将内存分为新生代和老年代。</p>
<p>在新生代由于对象一般都是朝生夕死，而且占用内存量相对小，所以使用复制算法。</p>
<p>老年代存活率高，使用”<em>标记-清理</em>”或者“<em>标记-整理</em>”算法。</p>
]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
            <tag> 算法 </tag>
            
            <tag> JVM </tag>
            
            <tag> 内存 </tag>
            
            <tag> GC </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Atlas框架浅析]]></title>
      <url>http://yoursite.com/2017/03/27/Atlas%E6%A1%86%E6%9E%B6%E6%B5%85%E6%9E%90/</url>
      <content type="html"><![CDATA[<h1 id="Atlas框架浅析"><a href="#Atlas框架浅析" class="headerlink" title="Atlas框架浅析"></a><a href="http://atlas.taobao.org/docs/principle-intro/Runtime_principle.html" target="_blank" rel="external">Atlas框架浅析</a></h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="Atlas由来"><a href="#Atlas由来" class="headerlink" title="Atlas由来"></a>Atlas由来</h3><p>Atlas 是希腊神话中擎天的巨人。  (寓为脚踏底层框架，为应用撑起一片天)</p>
<p>2013年手淘人员倍增，整个客户端架构重构，形成了今天的 <a href="https://github.com/alibaba/atlas" target="_blank" rel="external">Atlas</a>。<br><a id="more"></a></p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li>工程期，实现工程独立开发，调试的功能，工程模块独立。</li>
<li>运行期，实现完整的组件生命周期的映射，类隔离等机制。</li>
<li>运维期，提供快速增量的更新修复能力，快速升级。</li>
</ul>
<h3 id="关于组件化"><a href="#关于组件化" class="headerlink" title="关于组件化"></a>关于组件化</h3><p><img src="http://img.ithome.com/newsuploadfiles/2014/4/20140416_142230_251.jpg" alt=""></p>
<p>上图是 Google 的 <a href="http://baike.baidu.com/link?url=xjB1VemJ78Qs4fRHSVEcbEDRcb8JuHJFEMIIDY7J9JTbN1CZIIYcxlr2S1H9PzUQcCxLL7TD3zfNUmPKUzrd0f0Tn4T20RMzHji3_RpCYNqWCgiJcsuhc3U8ZeDWE98dweMMnSmWbxiwXuyjJ1hSg_" target="_blank" rel="external">模块化手机</a>，与该框架在许多地方有异曲同工之妙。</p>
<p>Atlas 框架支持大量丰富的业务接入，同时业务之间又能够保持相对的独立性，耦合性低，各自可以灵活的升级维护。</p>
<p>一些底层业务，例如缓冲框架，图片加载框架，网络加载框架等中间件代码又能够全面复用。</p>
<p><img src="http://77g29m.com1.z0.glb.clouddn.com/QQ%E6%88%AA%E5%9B%BE20161017172555.png" alt=""></p>
<p>上图中，上层是许多独立业务，组件 Bundle 之间又可以通过路由调用其他业务。下层是底层共享框架，由容器统一管理。</p>
<h2 id="框架原理"><a href="#框架原理" class="headerlink" title="框架原理"></a>框架原理</h2><h3 id="容器框架"><a href="#容器框架" class="headerlink" title="容器框架"></a>容器框架</h3><p>该框架自下而上主要分为5层</p>
<p><img src="http://77g29m.com1.z0.glb.clouddn.com/360%E6%A1%8C%E9%9D%A2%E6%88%AA%E5%9B%BE20161018150127.png" alt=""></p>
<ol>
<li><strong>Hack 层</strong>：一些系统的注入以及工具类的初始化校验等，并在容器启动时进行全局性的兼容校验。</li>
<li><strong>Bundle Framework 层</strong>：负责组件的安装、更新、操作以及管理 <a href="http://atlas.taobao.org/docs/principle-intro/Project_architectured.html" target="_blank" rel="external">Bundle</a> 的生命周期。</li>
<li><strong>Runtime 层</strong>：主要是版本、清单和代理管理。</li>
<li><strong>Business 层</strong>：向业务方暴露一些接口。</li>
<li><strong>应用接入层</strong>：完成 Atlas 的初始化功能，业务代码。</li>
</ol>
<h3 id="技术细节"><a href="#技术细节" class="headerlink" title="技术细节"></a>技术细节</h3><h4 id="Bundle-生命周期"><a href="#Bundle-生命周期" class="headerlink" title="Bundle 生命周期"></a>Bundle 生命周期</h4><p><img src="http://atlas.taobao.org/docs/principle-intro/Project_architectured_img/bundle_cycle.png" alt=""></p>
<ol>
<li><strong>startInstall</strong> 开始加载</li>
<li><strong>Installed</strong> 加载完毕 注入资源路径，开始创建 <code>class loader</code></li>
<li><strong>resolved</strong>    解析完毕 校验组件的安全性</li>
<li><strong>active</strong>      运行组件 Bundle</li>
<li><strong>started</strong> 运行成功</li>
</ol>
<h4 id="Runtime层详解"><a href="#Runtime层详解" class="headerlink" title="Runtime层详解"></a>Runtime层详解</h4><h5 id="清单"><a href="#清单" class="headerlink" title="清单"></a><em>清单</em></h5><p><a href="http://baike.baidu.com/link?url=63266s6ygSe4vCxpc8dR5LCkYcK8nLJRpXo6cOkWhW7LTUrdptPNKic2m2b6egtiLIgmcQC1JBrF1k113CpFfq" target="_blank" rel="external">OSGI</a> 规范中每个组件通常通过 OSGI.MF 来暴露自身的 component ,这是与 Atlas 容器所不同的地方。在 Android 设备上，多文件的形式很容易受IO异常的影响干扰 bundle 正常运行，所以我们采用了构建期间集中生成清单的方式，清单里面记录 bundle 所有的 component (Android 四大组件)，依赖、packagename 等内容。</p>
<h5 id="版本"><a href="#版本" class="headerlink" title="版本"></a><em>版本</em></h5><p>每个组件在构建期间就由构建插件分配自己的版本号，同时安装期间也有各自的版本目录，每个 bundle 的启动加载都需要经过版本的校验，组件发生更新同时也下发最新的版本信息。依托版本管理机制组件的热更新能力水到渠成。</p>
<h5 id="代理"><a href="#代理" class="headerlink" title="代理"></a><em>代理</em></h5><p>最核心的两个代理点：一个是 <code>DelegateClassLoader</code>：负责路由 <code>class</code> 加载到各个 bundle 内部，第二个是 <code>DelegateResource</code>：负责资源查找时能够找到 bundle 内的资源；这是 bundle 能够真正运行起来的根本；其余的代理点均是为了保证在必要的时机按需加载起来目标 bundle，让其可以被 <code>DelegateClassloader</code> 和 DelegateResource 使用。</p>
<h4 id="类加载机制"><a href="#类加载机制" class="headerlink" title="类加载机制"></a>类加载机制</h4><p>正因为 <code>classloader</code> 的存在，组件的独立性有了充分的保证。利用 <code>Delegate ClassLoader</code> 来动态加载组件的类。<code>Delegate ClassLoader</code> 先查找宿主 Bundle 的 <code>PathClassLoader</code>，然后根据前面的 BundleList 找到对应的 <code>BundleClassLoader</code>.</p>
<p><img src="http://atlas.taobao.org/docs/principle-intro/Project_architectured_img/classloader.png" alt=""></p>
<h4 id="资源加载机制"><a href="#资源加载机制" class="headerlink" title="资源加载机制"></a>资源加载机制</h4><p>所有的 Bundle 资源会按顺序被添加到 AssertPath 中，DelegateResource 会替换系统的 resource。</p>
<p><img src="http://77g29m.com1.z0.glb.clouddn.com/QQ%E6%88%AA%E5%9B%BE20161017154906.png" alt=""></p>
<h2 id="动态部署"><a href="#动态部署" class="headerlink" title="动态部署"></a>动态部署</h2><h3 id="技术分析"><a href="#技术分析" class="headerlink" title="技术分析"></a>技术分析</h3><p>之前的组件化只是解决了耦合性的问题，动态部署实现了随时发包的功能。</p>
<ol>
<li><strong>构建</strong> 一般的 Apk 更新产物是 apk，动态部署的构建产物是一个后缀为 tpatch 格式的文件。</li>
<li><strong>Merge</strong> 下载到 tpatch 文件之后，在后台完成 Merge 到安装的过程，整个过程对用户是透明的。</li>
<li><strong>生效</strong> Merge 完成后，会在 App 下次重新打开的时候完成此次的部署。</li>
</ol>
<h4 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h4><p>主 Apk 和 bundle 的差量采用的是不同的策略，主Apk始终是与基线版本做差量，而 bundle 是与上一个版本做差量。</p>
<p>例如 1.0 动态部署到 1.1 再到 1.2，主 Apk 在 1.1 升 1.2 的时候是将 1.2 与 1.0 (也就是基线)做差量而不是1.1。而 bundle 则是逐个版本做差量分析。</p>
<h4 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h4><p>基于手淘自主研发的差量算法，主 Bundle (也就是主 Apk )基于 <code>ClassLoader</code> 机制，业务 Bundle 基于差量 merge。</p>
<p><img src="http://atlas.taobao.org/docs/update/img/art_maindex_merge.png" alt=""></p>
<p><strong>主 Bundle</strong> 的 Merge 在 <a href="http://baike.baidu.com/link?url=_xpjWNOxKozSLkceX5OZ5DU4o4fHwieu2seCMWLlMWBtxrYNcOobwSSkLtM9lKs9IbgssJdozCy7xTV7GJ_gra" target="_blank" rel="external">Dalvik</a> 和 [Art] (<a href="http://baike.baidu.com/item/Android%20runtime?sefr=cr" target="_blank" rel="external">http://baike.baidu.com/item/Android%20runtime?sefr=cr</a>) ( Android Runtime )中是不同的。</p>
<p> Dalvik 设备上没有任何 Merge 过程，直接把 libcom_taobao_maindex.so 以 bundle 的形式安装到 com.taobao.maindex 目录下。</p>
<p>Art 设备上我们会根据 source 的 apk（主 apk 的 merge 永远是基于基线版本）把 classes.dex 提取出来以多 dex 的方式追加到 libcom_taobao_maindex.so 中，如果本身是多 dex 机制的，那么会将多个子 dex 全部追加进去，patch 里面的 classes.dex 保持不变，source 里面的 dex 的序列号往后偏移一位。关于 preVerify 标签问题，<a href="https://mp.weixin.qq.com/s?__biz=MzI1MTA1MzM2Nw==&amp;mid=400118620&amp;idx=1&amp;sn=b4fdd5055731290eef12ad0d17f39d4a" target="_blank" rel="external">QQ 空间的热修复方案</a>是在类中的构造函数里插入代码。</p>
<p><strong>业务 Bundle</strong> 的 Merge 相对简单一些。</p>
<p><img src="http://atlas.taobao.org/docs/update/img/bundle_merge.png" alt=""></p>
<p>patch 信息来自于 bundle 在下载的 tpatch 包中的内容，客户端的 merge 过程会根据 patch 信息，取到 source 组件，source dex 和 patch dex 进行 dex 合并，合成新的 dex，同时变化的资源覆盖老的资源最终形成新的组件。</p>
<h2 id="AtlasDemo"><a href="#AtlasDemo" class="headerlink" title="AtlasDemo"></a><a href="https://github.com/alibaba/atlas/tree/master/atlas-demo/%E5%9F%BA%E4%BA%8E%E7%89%88%E6%9C%AC%E6%89%93%E5%8C%85%E7%9A%84demo" target="_blank" rel="external">AtlasDemo</a></h2><h3 id="项目运行"><a href="#项目运行" class="headerlink" title="项目运行"></a>项目运行</h3><p>安装运行 Demo 配置如下：</p>
<p>app 的 build.gradle 文件中</p>
<p><code>version = getEnvValue(&quot;versionName&quot;,&quot;1.0.0&quot;);</code></p>
<p>AndroidMainfest.xml 文件中</p>
<p><code>android:versionName=&quot;1.0.0&quot;</code></p>
<p>bundle 中的 build.gradle文件中</p>
<p><code>version = &#39;1.0.0&#39;</code></p>
<p>接着运行 shell 脚本 <a href="https://github.com/alibaba/atlas/blob/master/atlas-demo/%E5%9F%BA%E4%BA%8E%E7%89%88%E6%9C%AC%E6%89%93%E5%8C%85%E7%9A%84demo/app/buildApk.sh" target="_blank" rel="external">buildApk.sh </a></p>
<p>构建app，生成 apk 和 ap，同时把 ap 文件发布到本地仓库</p>
<p>此时点击动态部署：</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/Screenshot_2017-03-22-14-42-34.png" width="300" height="400" alt="Demo图片" align="center"></p>
<p>点击 Go TO BUNDLEACTIVITY</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/Screenshot_2017-03-22-14-42-46.png" width="300" height="400" alt="Demo图片" align="center"></p>
<p>显示的是业务bundle版本号</p>
<p>–</p>
<p>修改配置以及 项目代码(可选)：</p>
<p>app 的 build.gradle 文件中</p>
<p><code>version = getEnvValue(&quot;versionName&quot;,&quot;1.0.1&quot;);</code></p>
<p>AndroidMainfest.xml 文件中</p>
<p><code>android:versionName=&quot;1.0.1&quot;</code></p>
<p>bundle 中的 build.gradle文件中</p>
<p><code>version = &#39;1.0.1&#39;</code></p>
<p>再次执行 <a href="https://github.com/alibaba/atlas/blob/master/atlas-demo/%E5%9F%BA%E4%BA%8E%E7%89%88%E6%9C%AC%E6%89%93%E5%8C%85%E7%9A%84demo/app/buildApk.sh" target="_blank" rel="external">shell</a> 脚本，构建app，生成 apk 和 ap，同时把 ap 文件发布到本地仓库 again</p>
<p>–</p>
<p>最后执行 <a href="https://github.com/alibaba/atlas/blob/master/atlas-demo/%E5%9F%BA%E4%BA%8E%E7%89%88%E6%9C%AC%E6%89%93%E5%8C%85%E7%9A%84demo/app/buildTpatch.sh" target="_blank" rel="external">buildTpatch.sh</a> 脚本，重构 apk，生成 patch 包，上传 tpatch</p>
<p>点击动态部署</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/Screenshot_2017-03-22-14-50-13.png" width="300" height="400" alt="Demo图片" align="center"></p>
<p> 部署成功，重启生效。</p>
<p>其中 <code>./gradlew clean assembleDebug -DapVersion=1.0.0 -DversionName=1.0.1</code> 版本号需要相对应</p>
<p>–</p>
<p>重启app之后,主 Bundle 版本号已经改变，动态部署成功。</p>
<p> <img src="http://on9hzfn6s.bkt.clouddn.com/Screenshot_2017-03-22-14-50-23.png" width="300" height="400" alt="Demo图片" align="center"></p>
<p> 点击 Go TO BUNDLEACTIVITY 进入业务 bundle 发现版本号也是发现了变化。</p>
<p>  <img src="http://on9hzfn6s.bkt.clouddn.com/Screenshot_2017-03-22-14-50-29.png" width="300" height="400" alt="Demo图片" align="center"></p>
<p>无需重新安装app就完成了业务代码的修改，这就是动态部署的魅力。</p>
]]></content>
      
        <categories>
            
            <category> 安卓 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 框架 </tag>
            
            <tag> 阿里 </tag>
            
            <tag> Atlas </tag>
            
            <tag> Andoird </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Head First 设计模式]]></title>
      <url>http://yoursite.com/2017/03/23/Head%20First%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=2&id=458647488&auto=1&height=32"></iframe>

<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>定义了算法族，分别封装起来，让他们之间可以相互替换，此模式让算法的变化独立于使用算法的客户。</p>
<h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.jpg" alt=""></p>
<a id="more"></a>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p><strong>设计原则</strong>:抽取可能发生改变的，与不会发生改变的隔离。</p>
<p>将会发生改变的相关性强的行为或者功能抽象，抽取，定义为一个接口:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IStrategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>定义该接口下不同的方法：</p>
<p>方法A:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyA</span> <span class="keyword">implements</span> <span class="title">IStrategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		System.out.println(<span class="string">"ConcreteStrategyA类,FuncA()."</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>方法B:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyB</span> <span class="keyword">implements</span> <span class="title">IStrategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		System.out.println(<span class="string">"ConcreteStrategyB类,FuncB()."</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>方法C:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyC</span> <span class="keyword">implements</span> <span class="title">IStrategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		System.out.println(<span class="string">"ConcreteStrategyC类,FuncC()."</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用该功能的类持有该接口的引用:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Strategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</div><div class="line">	</div><div class="line">		IStrategy iStrategy = <span class="keyword">new</span> ConcreteStrategyA();</div><div class="line">		iStrategy.Func();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Strategy</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</div><div class="line">	</div><div class="line">		IStrategy iStrategy = <span class="keyword">new</span> ConcreteStrategyA();</div><div class="line">		iStrategy.Func();</div><div class="line">		iStrategy = <span class="keyword">new</span> ConcreteStrategyB();</div><div class="line">		iStrategy.Func();</div><div class="line">		iStrategy = <span class="keyword">new</span> ConcreteStrategyC();</div><div class="line">		iStrategy.Func();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编译运行：</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-03%20%E4%B8%8B%E5%8D%8810.58.58.png" alt=""></p>
<p>是的，非常简单，你会发现其实就是多态的体现。</p>
<p>当然这里举的只是最基本的例子，实际开发会在该基础上复杂化，但是基本框架是不变的。</p>
<h2 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>定义了对象之间的一对多依赖。当一个对象改变，它的依赖者都会收到通知并做出改变。</p>
<h3 id="UML-1"><a href="#UML-1" class="headerlink" title="UML"></a>UML</h3><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.jpg" alt=""></p>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p><strong>设计原则</strong>:为了交互对象之间的松耦合设计而努力。</p>
<p>定义一个主题接口，定义<em>注册订阅者</em>，<em>移除订阅者</em>，以及<em>通知订阅者</em>方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>定义一个订阅者接口，定义一个更新方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observer</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String str)</span></span>;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>定义一个主题类，实现主题接口中的方法。</p>
<p>维护一个订阅者列表，注册时加入列表，取消时移出列表，内容更新就遍历列表逐个通知。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> List&lt;Observer&gt; observers;</div><div class="line">	<span class="keyword">private</span> String updateStr;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteSubject</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		observers = <span class="keyword">new</span> ArrayList&lt;Observer&gt;();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>&#123;</div><div class="line">	</div><div class="line">		observers.add(o);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>&#123;</div><div class="line">	</div><div class="line">		<span class="keyword">if</span>(observers.indexOf(o)&gt;=<span class="number">0</span>)&#123;</div><div class="line">			observers.remove(observers.indexOf(o));</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;observers.size(); i++) &#123;</div><div class="line">			Observer observer = (Observer)observers.get(i);</div><div class="line">			observer.update(updateStr);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUpdateStr</span><span class="params">(String updateStr)</span></span>&#123;</div><div class="line">	</div><div class="line">		<span class="keyword">this</span>.updateStr = updateStr;</div><div class="line">		updateStrChanged();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateStrChanged</span><span class="params">()</span></span>&#123;</div><div class="line">	</div><div class="line">		notifyObservers();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>定义一个观察者类，实现观察者接口中的所有方法，通过主题实现类的引用订阅主题:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver</span> <span class="keyword">implements</span> <span class="title">Observer</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String updateStr;</div><div class="line">	<span class="keyword">private</span> Subject mConcreteSubject;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteObserver</span><span class="params">(Subject concreteSubject)</span></span>&#123;</div><div class="line">	</div><div class="line">		<span class="keyword">this</span>.mConcreteSubject = concreteSubject;</div><div class="line">		mConcreteSubject.registerObserver(<span class="keyword">this</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String str)</span></span>&#123;</div><div class="line">	</div><div class="line">		System.out.println(str);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p>创建主题和订阅者对象，修改主题内容。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestClass</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	</div><div class="line">		ConcreteSubject concreteSubject = <span class="keyword">new</span> ConcreteSubject();</div><div class="line">		Observer concreteObserver = <span class="keyword">new</span> ConcreteObserver(concreteSubject);</div><div class="line">		concreteSubject.setUpdateStr(<span class="string">"主题改变A"</span>);</div><div class="line">		concreteSubject.setUpdateStr(<span class="string">"主题改变B"</span>);</div><div class="line">		concreteSubject.setUpdateStr(<span class="string">"主题改变C"</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编译运行:</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-04%20%E4%B8%8A%E5%8D%8810.50.03.png" alt=""></p>
<p>其实 Java 中就有内置观察者模式，不过与上面结构有一点区别。</p>
<p>其中 Observer 还是接口形式，Subject 接口变成了 Observable 抽象类。许多功能都已经实现好了，直接使用 Observable 的 <code>addObserver()</code> 和 <code>deleteObserver()</code> 就可以添加以及取消订阅了。</p>
<p>并且在 <code>update()</code> 方法中，需要传入两个参数，一个主题，一个订阅者，用于更新来自不同主题的内容，更加灵活。</p>
<p>不过总体的结构和思想是一样的。</p>
<h2 id="装饰者模式"><a href="#装饰者模式" class="headerlink" title="装饰者模式"></a>装饰者模式</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><p>动态地将责任附加到对象上，装饰者提供了比继承更有弹性的扩展功能。</p>
<h3 id="UML-2"><a href="#UML-2" class="headerlink" title="UML"></a>UML</h3><p><img src="http://on9hzfn6s.bkt.clouddn.com/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.jpg" alt=""></p>
<h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p><strong>设计原则</strong>:类应该对扩展开放，对修改关闭。</p>
<p>定义一个基类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span></span>&#123;</div><div class="line"></div><div class="line">	String description = <span class="string">"Component"</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">methodA</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> description;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span></span>; </div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>为了方便测试，其中一个方法将显示该类名。</p>
<p>接着定义一个或者多个组件，继承基类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line">	String description = <span class="string">"ConcreteComponent"</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteComponent</span><span class="params">()</span></span>&#123;</div><div class="line">		description = <span class="string">"ConcreteComponent"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>定义一个装饰者抽象类,这样之前定义的组件和它就是同一类型了:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">methodA</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span></span>;</div><div class="line">	 </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>继承装饰者抽象类，根据不同需求，定义各自的装饰内容:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</div><div class="line">	Component component;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorA</span><span class="params">(Component component)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.component = component;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">methodA</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> component.methodA() + <span class="string">",ConcreteDecoratorA"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</div><div class="line"></div><div class="line">	Component component;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorB</span><span class="params">(Component component)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.component = component;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">methodA</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> component.methodA() + <span class="string">",ConcreteDecoratorB"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><p>因为就一个组件，可能测试效果不是很好，但是也可以看得出来用法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestClass1</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	</div><div class="line">		Component component1 = <span class="keyword">new</span> ConcreteComponent();</div><div class="line">		component1 = <span class="keyword">new</span> ConcreteDecoratorA(component1);</div><div class="line">		component1 = <span class="keyword">new</span> ConcreteDecoratorB(component1);</div><div class="line">		component1 = <span class="keyword">new</span> ConcreteDecoratorA(component1);</div><div class="line">		System.out.println(component1.methodA());</div><div class="line"></div><div class="line">		Component component2 = <span class="keyword">new</span> ConcreteComponent();</div><div class="line">		component2 = <span class="keyword">new</span> ConcreteDecoratorB(component2);</div><div class="line">		component2 = <span class="keyword">new</span> ConcreteDecoratorA(component2);</div><div class="line">		System.out.println(component2.methodA());</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编译运行</p>
<p><img src="http://on9hzfn6s.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-04%20%E4%B8%8B%E5%8D%888.40.15.png" alt=""></p>
<p>可以看得出来，该结构非常的灵活。(对象的建立不大优雅，之后会有更好的模式可以运用)</p>
<p>画图工具使用 Chrome 应用 <a href="https://chrome.google.com/webstore/detail/gliffy-diagrams/bhmicilclplefnflapjmnngmkkkkpfad" target="_blank" rel="external">Gliffy Diagrams</a> ，好用看得见。</p>
]]></content>
      
        <categories>
            
            <category> 阅读 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 策略模式 </tag>
            
            <tag> UML </tag>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
